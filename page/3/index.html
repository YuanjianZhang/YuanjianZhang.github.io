<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>不知选啥就选C</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Choose C"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Choose C"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="一个记录生活的Blog"><meta property="og:type" content="blog"><meta property="og:title" content="不知选啥就选C"><meta property="og:url" content="http://yoursite.com/"><meta property="og:site_name" content="不知选啥就选C"><meta property="og:description" content="一个记录生活的Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://yoursite.com/img/og_image.png"><meta property="article:author" content="zhang"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com"},"headline":"不知选啥就选C","image":["http://yoursite.com/img/og_image.png"],"author":{"@type":"Person","name":"zhang"},"publisher":{"@type":"Organization","name":"不知选啥就选C","logo":{"@type":"ImageObject","url":{"text":"Choose C"}}},"description":"一个记录生活的Blog"}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Choose C</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/categories/Technology">技术</a><a class="navbar-item" href="/other">树洞</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-01-05T07:27:05.000Z" title="2022/1/5 下午3:27:05">2022-01-05</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:27:57.851Z" title="2022/2/23 下午5:27:57">2022-02-23</time>更新</span><span class="level-item">1 分钟读完 (大约152个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/01/05/redis%E5%88%9D%E8%AF%86/">redis初识</a></h1><div class="content"><span id="more"></span>

<h2 id="Windows安装Redis"><a href="#Windows安装Redis" class="headerlink" title="Windows安装Redis"></a>Windows安装Redis</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/tporadowski/redis">https://github.com/tporadowski/redis</a></p>
<h2 id="部署为服务"><a href="#部署为服务" class="headerlink" title="部署为服务"></a>部署为服务</h2><p>命令行进入安装目录/解压目录</p>
<p>安装服务: redis-server.exe –service-install redis.windows.conf –loglevel verbose</p>
<p>卸载服务：redis-server –service-uninstall</p>
<p>开启服务：redis-server –service-start</p>
<p>停止服务：redis-server –service-stop</p>
<p>重命名服务：redis-server –service-name name</p>
<p>以下将会安装并启动三个不同的Redis实例作服务：</p>
<figure class="highlight bat"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-install --service-name redisService1 --port <span class="number">10001</span></span><br><span class="line"></span><br><span class="line">redis-server --service-<span class="built_in">start</span> --service-name redisService1</span><br><span class="line"></span><br><span class="line">redis-server --service-install --service-name redisService2 --port <span class="number">10002</span></span><br><span class="line"></span><br><span class="line">redis-server --service-<span class="built_in">start</span> --service-name redisService2</span><br><span class="line"></span><br><span class="line">redis-server --service-install --service-name redisService3 --port <span class="number">10003</span></span><br><span class="line"></span><br><span class="line">redis-server --service-<span class="built_in">start</span> --service-name redisService3</span><br></pre></td></tr></tbody></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/12/11/SqlBulkCopy%E5%AE%9E%E7%8E%B0SQLSRVER%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5/"><img class="fill" src="/images/default.jpeg" alt="【C#】SqlBulkCopy实现SQLSRVER批量插入"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-10T16:00:48.000Z" title="2021/12/11 上午12:00:48">2021-12-11</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:22:04.755Z" title="2022/2/23 下午5:22:04">2022-02-23</time>更新</span><span class="level-item">4 分钟读完 (大约534个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/11/SqlBulkCopy%E5%AE%9E%E7%8E%B0SQLSRVER%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5/">【C#】SqlBulkCopy实现SQLSRVER批量插入</a></h1><div class="content"><span id="more"></span>

<blockquote>
<p>参考：<br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.data.sqlclient.sqlbulkcopy?view=netframework-4.5"> SqlBulkCopy 类</a><br><a target="_blank" rel="noopener" href="http://raylei.cn/index.php/archives/74/">http://raylei.cn/index.php/archives/74/</a><br><a target="_blank" rel="noopener" href="https://www.cxybb.com/article/weixin_30333885/96361368">https://www.cxybb.com/article/weixin_30333885/96361368</a></p>
</blockquote>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul>
<li><p>来自数据源的 Decimal 类型的给定值不能转换为指定目标列的类型 datetime<br>  实际情况可能很复杂，使用的是泛型进行实体类转DataTable,可能会出现各种类型错误提示。<br>  自己使用的是调用Copy()方法。<br>  demo:</p>
  <figure class="highlight csharp"><figcaption><span>demo.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> TableStruct = dal.GetTableStruct();</span><br><span class="line">DataTable dataTable = TableStruct.Clone();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> oD.ToList&lt;StdYpkcday&gt;())</span><br><span class="line">{</span><br><span class="line">    DataRow dataRow = dataTable.NewRow();</span><br><span class="line">    dataRow[<span class="string">"id"</span>] = DBNull.Value;<span class="comment">//自增主键。赋值DBNull.Value</span></span><br><span class="line">    dataRow[<span class="string">"code"</span>] = item.Hoscode;</span><br><span class="line">    <span class="keyword">if</span> (item.Gqsj == <span class="literal">null</span> )</span><br><span class="line">    {</span><br><span class="line">        dataRow[<span class="string">"time"</span>] = DBNull.Value;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        dataRow[<span class="string">"time"</span>] = item.Gqsj;</span><br><span class="line">    }</span><br><span class="line">    dataTable.Rows.Add(dataRow);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/18140012/sqlbulkcopy-the-given-value-of-type-string-from-the-data-source-cannot-be-conv">https://stackoverflow.com/questions/18140012/sqlbulkcopy-the-given-value-of-type-string-from-the-data-source-cannot-be-conv</a></p>
</blockquote>
</li>
</ul>
<h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><figure class="highlight csharp"><figcaption><span>删除并批量插入.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 删除并批量插入</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="_Type"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="TableName"&gt;</span>批量插入数据的表名<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="Dt"&gt;</span>批量插入的数据<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="SqlDeleteText"&gt;</span>删除的sql语句<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">DeleteAndBulkCopy</span>(<span class="params"><span class="built_in">string</span> Type,<span class="built_in">string</span> TableName, DataTable Dt, <span class="built_in">string</span> SqlDeleteText,<span class="built_in">bool</span> isIncreaPK</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">using</span> (SqlConnection conn = <span class="keyword">new</span> SqlConnection(DBUtility.DbCommon.GetConnectString(Type)))</span><br><span class="line">    {</span><br><span class="line">        conn.Open();</span><br><span class="line">        <span class="keyword">using</span> (SqlTransaction transaction = conn.BeginTransaction())</span><br><span class="line">        {</span><br><span class="line">            SqlCommand sqlcom = conn.CreateCommand();</span><br><span class="line">            sqlcom.Transaction = transaction;</span><br><span class="line">            sqlcom.CommandText = SqlDeleteText;</span><br><span class="line">            <span class="keyword">var</span> BulkCopyOptions = SqlBulkCopyOptions.KeepIdentity;</span><br><span class="line">            <span class="comment">//自增主键，使用系统生成主键</span></span><br><span class="line">            <span class="keyword">if</span> (isIncreaPK)</span><br><span class="line">            {</span><br><span class="line">                BulkCopyOptions = SqlBulkCopyOptions.Default;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">using</span> (SqlBulkCopy bulk = <span class="keyword">new</span> SqlBulkCopy(conn, BulkCopyOptions, transaction))</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (Dt.Rows.Count &gt; <span class="number">0</span>)</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; Dt.Columns.Count; i++)</span><br><span class="line">                    {</span><br><span class="line">                        bulk.ColumnMappings.Add(Dt.Columns[i].ColumnName, Dt.Columns[i].ColumnName);</span><br><span class="line">                    }</span><br><span class="line">                    bulk.BatchSize = Dt.Rows.Count;</span><br><span class="line">                    bulk.DestinationTableName = TableName;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                {</span><br><span class="line">                    sqlcom.ExecuteNonQuery();</span><br><span class="line"></span><br><span class="line">                    bulk.WriteToServer(Dt);</span><br><span class="line">                    transaction.Commit();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">                {</span><br><span class="line">                    transaction.Rollback();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">finally</span></span><br><span class="line">                {</span><br><span class="line">                    bulk.Close();</span><br><span class="line">                    conn.Close();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight csharp"><figcaption><span>批量更新.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">region</span> 批量更新</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 批量更新</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="dataTable"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="crateTemplateSql"&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> eg:</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> [xxx] varchar(255)  NOT NULL,[xxx] varchar(10)  NOT NULL</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="updateSql"&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> eg:</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> UPDATE bulktest  set bulktest.name=Temp.tempname </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> FROM bulktest INNER JOIN #TmpTable Temp </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> ON Temp.temprdn = bulktest.rdn  ; </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> DROP TABLE #TmpTable</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SqlBulkCopyUpdate</span>(<span class="params">DataTable dataTable, <span class="built_in">string</span> crateTemplateSql, <span class="built_in">string</span> updateSql</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">using</span> (SqlConnection conn = <span class="keyword">new</span> SqlConnection(DBUtility.DbCommon.GetConnectString(DBType)))</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> command = <span class="keyword">new</span> SqlCommand(<span class="string">""</span>, conn))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            {</span><br><span class="line">                conn.Open();</span><br><span class="line">                <span class="comment">//数据库并创建一个临时表来保存数据表的数据</span></span><br><span class="line">                command.CommandText = <span class="string">$"  CREATE TABLE #TmpTable (<span class="subst">{crateTemplateSql}</span>)"</span>;</span><br><span class="line">                command.ExecuteNonQuery();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//使用SqlBulkCopy 加载数据到临时表中</span></span><br><span class="line">                <span class="keyword">using</span> (<span class="keyword">var</span> bulkCopy = <span class="keyword">new</span> SqlBulkCopy(conn))</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">foreach</span> (DataColumn dcPrepped <span class="keyword">in</span> dataTable.Columns)</span><br><span class="line">                    {</span><br><span class="line">                        bulkCopy.ColumnMappings.Add(dcPrepped.ColumnName, dcPrepped.ColumnName);</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                    bulkCopy.BulkCopyTimeout = <span class="number">660</span>;</span><br><span class="line">                    bulkCopy.DestinationTableName = <span class="string">"#TmpTable"</span>;</span><br><span class="line">                    bulkCopy.WriteToServer(dataTable);</span><br><span class="line">                    bulkCopy.Close();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 执行Command命令 使用临时表的数据去更新目标表中的数据  然后删除临时表</span></span><br><span class="line">                command.CommandTimeout = <span class="number">300</span>;</span><br><span class="line">                command.CommandText = updateSql;</span><br><span class="line">                <span class="built_in">int</span> rows = command.ExecuteNonQuery();</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">throw</span> ex;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">finally</span></span><br><span class="line">            {</span><br><span class="line">                conn.Close();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endregion</span></span></span><br></pre></td></tr></tbody></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/12/01/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E3%80%90%E4%B8%80%E3%80%91/"><img class="fill" src="/images/default.jpeg" alt="判断文件类型【一】"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-01T08:54:21.000Z" title="2021/12/1 下午4:54:21">2021-12-01</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:58.662Z" title="2022/2/23 下午5:21:58">2022-02-23</time>更新</span><span class="level-item">4 分钟读完 (大约566个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/01/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E3%80%90%E4%B8%80%E3%80%91/">判断文件类型【一】</a></h1><div class="content"><span id="more"></span>

<p>现有一文件，其扩展名未知或标记错误。假设它是一个正常的、非空的文件，且将扩展名更正后可以正常使用，那么，如何判断它是哪种类型的文件？<br>在后缀未知，或者后缀被修改的文件，依然通过文件头来判断该文件究竟是什么文件类型。</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature/13614746#13614746">C#实现参考</a>：</p>
<figure class="highlight csharp"><figcaption><span>example.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MimeType</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] BMP = { <span class="number">66</span>, <span class="number">77</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] DOC = { <span class="number">208</span>, <span class="number">207</span>, <span class="number">17</span>, <span class="number">224</span>, <span class="number">161</span>, <span class="number">177</span>, <span class="number">26</span>, <span class="number">225</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] EXE_DLL = { <span class="number">77</span>, <span class="number">90</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] GIF = { <span class="number">71</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">56</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] ICO = { <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] JPG = { <span class="number">255</span>, <span class="number">216</span>, <span class="number">255</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] MP3 = { <span class="number">255</span>, <span class="number">251</span>, <span class="number">48</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] OGG = { <span class="number">79</span>, <span class="number">103</span>, <span class="number">103</span>, <span class="number">83</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] PDF = { <span class="number">37</span>, <span class="number">80</span>, <span class="number">68</span>, <span class="number">70</span>, <span class="number">45</span>, <span class="number">49</span>, <span class="number">46</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] PNG = { <span class="number">137</span>, <span class="number">80</span>, <span class="number">78</span>, <span class="number">71</span>, <span class="number">13</span>, <span class="number">10</span>, <span class="number">26</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">13</span>, <span class="number">73</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">82</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] RAR = { <span class="number">82</span>, <span class="number">97</span>, <span class="number">114</span>, <span class="number">33</span>, <span class="number">26</span>, <span class="number">7</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] SWF = { <span class="number">70</span>, <span class="number">87</span>, <span class="number">83</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TIFF = { <span class="number">73</span>, <span class="number">73</span>, <span class="number">42</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TORRENT = { <span class="number">100</span>, <span class="number">56</span>, <span class="number">58</span>, <span class="number">97</span>, <span class="number">110</span>, <span class="number">110</span>, <span class="number">111</span>, <span class="number">117</span>, <span class="number">110</span>, <span class="number">99</span>, <span class="number">101</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TTF = { <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] WAV_AVI = { <span class="number">82</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">70</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] WMV_WMA = { <span class="number">48</span>, <span class="number">38</span>, <span class="number">178</span>, <span class="number">117</span>, <span class="number">142</span>, <span class="number">102</span>, <span class="number">207</span>, <span class="number">17</span>, <span class="number">166</span>, <span class="number">217</span>, <span class="number">0</span>, <span class="number">170</span>, <span class="number">0</span>, <span class="number">98</span>, <span class="number">206</span>, <span class="number">108</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] ZIP_DOCX = { <span class="number">80</span>, <span class="number">75</span>, <span class="number">3</span>, <span class="number">4</span> };</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">GetMimeType</span>(<span class="params"><span class="built_in">byte</span>[] file, <span class="built_in">string</span> fileName</span>)</span></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> mime = <span class="string">"application/octet-stream"</span>; <span class="comment">//DEFAULT UNKNOWN MIME TYPE</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Ensure that the filename isn't empty or null</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrWhiteSpace(fileName))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> mime;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get the file extension</span></span><br><span class="line">        <span class="built_in">string</span> extension = Path.GetExtension(fileName) == <span class="literal">null</span></span><br><span class="line">                               ? <span class="built_in">string</span>.Empty</span><br><span class="line">                               : Path.GetExtension(fileName).ToUpper();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get the MIME Type</span></span><br><span class="line">        <span class="keyword">if</span> (file.Take(<span class="number">2</span>).SequenceEqual(BMP))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/bmp"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">8</span>).SequenceEqual(DOC))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/msword"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">2</span>).SequenceEqual(EXE_DLL))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-msdownload"</span>; <span class="comment">//both use same mime type</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(GIF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/gif"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(ICO))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/x-icon"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(JPG))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/jpeg"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(MP3))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"audio/mpeg"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">14</span>).SequenceEqual(OGG))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (extension == <span class="string">".OGX"</span>)</span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"application/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (extension == <span class="string">".OGA"</span>)</span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"audio/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"video/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">7</span>).SequenceEqual(PDF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/pdf"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">16</span>).SequenceEqual(PNG))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/png"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">7</span>).SequenceEqual(RAR))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-rar-compressed"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(SWF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-shockwave-flash"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(TIFF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/tiff"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">11</span>).SequenceEqual(TORRENT))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-bittorrent"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">5</span>).SequenceEqual(TTF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-font-ttf"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(WAV_AVI))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".AVI"</span> ? <span class="string">"video/x-msvideo"</span> : <span class="string">"audio/x-wav"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">16</span>).SequenceEqual(WMV_WMA))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".WMA"</span> ? <span class="string">"audio/x-ms-wma"</span> : <span class="string">"video/x-ms-wmv"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(ZIP_DOCX))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".DOCX"</span> ? <span class="string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span> : <span class="string">"application/x-zip-compressed"</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mime;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>资料：<br><a target="_blank" rel="noopener" href="https://github.com/Muraad/Mime-Detective">Mime-Detective</a></p>
<p>文件签名表格：<br><a target="_blank" rel="noopener" href="https://www.garykessler.net/library/file_sigs.html">GCK’S FILE SIGNATURES TABLE</a></p>
<p>参考资料：<br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Magic_number_%28programming%29#In_files">Magic number</a><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_file_signatures">List of file signatures</a></p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/21/Markdown%E8%AF%AD%E6%B3%95%E9%80%9F%E6%9F%A5%E8%A1%A8/"><img class="fill" src="/images/default.jpeg" alt="Markdown语法速查表"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-21T02:31:02.000Z" title="2021/10/21 上午10:31:02">2021-10-21</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:44.236Z" title="2022/2/23 下午5:21:44">2022-02-23</time>更新</span><span class="level-item">2 分钟读完 (大约308个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/Markdown%E8%AF%AD%E6%B3%95%E9%80%9F%E6%9F%A5%E8%A1%A8/">Markdown语法速查表</a></h1><div class="content"><span id="more"></span>
<h2 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h2><p>此 Markdown 语法速查表提供了所有 Markdown 语法元素的快速参考。但是此速查表无法涵盖所有极限用法，因此，如果您需要某些语法元素的详细信息，请参阅我们的 <a href="/basic-syntax">basic syntax</a>  和 <a href="/extended-syntax">extended syntax</a> 手册。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>这些是 John Gruber 的原始设计文档中列出的元素。所有 Markdown 应用程序都支持这些元素。</p>
<table class="table table-bordered">
  <thead class="thead-light">
    <tr>
      <th>元素</th>
      <th>Markdown 语法</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/basic-syntax/#headings">Heading</a></td>
      <td>
        <code># H1<br>## H2<br>### H3</code>
        </td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#bold">Bold</a></td>
      <td><code>**bold text**</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#italic">Italic</a></td>
      <td><code>*italicized text*</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#blockquotes-1">Blockquote</a></td>
      <td><code>&gt; blockquote</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#ordered-lists">Ordered List</a></td>
      <td><code>
        1. First item<br>
        2. Second item<br>
        3. Third item<br>
      </code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#unordered-lists">Unordered List</a></td>
      <td>
        <code>
          - First item<br>
          - Second item<br>
          - Third item<br>
        </code>
      </td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#code">Code</a></td>
      <td><code>`code`</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#horizontal-rules">Horizontal Rule</a></td>
      <td><code>---</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#links">Link</a></td>
      <td><code>[title](https://www.example.com)</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#images-1">Image</a></td>
      <td><code>![alt text](image.jpg)</code></td>
    </tr>
  </tbody>
</table>

<h2 id="扩展语法"><a href="#扩展语法" class="headerlink" title="扩展语法"></a>扩展语法</h2><p>这些元素通过添加额外的功能扩展了基本语法。但是，并非所有 Markdown 应用程序都支持这些元素。</p>
<table class="table table-bordered">
  <thead class="thead-light">
    <tr>
      <th>Element</th>
      <th>Markdown Syntax</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/extended-syntax/#tables">Table</a></td>
      <td><code>| Syntax      | Description |<br>
                | ----------- | ----------- |<br>
                | Header      | Title       |<br>
                | Paragraph   | Text        |
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#fenced-code-blocks">Fenced Code Block</a></td>
      <td><code>```<br>
      {<br>
      &nbsp;&nbsp;"firstName": "John",<br>
      &nbsp;&nbsp;"lastName": "Smith",<br>
      &nbsp;&nbsp;"age": 25<br>
      }<br>
      ```
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#footnotes">Footnote</a></td>
      <td><code>
        Here's a sentence with a footnote. [^1]<br><br>
        [^1]: This is the footnote.
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#heading-ids">Heading ID</a></td>
      <td><code>### My Great Heading </code></td></tr></tbody></table></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/"><img class="fill" src="/images/default.jpeg" alt="sql server 中的数组和列表（转载）"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-21T01:39:08.000Z" title="2021/10/21 上午9:39:08">2021-10-21</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:51.377Z" title="2022/2/23 下午5:21:51">2022-02-23</time>更新</span><span class="level-item">7 分钟读完 (大约984个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/">sql server 中的数组和列表（转载）</a></h1><div class="content"><span id="more"></span>

<blockquote>
<p>转载自：<a target="_blank" rel="noopener" href="https://www.sommarskog.se/arrays-in-sql.html">Arrays and Lists in SQL Server-The Short Version</a></p>
</blockquote>
<h3 id="原文摘录"><a href="#原文摘录" class="headerlink" title="原文摘录"></a>原文摘录</h3><p><strong>Two Simple Multi-Statement Functions</strong><br>If you search the web, there is no end of functions to split strings into table format. Here, I will present two simple functions that run on SQL 2008 or later, one for a list of integers and one for a list of strings. I should immediately warn you that these functions are not the most efficient and therefore not suitable if you have long lists with thousands of elements. But they are perfectly adequate if you are passing the contents of a multi-choice checkbox from a client where you would rarely have as many as 50 elements.</p>
<p>I opted to share these functions because they are simple and you can easily adapt them if you want different behaviour with regards to the choices that I have made. In my long article, I describe methods that are faster, but they all require extra setup than just a function.</p>
<p>Below is a function to split a delimited list of integers. The function accepts a parameter for the delimiter which can be up to 10 characters long. The function returns the list positions for the elements. An empty element is returned as NULL. If there is a non-numeric value in the list, there will be a conversion error.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       n       <span class="type">int</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (n)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="keyword">convert</span>(<span class="type">int</span>, <span class="built_in">nullif</span>(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>), <span class="string">''</span>)))</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>You are likely to be puzzled by the COLLATE clause. This is a small speed booster. By forcing a binary collation, we avoid that SQL Server employs the full Unicode rules when searching for the delimiter. This pays off when scanning long strings. Why Czech? The language does not matter here, so I just picked one with a short name.</p>
<p>And why datalength divided by 2 and not len? datalength returns the length in bytes, whence the division. len does not count trailing spaces, so it does not work if the delimiter is a space.</p>
<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3, 677,7 , ,-1'</span>, <span class="string">','</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1&lt;-&gt;2&lt;-&gt;3&lt;-&gt; 677&lt;-&gt;7&lt;-&gt;&lt;-&gt;-1'</span>, <span class="string">'&lt;-&gt;'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Since the values are the same in both lists, the output is the same:</p>
<table>
<thead>
<tr>
<th align="center">listpos</th>
<th align="center">n</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">677</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">-1</td>
</tr>
</tbody></table>
<p>Here is an example of how you would use it in a simple query:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  col <span class="keyword">IN</span> (<span class="keyword">SELECT</span> n <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3,4'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>If you find that you are only using comma-separated lists, you may grow tired of having to specify the delimiter every time. To that end, this wrapper can be handy:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlisttotbl (<span class="variable">@list</span> nvarchar(MAX)) <span class="keyword">RETURNS</span> <span class="keyword">TABLE</span> <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">RETURN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> listpos, n <span class="keyword">FROM</span> intlist_to_tbl(<span class="variable">@list</span>, <span class="string">','</span>)</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>I leave it as an exercise to the reader to come up with a better name.</p>
<p>Here is a function for a list of strings. It accepts an input parameter of the type nvarchar(MAX), but the return table has both a varchar and an nvarchar column. I will return to why in a second. Like intlist_to_tbl it returns the list position. It trims leading and trailing spaces. In difference to intlist_to_tbl, empty elements are returned as empty strings and not as NULL.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> strlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       str     <span class="type">varchar</span>(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">                       nstr    nvarchar(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@nstr</span>      nvarchar(<span class="number">4000</span>),</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nstr</span> <span class="operator">=</span> ltrim(rtrim(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>)))</span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (str, nstr)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="variable">@nstr</span>, <span class="variable">@nstr</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'Alpha (α) | Beta (β)|Gamma (γ)|Delta (δ)|'</span>, <span class="string">'|'</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'a///b///c///v///x'</span>, <span class="string">'///'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Here is the output:</p>
<p>listpos   |  str   |     nstr<br>|:–:|:–:|:–:|<br>1    |      Alpha (a)| Alpha (α)<br>2    |      Beta (ß) | Beta (β)<br>3    |      Gamma (?)| Gamma (γ)<br>4    |      Delta (d)| Delta (δ)<br>5     |              |   |</p>
<p>listpos   |  str   |     nstr<br>|:–:|:–:|:–:|<br>1      |    a     |    a<br>2      |    b     |    b<br>3      |    c     |    c<br>4      |    v     |    v<br>5      |    x     |    x</p>
<p>Note in the first result set that the Greek characters has been replaced by fallback characters in the str column. They are unchanged in the nstr column. (If you have a Greek or a UTF-8 collation, the two columns will be identical, though.)</p>
<p>Here are two examples of using this function:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  varcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> str <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  nvarcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> nstr <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>These examples illustrate why there are two columns. If you are going to use the list against a varchar column, you need to use the str column. This is important because of the type-conversion rules in SQL Server. If you mistakenly compare varcharcol to nstr, varcharcol will be converted to nvarchar, and this can render any index on varcharcol ineligible for the query, leading to a performance disaster as the table must be scanned. And conversely, if you have an nvarchar column, you need to compare it to the nvarchar value, since else the result can be incorrect because of the character replacement with the conversion to varchar.</p>
<p>I like to point out that these functions are by no means cast in stone, but see them as suggestions. Feel free to modify them according to your preferences and needs.</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="MongoDb初识"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-01T07:51:01.000Z" title="2021/9/1 下午3:51:01">2021-09-01</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:39.882Z" title="2022/2/23 下午5:21:39">2022-02-23</time>更新</span><span class="level-item">4 分钟读完 (大约607个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/">MongoDb初识</a></h1><div class="content"><span id="more"></span>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html">https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html</a></p>
<p>MongoDb 命令查询所有数据库列表</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></tbody></table></figure>

<p>如果想查看当前连接在哪个数据库下面，可以直接输入db<br>db</p>
<p>切换到test数据库下面<br>use test</p>
<p>想查看test下有哪些表或者叫collection，可以输入<br>show collections</p>
<p>想知道mongodb支持哪些命令，可以直接输入help<br>help</p>
<p>想知道当前数据库支持哪些方法<br>db.help();</p>
<p>想知道当前数据库下的表或者表collection支持哪些方法，可以使用以下命令<br>db.user.help();  user为表名</p>
<p>根据条件查找数据<br>通过条件查询： db.foo.find( { x : 77 } , { name : 1 , x : 1 } )  </p>
<ol>
<li><p>超级用户相关：  </p>
<pre><code>  #增加或修改用户密码  

  db.addUser('admin','pwd')  

  #查看用户列表  

  db.system.users.find()  

  #用户认证  

  db.auth('admin','pwd')  

  #删除用户  

  db.removeUser('mongodb')  
</code></pre>
<p>#查看所有用户  </p>
<pre><code>  show users  

  #查看所有数据库  

  show dbs  

  #查看所有的collection  

  show collections  

  #查看各collection的状态  

  db.printCollectionStats()  

  #查看主从复制状态  

  db.printReplicationInfo()  

  #修复数据库  

  db.repairDatabase()  

  #设置记录profiling，0=off 1=slow 2=all  

  db.setProfilingLevel(1)  

  #查看profiling  
 show profile  

  #拷贝数据库  

  db.copyDatabase('mail_addr','mail_addr_tmp')  

  #删除collection  

  db.mail_addr.drop()  

  #删除当前的数据库  

  db.dropDatabase()  
</code></pre>
<ol start="2">
<li><p>客户端连接  </p>
<pre><code>/usr/local/mongodb/bin/mongo user_addr -u user -p 'pwd'  
</code></pre>
</li>
<li><p>增删改  </p>
<pre><code> #存储嵌套的对象  

db.foo.save({'name':'ysz','address':{'city':'beijing','post':100096},'phone':[138,139]})  

#存储数组对象  

db.user_addr.save({'Uid':'yushunzhi@sohu.com','Al':['test-1@sohu.com','test-2@sohu.com']})  

#根据query条件修改，如果不存在则插入，允许修改多条记录  
</code></pre>
<p>db.foo.update({‘yy’:5},{‘$set’:{‘xx’:2}},upsert=true,multi=true)  </p>
<pre><code>#删除yy=5的记录  

db.foo.remove({'yy':5})  

#删除所有的记录  
</code></pre>
<p>   db.foo.remove()  </p>
</li>
<li><p>索引  </p>
<pre><code>增加索引：1(ascending),-1(descending)  

db.things.ensureIndex({firstname: 1, lastname: 1}, {unique: true});  

#索引子对象  

db.user_addr.ensureIndex({'Al.Em': 1})  

#查看索引信息  

db.deliver_status.getIndexes()  

db.deliver_status.getIndexKeys()  

#根据索引名删除索引  
</code></pre>
<p>db.user_addr.dropIndex(‘Al.Em_1’)  </p>
</li>
<li><p>查询  </p>
<pre><code>查找所有  

db.foo.find()  

#查找一条记录  

db.foo.findOne()  

#根据条件检索10条记录  

db.foo.find({'msg':'Hello 1'}).limit(10)  

#sort排序  

db.deliver_status.find({'From':'yushunzhi@sohu.com'}).sort({'Dt',-1})  

db.deliver_status.find().sort({'Ct':-1}).limit(1)  
</code></pre>
<p>   #count操作  </p>
<p>   db.user_addr.count()  </p>
<p>   #distinct操作  </p>
<p>   db.foo.distinct(‘msg’)<br>#&gt;操作  </p>
<p>   db.foo.find({“timestamp”: {“$gte” : 2}})  </p>
<p>   #子对象的查找  </p>
<p>   db.foo.find({‘address.city’:’beijing’})  </p>
</li>
<li><p>管理  </p>
<pre><code>查看collection数据的大小  

db.deliver_status.dataSize()  

#查看colleciont状态  

db.deliver_status.stats()  

#查询所有索引的大小  

db.deliver_status.totalIndexSize()
</code></pre>
</li>
</ol>
</li>
</ol>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/14/Dockerfile%E7%AC%94%E8%AE%B0/"><img class="fill" src="/images/default.jpeg" alt="Dockerfile笔记"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-14T04:52:12.000Z" title="2021/8/14 下午12:52:12">2021-08-14</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:30.124Z" title="2022/2/23 下午5:21:30">2022-02-23</time>更新</span><span class="level-item">几秒读完 (大约1个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/14/Dockerfile%E7%AC%94%E8%AE%B0/">Dockerfile笔记</a></h1><div class="content"><span id="more"></span></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/14/yapi-docker%E9%83%A8%E7%BD%B2/"><img class="fill" src="/images/default.jpeg" alt="yapi-docker部署"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-14T04:50:09.000Z" title="2021/8/14 下午12:50:09">2021-08-14</time>发表</span><span class="level-item"><time dateTime="2022-04-01T05:46:45.418Z" title="2022/4/1 下午1:46:45">2022-04-01</time>更新</span><span class="level-item">1 分钟读完 (大约218个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/14/yapi-docker%E9%83%A8%E7%BD%B2/">yapi-docker部署</a></h1><div class="content"><span id="more"></span>

<p>填坑<br>docker images生成部署时。发现docker-entrypoint.sh没有初始化数据库，只有<a target="_blank" rel="noopener" href="https://github.com/MyHerux/code-note/blob/master/Program/%E5%B7%A5%E5%85%B7%E7%AF%87/Yapi/docker-entrypoint.sh#L32">运行代码</a>，没有添加初始化命令：</p>
<blockquote>
<p>npm run install-server //安装程序，初始化数据库索引和管理员账号，管理员账号名可在 config.json 配置`</p>
</blockquote>
<p>补救措施：</p>
<figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-4-16-centos /]# docker exec -it 2e43588c8b1f bash</span><br><span class="line">root@2e43588c8b1f:/# node api/vendors/server/install.js                      </span><br><span class="line">(node:65) DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.</span><br><span class="line">log: mongodb load success...</span><br><span class="line">初始化管理员账号成功,账号名："xxxxx@gmail.com"，密码："ymfe.org"</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><code>config.json</code>内容如下：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line"><span class="attr">"port"</span><span class="punctuation">:</span> <span class="string">"3000"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"adminAccount"</span><span class="punctuation">:</span> <span class="string">"admin@admin.com"</span><span class="punctuation">,</span><span class="comment">//yapi管理员账号</span></span><br><span class="line">  <span class="attr">"timeout"</span><span class="punctuation">:</span><span class="number">120000</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"db"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"servername"</span><span class="punctuation">:</span> <span class="string">"192.168.0.1"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"DATABASE"</span><span class="punctuation">:</span> <span class="string">"yapi"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"port"</span><span class="punctuation">:</span> <span class="number">27017</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"user"</span><span class="punctuation">:</span> <span class="string">"yapi"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"pass"</span><span class="punctuation">:</span> <span class="string">"123456"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"authSource"</span><span class="punctuation">:</span> <span class="string">""</span></span><br><span class="line">  <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>

</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/13/docker%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="docker初识"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-13T15:17:18.000Z" title="2021/8/13 下午11:17:18">2021-08-13</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:18:25.261Z" title="2022/2/23 下午5:18:25">2022-02-23</time>更新</span><span class="level-item">1 分钟读完 (大约202个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/13/docker%E5%88%9D%E8%AF%86/">docker初识</a></h1><div class="content"><span id="more"></span>

<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>容器与镜像的关系类似于面向对象编程中的对象与类。</p>
<table>
<thead>
<tr>
<th>Docker</th>
<th>面向对象</th>
</tr>
</thead>
<tbody><tr>
<td>容器</td>
<td>对象</td>
</tr>
<tr>
<td>镜像</td>
<td>类</td>
</tr>
</tbody></table>
<p><img src="docker1.png" alt="容器与镜像的关系"></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>参考：<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/ubuntu-docker-install.html">Ubuntu Docker 安装</a></p>
<h2 id="docker命令"><a href="#docker命令" class="headerlink" title="docker命令"></a>docker命令</h2><p>列出docker的命令帮助，在<code>docker xx </code>后面 加上 <code>--help</code>  可以查看具体的命令用法和参数注解</p>
<figure class="highlight shell"><figcaption><span>cmd-help.sh</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --help</span><br></pre></td></tr></tbody></table></figure>

<h2 id="创建镜像"><a href="#创建镜像" class="headerlink" title="创建镜像"></a>创建镜像</h2><p>列出所有镜像：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -a</span><br></pre></td></tr></tbody></table></figure>

<p>获取一个新的ubuntu 13.10版本镜像</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:13.10</span><br></pre></td></tr></tbody></table></figure>

<p>查找centos镜像</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search centos</span><br></pre></td></tr></tbody></table></figure>

<p>删除ubuntu镜像</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi ubuntu</span><br></pre></td></tr></tbody></table></figure>

<p>创建镜像<br>1、从已经创建的容器中更新镜像，并且提交这个镜像<br>2、使用 Dockerfile 指令来创建一个新的镜像</p>
<h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/03/kettle%E5%A1%AB%E5%9D%91/"><img class="fill" src="/images/default.jpeg" alt="kettle填坑"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-03T09:32:04.000Z" title="2021/8/3 下午5:32:04">2021-08-03</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:25.766Z" title="2022/2/23 下午5:21:25">2022-02-23</time>更新</span><span class="level-item">10 分钟读完 (大约1441个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/03/kettle%E5%A1%AB%E5%9D%91/">kettle填坑</a></h1><div class="content"><span id="more"></span>

<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>为了将MSSqlserver数据传输至MySql数据库，一开始的选择有很多,类似<code>DataX</code>、<code>ES</code>，但是碍于运行环境是windows server 2012,且服务器环境不方便更改，查阅一番后，决定使用kettle进行数据的同步。</p>
<ul>
<li>环境<ul>
<li>系统：windows server 2012R2  64位</li>
<li>内存：8GB</li>
<li>JDK：1.8</li>
</ul>
</li>
</ul>
<h2 id="kettle配置统一参数"><a href="#kettle配置统一参数" class="headerlink" title="kettle配置统一参数"></a>kettle配置统一参数</h2><p>一、kettle的常用配置文件说明：</p>
<ul>
<li><p><code>${user.home}</code> 表示WINDOWS的当前用户的文档文件夹，在C:\Users文件夹下</p>
</li>
<li><p><code>${user.home}/ .kettle /repositories.xml</code>: 该文件保存了用户设置的所有资源库信息,包括资源库名称,资源库需要的数据库连接参数等。该文件中定义的资源库将显示在spoon启动后出现的选择资源库下拉列表中,注意该文件的编码是UTF-8，资源库的名称尽量使用英文。</p>
</li>
<li><p><code>${user.home}/ kettle/kettle.properties</code>: 该文件保存了转换或作业中需要的变量, spoon启动后会自动加载该文件里定义的变量。</p>
</li>
<li><p><code>${user.home}/.kettle/shared.xml</code>: 该文件里保存了共享对象,共享对象可以是Database connections, Steps,Slave servers ,Partition schemas ,Cluster schemas。对象共享实质上就是将对象序列化的过程, spoon启动时,会加载shared.xml文件中定义的所有对象。</p>
</li>
<li><p><code>lib\kettle-engine.jar\kettle-jobs.xml</code>: 该文件中定义了Spoon启动时需要加载的作业项。</p>
</li>
</ul>
<p><code>lib\kettle-engine.jarkettle-partition-plugins.xml</code>: 该文件中定义了Spoon启动时需要加载的分区插件。</p>
<ul>
<li><code>lib\kettle-engine.jar\kettle- plugins.xml</code>: 该文件中定义了Spoon启动时步骤和作业项插件的加载路径。</li>
<li><code>lib\kettle-engine.jar\kettle-steps.xml</code>: 该文件中定义了Spoon启动时需要加载的转换步骤。</li>
</ul>
<p>二、修改repositories.xml的位置</p>
<p>找到kettle所在文件夹下的Spoon.bat 文件,在里面查找出Kettle home所在的代码段,在 <code>cd %KETTLE_DIR%</code>代码上一行加上代码：<code>set KETTLE_HOME=D:/AAA/BBB/CCC</code></p>
<ul>
<li>如上，表示把文件重新等位到D:/AAA/BBB/CCC这个文件夹下。(注意:文件夹的斜杠和WINDOWS的目录斜杠是反的）</li>
<li>复制 <code>${user.home}</code> 文件夹下的 .kettle 文件夹到D:/AAA/BBB/CCC目录下。</li>
<li>启动kettle程序。</li>
</ul>
<p>参考：<br>  <a target="_blank" rel="noopener" href="https://www.cnblogs.com/lsy-blogs/p/8268318.html">Kettle日常使用汇总整理</a><br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/xiezhongkai08/article/details/71244528">Kettle使用统一的数据库配置</a><br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/ZZQHELLO2018/article/details/99693263">kettle学习笔记10—配置文件的使用</a><br>  <a target="_blank" rel="noopener" href="https://www.pianshen.com/article/63971845790/">Kettle环境配置-kettle.properties</a><br>部份配置:<br><img src="config.jpg" alt="部份配置"></p>
<h2 id="kettle配置作业、转换"><a href="#kettle配置作业、转换" class="headerlink" title="kettle配置作业、转换"></a>kettle配置作业、转换</h2><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013468915/article/details/82629260">Kettle—使用手册</a></p>
<p>在配置完成后,执行作业的方式有两种：</p>
<ul>
<li><strong>使用spoon.bat打开UI程序进行执行</strong><ul>
<li>优点：作业执行很稳定，不会异常退出。</li>
<li>缺点：吃内存，配置不高的服务器可能压力大。懂不懂1GB起步。😓</li>
</ul>
</li>
<li><strong>使用Kitchen.bat脚本执行作业</strong><ul>
<li>优点：可以结合windows的任务执行计划程序进行定时启动作业，占用内存少，完成后自动退出。</li>
<li>缺点：一些耗时长的任务会有闪退的情况，或者数据量太大，执行时只取了一部分，会造成数据丢失。</li>
</ul>
</li>
</ul>
<h3 id="配置重抽作业的逻辑"><a href="#配置重抽作业的逻辑" class="headerlink" title="配置重抽作业的逻辑"></a>配置重抽作业的逻辑</h3><p>初始化时在作业里设置开始时间、结束时间变量值，执行转换前判断变量值，未到时间点，执行转换。执行一次转换后，更新变量，循环判断，实现重抽的需求。<br>作业流程配置:</p>
<p><img src="job.jpg" alt="重抽作业流程"><br>转换流程配置：</p>
<p><img src="trans.jpg" alt="数据转换流程"></p>
<p>更新时间变量JavaScript代码：</p>
<figure class="highlight javascript"><figcaption><span>updatetime.js</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Script here</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//var st =getVariable("StTime",'2021-01-01')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//var end =getVariable("End",'2021-7-27')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Alert("st:"+st+"end:"+end)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stDate =<span class="title class_">StTime</span>;<span class="comment">// str2date(st,'yyyy-MM-dd')</span></span><br><span class="line"><span class="keyword">var</span> endDate =<span class="title class_">End</span>;<span class="comment">// str2date(end,'yyyy-MM-dd')</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(stDate==<span class="literal">null</span>|| endDate==<span class="literal">null</span>) {</span><br><span class="line">  <span class="comment">//Alert("error")</span></span><br><span class="line">   <span class="literal">false</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">var</span> diff = <span class="title function_">dateDiff</span>(stDate,endDate,<span class="string">'d'</span>)</span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span>(diff&gt;=<span class="number">1</span>){</span><br><span class="line">  <span class="keyword">var</span> nextDate =<span class="title function_">dateAdd</span>(stDate,<span class="string">'d'</span>,<span class="number">1</span>);</span><br><span class="line">  <span class="comment">//Alert("next:"+nextDate)</span></span><br><span class="line">  <span class="keyword">var</span> strDate=<span class="title function_">date2str</span>(stDate,<span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line">  <span class="keyword">var</span> strNextDate = <span class="title function_">date2str</span>(nextDate,<span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//setVariable("StTime",strNextDate,‘p’)</span></span><br><span class="line">  <span class="comment">//Alert("开始时间:"+strDate+"结束时间:"+strNextDate)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="定时启动无界面kettle任务"><a href="#定时启动无界面kettle任务" class="headerlink" title="定时启动无界面kettle任务"></a>定时启动无界面kettle任务</h3><p>使用CMD脚本+windows任务计划程序实现定时启动作业执行。<strong>耗时在2小时以内的作业可以使用脚本方式，执行时间长的作业最好使用spoon窗口程序执行，不会存在执行一半退出的情况。</strong><br><strong>bat文件保存要按ANSI编码进行保存</strong></p>
<figure class="highlight bash"><figcaption><span>Task.bat</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@REM @<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">@REM <span class="keyword">if</span> <span class="string">"%1"</span> == <span class="string">"h"</span> goto begin</span><br><span class="line">@REM mshta vbscript:createobject(<span class="string">"wscript.shell"</span>).run(<span class="string">"%~nx0 h"</span>,0)(window.close)&amp;&amp;<span class="built_in">exit</span></span><br><span class="line">@REM :begin</span><br><span class="line"></span><br><span class="line">:: Kitchen.bat所在路径盘符?</span><br><span class="line">D:</span><br><span class="line">:: Kitchen.bat所在目录? ? ?</span><br><span class="line"><span class="built_in">cd</span> D:\PDI\data-integration\</span><br><span class="line"></span><br><span class="line">:: 作业（job）文件路径和日志文件路径</span><br><span class="line">:: 执行kitchen执行job，并写入日志</span><br><span class="line">Kitchen.bat /file:F:\pdi-ce-9.1.0.0-324\WorkSpace\测试.kjb /level:Base &gt;F:\pdi-ce-9.1.0.0-324\Log</span><br></pre></td></tr></tbody></table></figure>

<p>Kitchen.bat参数详细说明：<a target="_blank" rel="noopener" href="https://help.hitachivantara.com/Documentation/Pentaho/9.1/Products/Use_Command_Line_Tools_to_Run_Transformations_and_Jobs">https://help.hitachivantara.com/Documentation/Pentaho/9.1/Products/Use_Command_Line_Tools_to_Run_Transformations_and_Jobs</a></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.staroon.dev/2018/07/18/KettleDoc-1/">Kettle系列教程-第一章</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/shuaishuai1234/article/details/103005023">kettle-数据同步比较数据（删除更新）</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22310551/article/details/115163517">Kettle之定时运行Job</a><br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904021824634893">kettle教程—kettle作业调度，根据更新时间增量更新</a><br><a target="_blank" rel="noopener" href="https://ask.hellobi.com/blog/hql15/5038">Kettle实现循环增量抽取数据</a><br><a target="_blank" rel="noopener" href="https://help.pentaho.com/Documentation/8.1/Products/Data_Integration/PDI_Client">Learn About the PDI Client (Spoon)-官方文档</a><br><a target="_blank" rel="noopener" href="https://help.hitachivantara.com/Documentation/Pentaho/9.1/Products/Use_Command_Line_Tools_to_Run_Transformations_and_Jobs">Use Command Line Tools to Run Transformations and Jobs</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/2/">上一页</a></div><div class="pagination-next"><a href="/page/4/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link is-current" href="/page/3/">3</a></li><li><a class="pagination-link" href="/page/4/">4</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/8/">8</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Blog/"><span class="level-start"><span class="level-item">Blog</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Technology/"><span class="level-start"><span class="level-item">Technology</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/VUE/"><span class="level-start"><span class="level-item">VUE</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/cranky/"><span class="level-start"><span class="level-item">cranky</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/node/"><span class="level-start"><span class="level-item">node</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/other/"><span class="level-start"><span class="level-item">other</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%BD%AC%E8%BD%BD/"><span class="level-start"><span class="level-item">转载</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-27T01:52:29.000Z">2022-05-27</time></p><p class="title"><a href="/2022/05/27/Redis%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Redis常用命令</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-26T08:29:58.000Z">2022-05-26</time></p><p class="title"><a href="/2022/05/26/EFCore%E5%88%9D%E8%AF%86%E3%80%90%E4%B8%80%E3%80%91/">EFCore初识【一】</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-26T02:31:10.000Z">2022-05-26</time></p><p class="title"><a href="/2022/05/26/Git%E5%88%9D%E8%AF%86/">Git初识【一】</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-12T04:41:15.000Z">2022-05-12</time></p><p class="title"><a href="/2022/05/12/%E4%BD%BF%E7%94%A8WorkerServices%E5%92%8C-NETCore3-1%E6%9E%84%E5%BB%BAWindows%E6%9C%8D%E5%8A%A1/">使用WorkerServices和.NETCore3.1构建Windows服务</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-09T09:02:33.000Z">2022-05-09</time></p><p class="title"><a href="/2022/05/09/v2ray-shadowsocks%E9%83%A8%E7%BD%B2Ubuntu/">v2ray部署Ubuntu18.0</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">九月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">三月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ADO-NET/"><span class="tag">ADO.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-NET/"><span class="tag">ASP.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-Net-MVC/"><span class="tag">ASP.Net MVC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C#</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gmail/"><span class="tag">Gmail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mail/"><span class="tag">Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Markdown/"><span class="tag">Markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Oracle/"><span class="tag">Oracle</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Postman/"><span class="tag">Postman</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQLlite/"><span class="tag">SQLlite</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/System-Net-Mail/"><span class="tag">System.Net.Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Technology/"><span class="tag">Technology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML/"><span class="tag">XML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emoji/"><span class="tag">emoji</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kettle/"><span class="tag">kettle</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live2d/"><span class="tag">live2d</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shadowsocks/"><span class="tag">shadowsocks</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlserver/"><span class="tag">sqlserver</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/v2ray/"><span class="tag">v2ray</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmess/"><span class="tag">vmess</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"><span class="tag">发送邮件</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%90%E6%A7%BD/"><span class="tag">吐槽</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"><span class="tag">命令行</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%84%9F%E6%83%B3/"><span class="tag">感想</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%88%90%E9%95%BF/"><span class="tag">成长</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%99%E8%82%B2/"><span class="tag">教育</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%AD%BB%E9%94%81/"><span class="tag">死锁</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%B0%E5%BD%95/"><span class="tag">记录</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B4%9F%E8%83%BD%E9%87%8F/"><span class="tag">负能量</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AC%E8%BD%BD/"><span class="tag">转载</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7/"><span class="tag">软件版本号</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/"><span class="tag">速查表</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81/"><span class="tag">邮件发送</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%85%8D%E7%BD%AE/"><span class="tag">配置</span><span class="tag">2</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Choose C</a><p class="is-size-7"><span>&copy; 2022 zhang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>