<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>ä¸çŸ¥é€‰å•¥å°±é€‰C</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Choose C"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Choose C"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="ä¸€ä¸ªè®°å½•ç”Ÿæ´»çš„Blog"><meta property="og:type" content="blog"><meta property="og:title" content="ä¸çŸ¥é€‰å•¥å°±é€‰C"><meta property="og:url" content="http://yoursite.com/"><meta property="og:site_name" content="ä¸çŸ¥é€‰å•¥å°±é€‰C"><meta property="og:description" content="ä¸€ä¸ªè®°å½•ç”Ÿæ´»çš„Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://yoursite.com/img/og_image.png"><meta property="article:author" content="zhang"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://yoursite.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com"},"headline":"ä¸çŸ¥é€‰å•¥å°±é€‰C","image":["http://yoursite.com/img/og_image.png"],"author":{"@type":"Person","name":"zhang"},"publisher":{"@type":"Organization","name":"ä¸çŸ¥é€‰å•¥å°±é€‰C","logo":{"@type":"ImageObject","url":{"text":"Choose C"}}},"description":"ä¸€ä¸ªè®°å½•ç”Ÿæ´»çš„Blog"}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Choose C</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/archives">å½’æ¡£</a><a class="navbar-item" href="/categories">åˆ†ç±»</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/categories/Technology">æŠ€æœ¯</a><a class="navbar-item" href="/other">æ ‘æ´</a><a class="navbar-item" href="/about">å…³äº</a></div><div class="navbar-end"><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/"><img class="fill" src="/images/default.jpeg" alt="sql server ä¸­çš„æ•°ç»„å’Œåˆ—è¡¨ï¼ˆè½¬è½½ï¼‰"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-21T01:39:08.000Z" title="2021/10/21 ä¸Šåˆ9:39:08">2021-10-21</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-02-23T09:21:51.377Z" title="2022/2/23 ä¸‹åˆ5:21:51">2022-02-23</time>æ›´æ–°</span><span class="level-item">7 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦984ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/">sql server ä¸­çš„æ•°ç»„å’Œåˆ—è¡¨ï¼ˆè½¬è½½ï¼‰</a></h1><div class="content"><span id="more"></span>

<blockquote>
<p>è½¬è½½è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.sommarskog.se/arrays-in-sql.html">Arrays and Lists in SQL Server-The Short Version</a></p>
</blockquote>
<h3 id="åŸæ–‡æ‘˜å½•"><a href="#åŸæ–‡æ‘˜å½•" class="headerlink" title="åŸæ–‡æ‘˜å½•"></a>åŸæ–‡æ‘˜å½•</h3><p><strong>Two Simple Multi-Statement Functions</strong><br>If you search the web, there is no end of functions to split strings into table format. Here, I will present two simple functions that run on SQL 2008 or later, one for a list of integers and one for a list of strings. I should immediately warn you that these functions are not the most efficient and therefore not suitable if you have long lists with thousands of elements. But they are perfectly adequate if you are passing the contents of a multi-choice checkbox from a client where you would rarely have as many as 50 elements.</p>
<p>I opted to share these functions because they are simple and you can easily adapt them if you want different behaviour with regards to the choices that I have made. In my long article, I describe methods that are faster, but they all require extra setup than just a function.</p>
<p>Below is a function to split a delimited list of integers. The function accepts a parameter for the delimiter which can be up to 10 characters long. The function returns the list positions for the elements. An empty element is returned as NULL. If there is a non-numeric value in the list, there will be a conversion error.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       n       <span class="type">int</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (n)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="keyword">convert</span>(<span class="type">int</span>, <span class="built_in">nullif</span>(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>), <span class="string">''</span>)))</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>You are likely to be puzzled by the COLLATE clause. This is a small speed booster. By forcing a binary collation, we avoid that SQL Server employs the full Unicode rules when searching for the delimiter. This pays off when scanning long strings. Why Czech? The language does not matter here, so I just picked one with a short name.</p>
<p>And why datalength divided by 2 and not len? datalength returns the length in bytes, whence the division. len does not count trailing spaces, so it does not work if the delimiter is a space.</p>
<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3, 677,7 , ,-1'</span>, <span class="string">','</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1&lt;-&gt;2&lt;-&gt;3&lt;-&gt; 677&lt;-&gt;7&lt;-&gt;&lt;-&gt;-1'</span>, <span class="string">'&lt;-&gt;'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Since the values are the same in both lists, the output is the same:</p>
<table>
<thead>
<tr>
<th align="center">listpos</th>
<th align="center">n</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">677</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">-1</td>
</tr>
</tbody></table>
<p>Here is an example of how you would use it in a simple query:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  col <span class="keyword">IN</span> (<span class="keyword">SELECT</span> n <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3,4'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>If you find that you are only using comma-separated lists, you may grow tired of having to specify the delimiter every time. To that end, this wrapper can be handy:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlisttotbl (<span class="variable">@list</span> nvarchar(MAX)) <span class="keyword">RETURNS</span> <span class="keyword">TABLE</span> <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">RETURN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> listpos, n <span class="keyword">FROM</span> intlist_to_tbl(<span class="variable">@list</span>, <span class="string">','</span>)</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>I leave it as an exercise to the reader to come up with a better name.</p>
<p>Here is a function for a list of strings. It accepts an input parameter of the type nvarchar(MAX), but the return table has both a varchar and an nvarchar column. I will return to why in a second. Like intlist_to_tbl it returns the list position. It trims leading and trailing spaces. In difference to intlist_to_tbl, empty elements are returned as empty strings and not as NULL.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> strlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       str     <span class="type">varchar</span>(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">                       nstr    nvarchar(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@nstr</span>      nvarchar(<span class="number">4000</span>),</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nstr</span> <span class="operator">=</span> ltrim(rtrim(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>)))</span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (str, nstr)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="variable">@nstr</span>, <span class="variable">@nstr</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'Alpha (Î±) | Beta (Î²)|Gamma (Î³)|Delta (Î´)|'</span>, <span class="string">'|'</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'a///b///c///v///x'</span>, <span class="string">'///'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Here is the output:</p>
<p>listpos   |  str   |     nstr<br>|:â€“:|:â€“:|:â€“:|<br>1    |      Alpha (a)| Alpha (Î±)<br>2    |      Beta (ÃŸ) | Beta (Î²)<br>3    |      Gamma (?)| Gamma (Î³)<br>4    |      Delta (d)| Delta (Î´)<br>5     |              |   |</p>
<p>listpos   |  str   |     nstr<br>|:â€“:|:â€“:|:â€“:|<br>1      |    a     |    a<br>2      |    b     |    b<br>3      |    c     |    c<br>4      |    v     |    v<br>5      |    x     |    x</p>
<p>Note in the first result set that the Greek characters has been replaced by fallback characters in the str column. They are unchanged in the nstr column. (If you have a Greek or a UTF-8 collation, the two columns will be identical, though.)</p>
<p>Here are two examples of using this function:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  varcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> str <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  nvarcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> nstr <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>These examples illustrate why there are two columns. If you are going to use the list against a varchar column, you need to use the str column. This is important because of the type-conversion rules in SQL Server. If you mistakenly compare varcharcol to nstr, varcharcol will be converted to nvarchar, and this can render any index on varcharcol ineligible for the query, leading to a performance disaster as the table must be scanned. And conversely, if you have an nvarchar column, you need to compare it to the nvarchar value, since else the result can be incorrect because of the character replacement with the conversion to varchar.</p>
<p>I like to point out that these functions are by no means cast in stone, but see them as suggestions. Feel free to modify them according to your preferences and needs.</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="MongoDbåˆè¯†"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-01T07:51:01.000Z" title="2021/9/1 ä¸‹åˆ3:51:01">2021-09-01</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-02-23T09:21:39.882Z" title="2022/2/23 ä¸‹åˆ5:21:39">2022-02-23</time>æ›´æ–°</span><span class="level-item">4 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦607ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/">MongoDbåˆè¯†</a></h1><div class="content"><span id="more"></span>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html">https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html</a></p>
<p>MongoDb å‘½ä»¤æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“åˆ—è¡¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœæƒ³æŸ¥çœ‹å½“å‰è¿æ¥åœ¨å“ªä¸ªæ•°æ®åº“ä¸‹é¢ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥db<br>db</p>
<p>åˆ‡æ¢åˆ°testæ•°æ®åº“ä¸‹é¢<br>use test</p>
<p>æƒ³æŸ¥çœ‹testä¸‹æœ‰å“ªäº›è¡¨æˆ–è€…å«collectionï¼Œå¯ä»¥è¾“å…¥<br>show collections</p>
<p>æƒ³çŸ¥é“mongodbæ”¯æŒå“ªäº›å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥help<br>help</p>
<p>æƒ³çŸ¥é“å½“å‰æ•°æ®åº“æ”¯æŒå“ªäº›æ–¹æ³•<br>db.help();</p>
<p>æƒ³çŸ¥é“å½“å‰æ•°æ®åº“ä¸‹çš„è¡¨æˆ–è€…è¡¨collectionæ”¯æŒå“ªäº›æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤<br>db.user.help();  userä¸ºè¡¨å</p>
<p>æ ¹æ®æ¡ä»¶æŸ¥æ‰¾æ•°æ®<br>é€šè¿‡æ¡ä»¶æŸ¥è¯¢ï¼š db.foo.find( { x : 77 } , { name : 1 , x : 1 } )  </p>
<ol>
<li><p>è¶…çº§ç”¨æˆ·ç›¸å…³ï¼š  </p>
<pre><code>  #å¢åŠ æˆ–ä¿®æ”¹ç”¨æˆ·å¯†ç   

  db.addUser('admin','pwd')  

  #æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨  

  db.system.users.find()  

  #ç”¨æˆ·è®¤è¯  

  db.auth('admin','pwd')  

  #åˆ é™¤ç”¨æˆ·  

  db.removeUser('mongodb')  
</code></pre>
<p>#æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·  </p>
<pre><code>  show users  

  #æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“  

  show dbs  

  #æŸ¥çœ‹æ‰€æœ‰çš„collection  

  show collections  

  #æŸ¥çœ‹å„collectionçš„çŠ¶æ€  

  db.printCollectionStats()  

  #æŸ¥çœ‹ä¸»ä»å¤åˆ¶çŠ¶æ€  

  db.printReplicationInfo()  

  #ä¿®å¤æ•°æ®åº“  

  db.repairDatabase()  

  #è®¾ç½®è®°å½•profilingï¼Œ0=off 1=slow 2=all  

  db.setProfilingLevel(1)  

  #æŸ¥çœ‹profiling  
 show profile  

  #æ‹·è´æ•°æ®åº“  

  db.copyDatabase('mail_addr','mail_addr_tmp')  

  #åˆ é™¤collection  

  db.mail_addr.drop()  

  #åˆ é™¤å½“å‰çš„æ•°æ®åº“  

  db.dropDatabase()  
</code></pre>
<ol start="2">
<li><p>å®¢æˆ·ç«¯è¿æ¥  </p>
<pre><code>/usr/local/mongodb/bin/mongo user_addr -u user -p 'pwd'  
</code></pre>
</li>
<li><p>å¢åˆ æ”¹  </p>
<pre><code> #å­˜å‚¨åµŒå¥—çš„å¯¹è±¡  

db.foo.save({'name':'ysz','address':{'city':'beijing','post':100096},'phone':[138,139]})  

#å­˜å‚¨æ•°ç»„å¯¹è±¡  

db.user_addr.save({'Uid':'yushunzhi@sohu.com','Al':['test-1@sohu.com','test-2@sohu.com']})  

#æ ¹æ®queryæ¡ä»¶ä¿®æ”¹ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œå…è®¸ä¿®æ”¹å¤šæ¡è®°å½•  
</code></pre>
<p>db.foo.update({â€˜yyâ€™:5},{â€˜$setâ€™:{â€˜xxâ€™:2}},upsert=true,multi=true)  </p>
<pre><code>#åˆ é™¤yy=5çš„è®°å½•  

db.foo.remove({'yy':5})  

#åˆ é™¤æ‰€æœ‰çš„è®°å½•  
</code></pre>
<p>   db.foo.remove()  </p>
</li>
<li><p>ç´¢å¼•  </p>
<pre><code>å¢åŠ ç´¢å¼•ï¼š1(ascending),-1(descending)  

db.things.ensureIndex({firstname: 1, lastname: 1}, {unique: true});  

#ç´¢å¼•å­å¯¹è±¡  

db.user_addr.ensureIndex({'Al.Em': 1})  

#æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯  

db.deliver_status.getIndexes()  

db.deliver_status.getIndexKeys()  

#æ ¹æ®ç´¢å¼•ååˆ é™¤ç´¢å¼•  
</code></pre>
<p>db.user_addr.dropIndex(â€˜Al.Em_1â€™)  </p>
</li>
<li><p>æŸ¥è¯¢  </p>
<pre><code>æŸ¥æ‰¾æ‰€æœ‰  

db.foo.find()  

#æŸ¥æ‰¾ä¸€æ¡è®°å½•  

db.foo.findOne()  

#æ ¹æ®æ¡ä»¶æ£€ç´¢10æ¡è®°å½•  

db.foo.find({'msg':'Hello 1'}).limit(10)  

#sortæ’åº  

db.deliver_status.find({'From':'yushunzhi@sohu.com'}).sort({'Dt',-1})  

db.deliver_status.find().sort({'Ct':-1}).limit(1)  
</code></pre>
<p>   #countæ“ä½œ  </p>
<p>   db.user_addr.count()  </p>
<p>   #distinctæ“ä½œ  </p>
<p>   db.foo.distinct(â€˜msgâ€™)<br>#&gt;æ“ä½œ  </p>
<p>   db.foo.find({â€œtimestampâ€: {â€œ$gteâ€ : 2}})  </p>
<p>   #å­å¯¹è±¡çš„æŸ¥æ‰¾  </p>
<p>   db.foo.find({â€˜address.cityâ€™:â€™beijingâ€™})  </p>
</li>
<li><p>ç®¡ç†  </p>
<pre><code>æŸ¥çœ‹collectionæ•°æ®çš„å¤§å°  

db.deliver_status.dataSize()  

#æŸ¥çœ‹colleciontçŠ¶æ€  

db.deliver_status.stats()  

#æŸ¥è¯¢æ‰€æœ‰ç´¢å¼•çš„å¤§å°  

db.deliver_status.totalIndexSize()
</code></pre>
</li>
</ol>
</li>
</ol>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/14/Dockerfile%E7%AC%94%E8%AE%B0/"><img class="fill" src="/images/default.jpeg" alt="Dockerfileç¬”è®°"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-14T04:52:12.000Z" title="2021/8/14 ä¸‹åˆ12:52:12">2021-08-14</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-02-23T09:21:30.124Z" title="2022/2/23 ä¸‹åˆ5:21:30">2022-02-23</time>æ›´æ–°</span><span class="level-item">å‡ ç§’è¯»å®Œ (å¤§çº¦1ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/14/Dockerfile%E7%AC%94%E8%AE%B0/">Dockerfileç¬”è®°</a></h1><div class="content"><span id="more"></span></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/14/yapi-docker%E9%83%A8%E7%BD%B2/"><img class="fill" src="/images/default.jpeg" alt="yapi-dockeréƒ¨ç½²"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-14T04:50:09.000Z" title="2021/8/14 ä¸‹åˆ12:50:09">2021-08-14</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-04-01T05:46:45.418Z" title="2022/4/1 ä¸‹åˆ1:46:45">2022-04-01</time>æ›´æ–°</span><span class="level-item">1 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦218ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/14/yapi-docker%E9%83%A8%E7%BD%B2/">yapi-dockeréƒ¨ç½²</a></h1><div class="content"><span id="more"></span>

<p>å¡«å‘<br>docker imagesç”Ÿæˆéƒ¨ç½²æ—¶ã€‚å‘ç°docker-entrypoint.shæ²¡æœ‰åˆå§‹åŒ–æ•°æ®åº“ï¼Œåªæœ‰<a target="_blank" rel="noopener" href="https://github.com/MyHerux/code-note/blob/master/Program/%E5%B7%A5%E5%85%B7%E7%AF%87/Yapi/docker-entrypoint.sh#L32">è¿è¡Œä»£ç </a>ï¼Œæ²¡æœ‰æ·»åŠ åˆå§‹åŒ–å‘½ä»¤ï¼š</p>
<blockquote>
<p>npm run install-server //å®‰è£…ç¨‹åºï¼Œåˆå§‹åŒ–æ•°æ®åº“ç´¢å¼•å’Œç®¡ç†å‘˜è´¦å·ï¼Œç®¡ç†å‘˜è´¦å·åå¯åœ¨ config.json é…ç½®`</p>
</blockquote>
<p>è¡¥æ•‘æªæ–½ï¼š</p>
<figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-4-16-centos /]# docker exec -it 2e43588c8b1f bash</span><br><span class="line">root@2e43588c8b1f:/# node api/vendors/server/install.js                      </span><br><span class="line">(node:65) DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.</span><br><span class="line">log: mongodb load success...</span><br><span class="line">åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·æˆåŠŸ,è´¦å·åï¼š"xxxxx@gmail.com"ï¼Œå¯†ç ï¼š"ymfe.org"</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><code>config.json</code>å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line"><span class="attr">"port"</span>: <span class="string">"3000"</span>,</span><br><span class="line">  <span class="attr">"adminAccount"</span>: <span class="string">"admin@admin.com"</span>,<span class="comment">//yapiç®¡ç†å‘˜è´¦å·</span></span><br><span class="line">  <span class="attr">"timeout"</span>:<span class="number">120000</span>,</span><br><span class="line">  <span class="attr">"db"</span>: {</span><br><span class="line">    <span class="attr">"servername"</span>: <span class="string">"192.168.0.1"</span>,</span><br><span class="line">    <span class="attr">"DATABASE"</span>: <span class="string">"yapi"</span>,</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">27017</span>,</span><br><span class="line">    <span class="attr">"user"</span>: <span class="string">"yapi"</span>,</span><br><span class="line">    <span class="attr">"pass"</span>: <span class="string">"123456"</span>,</span><br><span class="line">    <span class="attr">"authSource"</span>: <span class="string">""</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/13/docker%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="dockeråˆè¯†"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-13T15:17:18.000Z" title="2021/8/13 ä¸‹åˆ11:17:18">2021-08-13</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-05-28T03:06:33.191Z" title="2022/5/28 ä¸Šåˆ11:06:33">2022-05-28</time>æ›´æ–°</span><span class="level-item">8 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1193ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/13/docker%E5%88%9D%E8%AF%86/">dockeråˆè¯†</a></h1><div class="content"><span id="more"></span>

<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>å®¹å™¨ä¸é•œåƒçš„å…³ç³»ç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„å¯¹è±¡ä¸ç±»ã€‚</p>
<table>
<thead>
<tr>
<th>Docker</th>
<th>é¢å‘å¯¹è±¡</th>
</tr>
</thead>
<tbody><tr>
<td>å®¹å™¨</td>
<td>å¯¹è±¡</td>
</tr>
<tr>
<td>é•œåƒ</td>
<td>ç±»</td>
</tr>
</tbody></table>
<p><img src="docker1.png" alt="å®¹å™¨ä¸é•œåƒçš„å…³ç³»"></p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/ubuntu-docker-install.html">Ubuntu Docker å®‰è£…</a></p>
<h2 id="dockerå‘½ä»¤"><a href="#dockerå‘½ä»¤" class="headerlink" title="dockerå‘½ä»¤"></a>dockerå‘½ä»¤</h2><p>åˆ—å‡ºdockerçš„å‘½ä»¤å¸®åŠ©ï¼Œåœ¨<code>docker xx </code>åé¢ åŠ ä¸Š <code>--help</code>  å¯ä»¥æŸ¥çœ‹å…·ä½“çš„å‘½ä»¤ç”¨æ³•å’Œå‚æ•°æ³¨è§£</p>
<figure class="highlight shell"><figcaption><span>cmd-help.sh</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --help</span><br></pre></td></tr></tbody></table></figure>

<h2 id="åˆ›å»ºé•œåƒ"><a href="#åˆ›å»ºé•œåƒ" class="headerlink" title="åˆ›å»ºé•œåƒ"></a>åˆ›å»ºé•œåƒ</h2><p>åˆ—å‡ºæ‰€æœ‰é•œåƒï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -a</span><br></pre></td></tr></tbody></table></figure>

<p>è·å–ä¸€ä¸ªæ–°çš„ubuntu 13.10ç‰ˆæœ¬é•œåƒ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:13.10</span><br></pre></td></tr></tbody></table></figure>

<p>æŸ¥æ‰¾centosé•œåƒ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search centos</span><br></pre></td></tr></tbody></table></figure>

<p>åˆ é™¤ubuntué•œåƒ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi ubuntu</span><br></pre></td></tr></tbody></table></figure>

<p>åˆ›å»ºé•œåƒ<br>1ã€ä»å·²ç»åˆ›å»ºçš„å®¹å™¨ä¸­æ›´æ–°é•œåƒï¼Œå¹¶ä¸”æäº¤è¿™ä¸ªé•œåƒ<br>2ã€ä½¿ç”¨ Dockerfile æŒ‡ä»¤æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ</p>
<h2 id="åˆ›å»ºå®¹å™¨"><a href="#åˆ›å»ºå®¹å™¨" class="headerlink" title="åˆ›å»ºå®¹å™¨"></a>åˆ›å»ºå®¹å™¨</h2><h3 id="å®¹å™¨ç®¡ç†å‘½ä»¤"><a href="#å®¹å™¨ç®¡ç†å‘½ä»¤" class="headerlink" title="å®¹å™¨ç®¡ç†å‘½ä»¤"></a>å®¹å™¨ç®¡ç†å‘½ä»¤</h3><table>
<thead>
<tr>
<th align="left">code</th>
<th align="left">æ“ä½œ</th>
<th align="left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker ps</code></td>
<td align="left">æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker ps -s -a</code></td>
<td align="left">æŸ¥çœ‹å½“å‰æ‰€æœ‰å®¹å™¨</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker stop å®¹å™¨åç§°</code></td>
<td align="left">åœæ­¢å®¹å™¨</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker restart å®¹å™¨åç§°</code></td>
<td align="left">é‡å¯å®¹å™¨</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker kill å®¹å™¨åç§°</code></td>
<td align="left">æ€æ­»å®¹å™¨</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker rm -f é•œåƒIDæˆ–è€…é•œåƒå</code></td>
<td align="left">åˆ é™¤å·²ç»åœæ­¢çš„å®¹å™¨</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></td>
<td align="left">è¿è¡Œå®¹å™¨</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>docker run --name mynginx -d nginx:latest</code></td>
<td align="left">ä½¿ç”¨dockeré•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨å‘½åä¸ºmynginxã€‚</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>OPTIONSè¯´æ˜ï¼š<ul>
<li>-a stdin: æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›</li>
<li>-d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</li>
<li>-i: ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</li>
<li>-P: éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„ç«¯å£</li>
<li>-p: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£</li>
<li>-t: ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›</li>
<li>â€“name=â€nginx-lbâ€: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›</li>
<li>â€“dns 8.8.8.8: æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</li>
<li>â€“dns-search example.com: æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</li>
<li>-h â€œmarsâ€: æŒ‡å®šå®¹å™¨çš„hostnameï¼›</li>
<li>-e username=â€ritchieâ€: è®¾ç½®ç¯å¢ƒå˜é‡ï¼›</li>
<li>â€“env-file=[]: ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›</li>
<li>â€“cpuset=â€0-2â€ or â€“cpuset=â€0,1,2â€: ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼›</li>
<li>-m :è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›</li>
<li>â€“net=â€bridgeâ€: æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼›</li>
<li>â€“link=[]: æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›</li>
<li>â€“expose=[]: å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›</li>
<li>â€“volume , -v: ç»‘å®šä¸€ä¸ªå·</li>
</ul>
</li>
</ul>
</blockquote>
<hr>
<h4 id="example"><a href="#example" class="headerlink" title="example"></a>example</h4><p>è¿è¡Œä¸€ä¸ªæ–°å®¹å™¨ï¼Œæ˜ å°„è‡³5600ç«¯å£ï¼ŒæŒ‚è½½ç›®å½•</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit -v $PWD/ql/config:/ql/config -v $PWD/ql/log:/ql/log -v $PWD/ql/db:/ql/db -v $PWD/ql/repo:/ql/repo -v $PWD/ql/raw:/ql/raw -v $PWD/ql/scripts:/ql/scripts -v $PWD/ql/jbot:/ql/jbot -p 5600:5600 --name qinglong --hostname qinglong --restart always whyour/qinglong:latest</span><br></pre></td></tr></tbody></table></figure>

<h4 id="æ‘˜å½•"><a href="#æ‘˜å½•" class="headerlink" title="æ‘˜å½•"></a>æ‘˜å½•</h4><p>dockeré•œåƒç®¡ç†å‘½ä»¤<br>æŸ¥çœ‹æœ¬åœ°é•œåƒ</p>
<p>docker images #æŸ¥çœ‹å½“å‰æœºå™¨çš„æ‰€æœ‰é•œåƒ</p>
<p>docker images â€“q # æŸ¥çœ‹æ‰€ç”¨é•œåƒçš„id</p>
<p>docker search é•œåƒåç§° #æœç´¢é•œåƒï¼Œç½‘ç»œä¸­æŸ¥æ‰¾éœ€è¦çš„é•œåƒ</p>
<p>docker pull é•œåƒåç§° #ä»Dockerä»“åº“æ‹‰å–é•œåƒï¼Œåç§°:ç‰ˆæœ¬å·</p>
<p>docker push é•œåƒåç§° #æ¨é€é•œåƒ</p>
<p>docker rmi é•œåƒåç§°/é•œåƒid #åˆ é™¤æœ¬åœ°æœºå™¨çš„é•œåƒ</p>
<p>docker rmi docker images -q # åˆ é™¤æ‰€æœ‰æœ¬åœ°é•œåƒ</p>
<p>docker tag é•œåƒåç§°:tag é•œåƒåç§°:tag #ä¸ºä¸€ä¸ªé•œåƒæ‰“tag</p>
<p>docker save {image_name} &gt; {new_image_name}.tar #é•œåƒæ‰“åŒ…æˆä¸€ä¸ªtaråŒ…</p>
<p>docker load &lt; {image_name}.tar #è§£å‹ä¸€ä¸ªé•œåƒtaråŒ…</p>
<p>dockeræŸ¥çœ‹æ—¥å¿—ä¿¡æ¯<br>docker logs -f å®¹ï¨¸åç§° #æŸ¥çœ‹å®¹ï¨¸æ—¥å¿—</p>
<p>docker info #æŸ¥çœ‹dockeræœåŠ¡çš„ä¿¡æ¯</p>
<p>docker inspect å®¹ï¨¸åç§° # è·å–é•œåƒçš„å…ƒä¿¡æ¯ï¼Œè¯¦ç»†ä¿¡æ¯</p>
<p>ä¸å®¹å™¨äº¤äº’çš„å‘½ä»¤<br>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨<br>docker exec -it å®¹å™¨IDæˆ–è€…å®¹å™¨å /bin/bash</p>
<p>execçš„æ„æ€æ˜¯åœ¨å®¹ï¨¸ä¸­è¿è¡Œâ¼€ä¸ªå‘½ä»¤ã€‚ /bin/bashæ˜¯å›ºæœ‰å†™æ³•ï¼Œä½œç”¨æ˜¯å› ä¸ºdockeråå°å¿…é¡»è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå¦åˆ™å®¹å™¨å°±ä¼šé€€å‡ºï¼Œåœ¨è¿™é‡Œè¡¨ç¤ºå¯åŠ¨å®¹å™¨åå¯åŠ¨ bashã€‚</p>
<p>é€€å‡ºå®¹å™¨<br>exit #é€€å‡ºä¹Ÿå…³é—­å®¹å™¨;</p>
<p>Ctrl+P+Q #é€€å‡ºä¸å…³é—­å®¹å™¨</p>
<p>åˆ›å»ºå¯åŠ¨å®¹å™¨æ—¶ï¼Œä½¿ç”¨â€“vå‚æ•°è®¾ç½®æ•°æ®å·<br>docker run â€¦ â€“v å®¿ä¸»æœºç›®å½•/æ–‡ä»¶:å®¹å™¨å†…ç›®å½•/æ–‡ä»¶</p>
<p>æ•°æ®å·å®¿ä¸»æœºçš„ä¸€ä¸ªç›®å½•æˆ–æ–‡ä»¶</p>
<p>ç›®å½•å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</p>
<p>å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»º</p>
<p>å¯ä»¥æŒ‚è½½å¤šä¸ªæ•°æ®å·</p>
<p>æ‹·è´æ–‡ä»¶<br>docker cp ä¸»æœºæ–‡ä»¶è·¯å¾„ å®¹å™¨IDæˆ–å®¹å™¨å:å®¹å™¨è·¯å¾„ #å®¿ä¸»æœºæ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­</p>
<p>docker cp å®¹å™¨IDæˆ–å®¹å™¨å:å®¹å™¨è·¯å¾„ ä¸»æœºæ–‡ä»¶è·¯å¾„ #å®¹å™¨æ–‡ä»¶æ‹·è´åˆ°å®¿ä¸»æœºä¸­</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/03/kettle%E5%A1%AB%E5%9D%91/"><img class="fill" src="/images/default.jpeg" alt="kettleå¡«å‘"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-03T09:32:04.000Z" title="2021/8/3 ä¸‹åˆ5:32:04">2021-08-03</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-07-28T01:19:49.097Z" title="2022/7/28 ä¸Šåˆ9:19:49">2022-07-28</time>æ›´æ–°</span><span class="level-item">10 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1450ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/03/kettle%E5%A1%AB%E5%9D%91/">kettleå¡«å‘</a></h1><div class="content"><span id="more"></span>

<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>ä¸ºäº†å°†MSSqlserveræ•°æ®ä¼ è¾“è‡³MySqlæ•°æ®åº“ï¼Œä¸€å¼€å§‹çš„é€‰æ‹©æœ‰å¾ˆå¤š,ç±»ä¼¼<code>DataX</code>ã€<code>ES</code>ï¼Œä½†æ˜¯ç¢äºè¿è¡Œç¯å¢ƒæ˜¯windows server 2012,ä¸”æœåŠ¡å™¨ç¯å¢ƒä¸æ–¹ä¾¿æ›´æ”¹ï¼ŒæŸ¥é˜…ä¸€ç•ªåï¼Œå†³å®šä½¿ç”¨kettleè¿›è¡Œæ•°æ®çš„åŒæ­¥ã€‚</p>
<ul>
<li>ç¯å¢ƒ<ul>
<li>ç³»ç»Ÿï¼šwindows server 2012R2  64ä½</li>
<li>å†…å­˜ï¼š8GB</li>
<li>JDKï¼š1.8</li>
</ul>
</li>
</ul>
<h2 id="kettleé…ç½®ç»Ÿä¸€å‚æ•°"><a href="#kettleé…ç½®ç»Ÿä¸€å‚æ•°" class="headerlink" title="kettleé…ç½®ç»Ÿä¸€å‚æ•°"></a>kettleé…ç½®ç»Ÿä¸€å‚æ•°</h2><p>ä¸€ã€kettleçš„å¸¸ç”¨é…ç½®æ–‡ä»¶è¯´æ˜ï¼š</p>
<ul>
<li><p><code>${user.home}</code> è¡¨ç¤ºWINDOWSçš„å½“å‰ç”¨æˆ·çš„æ–‡æ¡£æ–‡ä»¶å¤¹ï¼Œåœ¨C:\Usersæ–‡ä»¶å¤¹ä¸‹</p>
</li>
<li><p><code>${user.home}/ .kettle /repositories.xml</code>: è¯¥æ–‡ä»¶ä¿å­˜äº†ç”¨æˆ·è®¾ç½®çš„æ‰€æœ‰èµ„æºåº“ä¿¡æ¯,åŒ…æ‹¬èµ„æºåº“åç§°,èµ„æºåº“éœ€è¦çš„æ•°æ®åº“è¿æ¥å‚æ•°ç­‰ã€‚è¯¥æ–‡ä»¶ä¸­å®šä¹‰çš„èµ„æºåº“å°†æ˜¾ç¤ºåœ¨spoonå¯åŠ¨åå‡ºç°çš„é€‰æ‹©èµ„æºåº“ä¸‹æ‹‰åˆ—è¡¨ä¸­,æ³¨æ„è¯¥æ–‡ä»¶çš„ç¼–ç æ˜¯UTF-8ï¼Œèµ„æºåº“çš„åç§°å°½é‡ä½¿ç”¨è‹±æ–‡ã€‚</p>
</li>
<li><p><code>${user.home}/ kettle/kettle.properties</code>: è¯¥æ–‡ä»¶ä¿å­˜äº†è½¬æ¢æˆ–ä½œä¸šä¸­éœ€è¦çš„å˜é‡, spoonå¯åŠ¨åä¼šè‡ªåŠ¨åŠ è½½è¯¥æ–‡ä»¶é‡Œå®šä¹‰çš„å˜é‡ã€‚</p>
</li>
<li><p><code>${user.home}/.kettle/shared.xml</code>: è¯¥æ–‡ä»¶é‡Œä¿å­˜äº†å…±äº«å¯¹è±¡,å…±äº«å¯¹è±¡å¯ä»¥æ˜¯Database connections, Steps,Slave servers ,Partition schemas ,Cluster schemasã€‚å¯¹è±¡å…±äº«å®è´¨ä¸Šå°±æ˜¯å°†å¯¹è±¡åºåˆ—åŒ–çš„è¿‡ç¨‹, spoonå¯åŠ¨æ—¶,ä¼šåŠ è½½shared.xmlæ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰å¯¹è±¡ã€‚</p>
</li>
<li><p><code>lib\kettle-engine.jar\kettle-jobs.xml</code>: è¯¥æ–‡ä»¶ä¸­å®šä¹‰äº†Spoonå¯åŠ¨æ—¶éœ€è¦åŠ è½½çš„ä½œä¸šé¡¹ã€‚</p>
</li>
</ul>
<p><code>lib\kettle-engine.jarkettle-partition-plugins.xml</code>: è¯¥æ–‡ä»¶ä¸­å®šä¹‰äº†Spoonå¯åŠ¨æ—¶éœ€è¦åŠ è½½çš„åˆ†åŒºæ’ä»¶ã€‚</p>
<ul>
<li><code>lib\kettle-engine.jar\kettle- plugins.xml</code>: è¯¥æ–‡ä»¶ä¸­å®šä¹‰äº†Spoonå¯åŠ¨æ—¶æ­¥éª¤å’Œä½œä¸šé¡¹æ’ä»¶çš„åŠ è½½è·¯å¾„ã€‚</li>
<li><code>lib\kettle-engine.jar\kettle-steps.xml</code>: è¯¥æ–‡ä»¶ä¸­å®šä¹‰äº†Spoonå¯åŠ¨æ—¶éœ€è¦åŠ è½½çš„è½¬æ¢æ­¥éª¤ã€‚</li>
</ul>
<p>äºŒã€ä¿®æ”¹repositories.xmlçš„ä½ç½®</p>
<p>æ‰¾åˆ°kettleæ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹çš„Spoon.bat æ–‡ä»¶,åœ¨é‡Œé¢æŸ¥æ‰¾å‡ºKettle homeæ‰€åœ¨çš„ä»£ç æ®µ,åœ¨ <code>cd %KETTLE_DIR%</code>ä»£ç ä¸Šä¸€è¡ŒåŠ ä¸Šä»£ç ï¼š<code>set KETTLE_HOME=D:/AAA/BBB/CCC</code></p>
<ul>
<li>å¦‚ä¸Šï¼Œè¡¨ç¤ºæŠŠæ–‡ä»¶é‡æ–°ç­‰ä½åˆ°D:/AAA/BBB/CCCè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚(æ³¨æ„:æ–‡ä»¶å¤¹çš„æ–œæ å’ŒWINDOWSçš„ç›®å½•æ–œæ æ˜¯åçš„ï¼‰</li>
<li>å¤åˆ¶ <code>${user.home}</code> æ–‡ä»¶å¤¹ä¸‹çš„ .kettle æ–‡ä»¶å¤¹åˆ°D:/AAA/BBB/CCCç›®å½•ä¸‹ã€‚</li>
<li>å¯åŠ¨kettleç¨‹åºã€‚</li>
</ul>
<p>å‚è€ƒï¼š<br>  <a target="_blank" rel="noopener" href="https://www.cnblogs.com/lsy-blogs/p/8268318.html">Kettleæ—¥å¸¸ä½¿ç”¨æ±‡æ€»æ•´ç†</a><br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/xiezhongkai08/article/details/71244528">Kettleä½¿ç”¨ç»Ÿä¸€çš„æ•°æ®åº“é…ç½®</a><br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/ZZQHELLO2018/article/details/99693263">kettleå­¦ä¹ ç¬”è®°10â€”é…ç½®æ–‡ä»¶çš„ä½¿ç”¨</a><br>  <a target="_blank" rel="noopener" href="https://www.pianshen.com/article/63971845790/">Kettleç¯å¢ƒé…ç½®-kettle.properties</a><br>éƒ¨ä»½é…ç½®:<br><img src="config.jpg" alt="éƒ¨ä»½é…ç½®"></p>
<h2 id="kettleé…ç½®ä½œä¸šã€è½¬æ¢"><a href="#kettleé…ç½®ä½œä¸šã€è½¬æ¢" class="headerlink" title="kettleé…ç½®ä½œä¸šã€è½¬æ¢"></a>kettleé…ç½®ä½œä¸šã€è½¬æ¢</h2><p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013468915/article/details/82629260">Kettleâ€”ä½¿ç”¨æ‰‹å†Œ</a></p>
<p>åœ¨é…ç½®å®Œæˆå,æ‰§è¡Œä½œä¸šçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨spoon.batæ‰“å¼€UIç¨‹åºè¿›è¡Œæ‰§è¡Œ</strong><ul>
<li>ä¼˜ç‚¹ï¼šä½œä¸šæ‰§è¡Œå¾ˆç¨³å®šï¼Œä¸ä¼šå¼‚å¸¸é€€å‡ºã€‚</li>
<li>ç¼ºç‚¹ï¼šåƒå†…å­˜ï¼Œé…ç½®ä¸é«˜çš„æœåŠ¡å™¨å¯èƒ½å‹åŠ›å¤§ã€‚æ‡‚ä¸æ‡‚1GBèµ·æ­¥ã€‚ğŸ˜“</li>
</ul>
</li>
<li><strong>ä½¿ç”¨Kitchen.batè„šæœ¬æ‰§è¡Œä½œä¸š</strong><ul>
<li>ä¼˜ç‚¹ï¼šå¯ä»¥ç»“åˆwindowsçš„ä»»åŠ¡æ‰§è¡Œè®¡åˆ’ç¨‹åºè¿›è¡Œå®šæ—¶å¯åŠ¨ä½œä¸šï¼Œå ç”¨å†…å­˜å°‘ï¼Œå®Œæˆåè‡ªåŠ¨é€€å‡ºã€‚</li>
<li>ç¼ºç‚¹ï¼šä¸€äº›è€—æ—¶é•¿çš„ä»»åŠ¡ä¼šæœ‰é—ªé€€çš„æƒ…å†µï¼Œæˆ–è€…æ•°æ®é‡å¤ªå¤§ï¼Œæ‰§è¡Œæ—¶åªå–äº†ä¸€éƒ¨åˆ†ï¼Œä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚</li>
</ul>
</li>
</ul>
<h3 id="é…ç½®é‡æŠ½ä½œä¸šçš„é€»è¾‘"><a href="#é…ç½®é‡æŠ½ä½œä¸šçš„é€»è¾‘" class="headerlink" title="é…ç½®é‡æŠ½ä½œä¸šçš„é€»è¾‘"></a>é…ç½®é‡æŠ½ä½œä¸šçš„é€»è¾‘</h3><p>åˆå§‹åŒ–æ—¶åœ¨ä½œä¸šé‡Œè®¾ç½®å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´å˜é‡å€¼ï¼Œæ‰§è¡Œè½¬æ¢å‰åˆ¤æ–­å˜é‡å€¼ï¼Œæœªåˆ°æ—¶é—´ç‚¹ï¼Œæ‰§è¡Œè½¬æ¢ã€‚æ‰§è¡Œä¸€æ¬¡è½¬æ¢åï¼Œæ›´æ–°å˜é‡ï¼Œå¾ªç¯åˆ¤æ–­ï¼Œå®ç°é‡æŠ½çš„éœ€æ±‚ã€‚<br>ä½œä¸šæµç¨‹é…ç½®:</p>
<p><img src="job.jpg" alt="é‡æŠ½ä½œä¸šæµç¨‹"><br>è½¬æ¢æµç¨‹é…ç½®ï¼š</p>
<p><img src="trans.jpg" alt="æ•°æ®è½¬æ¢æµç¨‹"></p>
<p>æ›´æ–°æ—¶é—´å˜é‡JavaScriptä»£ç ï¼š</p>
<figure class="highlight javascript"><figcaption><span>updatetime.js</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Script here</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//var st =getVariable("StTime",'2021-01-01')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//var end =getVariable("End",'2021-7-27')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Alert("st:"+st+"end:"+end)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stDate =StTime;<span class="comment">// str2date(st,'yyyy-MM-dd')</span></span><br><span class="line"><span class="keyword">var</span> endDate =End;<span class="comment">// str2date(end,'yyyy-MM-dd')</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(stDate==<span class="literal">null</span>|| endDate==<span class="literal">null</span>) {</span><br><span class="line">  <span class="comment">//Alert("error")</span></span><br><span class="line">   <span class="literal">false</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">var</span> diff = dateDiff(stDate,endDate,<span class="string">'d'</span>)</span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span>(diff&gt;=<span class="number">1</span>){</span><br><span class="line">  <span class="keyword">var</span> nextDate =dateAdd(stDate,<span class="string">'d'</span>,<span class="number">1</span>);</span><br><span class="line">  <span class="comment">//Alert("next:"+nextDate)</span></span><br><span class="line">  <span class="keyword">var</span> strDate=date2str(stDate,<span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line">  <span class="keyword">var</span> strNextDate = date2str(nextDate,<span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//setVariable("StTime",strNextDate,â€˜pâ€™)</span></span><br><span class="line">  <span class="comment">//Alert("å¼€å§‹æ—¶é—´:"+strDate+"ç»“æŸæ—¶é—´:"+strNextDate)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®šæ—¶å¯åŠ¨æ— ç•Œé¢kettleä»»åŠ¡"><a href="#å®šæ—¶å¯åŠ¨æ— ç•Œé¢kettleä»»åŠ¡" class="headerlink" title="å®šæ—¶å¯åŠ¨æ— ç•Œé¢kettleä»»åŠ¡"></a>å®šæ—¶å¯åŠ¨æ— ç•Œé¢kettleä»»åŠ¡</h3><p>ä½¿ç”¨CMDè„šæœ¬+windowsä»»åŠ¡è®¡åˆ’ç¨‹åºå®ç°å®šæ—¶å¯åŠ¨ä½œä¸šæ‰§è¡Œã€‚<strong>è€—æ—¶åœ¨2å°æ—¶ä»¥å†…çš„ä½œä¸šå¯ä»¥ä½¿ç”¨è„šæœ¬æ–¹å¼ï¼Œæ‰§è¡Œæ—¶é—´é•¿çš„ä½œä¸šæœ€å¥½ä½¿ç”¨spoonçª—å£ç¨‹åºæ‰§è¡Œï¼Œä¸ä¼šå­˜åœ¨æ‰§è¡Œä¸€åŠé€€å‡ºçš„æƒ…å†µã€‚</strong><br><strong>batæ–‡ä»¶ä¿å­˜è¦æŒ‰ANSIç¼–ç è¿›è¡Œä¿å­˜</strong></p>
<figure class="highlight bash"><figcaption><span>Task.bat</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@REM @<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">@REM <span class="keyword">if</span> <span class="string">"%1"</span> == <span class="string">"h"</span> goto begin</span><br><span class="line">@REM mshta vbscript:createobject(<span class="string">"wscript.shell"</span>).run(<span class="string">"%~nx0 h"</span>,0)(window.close)&amp;&amp;<span class="built_in">exit</span></span><br><span class="line">@REM :begin</span><br><span class="line"></span><br><span class="line">:: Kitchen.batæ‰€åœ¨è·¯å¾„ç›˜ç¬¦?</span><br><span class="line">D:</span><br><span class="line">:: Kitchen.batæ‰€åœ¨ç›®å½•? ? ?</span><br><span class="line"><span class="built_in">cd</span> D:\PDI\data-integration\</span><br><span class="line"></span><br><span class="line">:: ä½œä¸šï¼ˆjobï¼‰æ–‡ä»¶è·¯å¾„å’Œæ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br><span class="line">:: æ‰§è¡Œkitchenæ‰§è¡Œjobï¼Œå¹¶å†™å…¥æ—¥å¿—</span><br><span class="line">Kitchen.bat /file:F:\pdi-ce-9.1.0.0-324\WorkSpace\æµ‹è¯•.kjb /level:Base &gt;F:\pdi-ce-9.1.0.0-324\Log</span><br></pre></td></tr></tbody></table></figure>

<p>Kitchen.batå‚æ•°è¯¦ç»†è¯´æ˜ï¼š<a target="_blank" rel="noopener" href="https://help.hitachivantara.com/Documentation/Pentaho/9.1/Products/Use_Command_Line_Tools_to_Run_Transformations_and_Jobs">Use Command Line Tools to Run Transformations and Jobs</a></p>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a target="_blank" rel="noopener" href="https://www.staroon.dev/2018/07/18/KettleDoc-1/">Kettleç³»åˆ—æ•™ç¨‹-ç¬¬ä¸€ç« </a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/shuaishuai1234/article/details/103005023">kettle-æ•°æ®åŒæ­¥æ¯”è¾ƒæ•°æ®ï¼ˆåˆ é™¤æ›´æ–°ï¼‰</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22310551/article/details/115163517">Kettleä¹‹å®šæ—¶è¿è¡ŒJob</a><br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904021824634893">kettleæ•™ç¨‹â€”kettleä½œä¸šè°ƒåº¦ï¼Œæ ¹æ®æ›´æ–°æ—¶é—´å¢é‡æ›´æ–°</a><br><a target="_blank" rel="noopener" href="https://ask.hellobi.com/blog/hql15/5038">Kettleå®ç°å¾ªç¯å¢é‡æŠ½å–æ•°æ®</a><br><a target="_blank" rel="noopener" href="https://help.pentaho.com/Documentation/8.1/Products/Data_Integration/PDI_Client">Learn About the PDI Client (Spoon)-å®˜æ–¹æ–‡æ¡£</a><br><a target="_blank" rel="noopener" href="https://help.hitachivantara.com/Documentation/Pentaho/9.1/Products/Use_Command_Line_Tools_to_Run_Transformations_and_Jobs">Use Command Line Tools to Run Transformations and Jobs</a></p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/07/29/Kettle/"><img class="fill" src="/images/default.jpeg" alt="PDIã€Kettleã€‘ï¼ˆä¸€ï¼‰"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-29T08:39:12.000Z" title="2021/7/29 ä¸‹åˆ4:39:12">2021-07-29</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-07-28T01:17:22.675Z" title="2022/7/28 ä¸Šåˆ9:17:22">2022-07-28</time>æ›´æ–°</span><span class="level-item">36 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦5367ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/29/Kettle/">PDIã€Kettleã€‘ï¼ˆä¸€ï¼‰</a></h1><div class="content"><span id="more"></span>

<h1 id="Kettleä¸­JavaScriptå†…ç½®å‡½æ•°è¯´æ˜"><a href="#Kettleä¸­JavaScriptå†…ç½®å‡½æ•°è¯´æ˜" class="headerlink" title="Kettleä¸­JavaScriptå†…ç½®å‡½æ•°è¯´æ˜"></a>Kettleä¸­JavaScriptå†…ç½®å‡½æ•°è¯´æ˜</h1><h2 id="è½¬æ¢ç»„ä»¶-è„šæœ¬-JavaScriptã€Spoonã€‘"><a href="#è½¬æ¢ç»„ä»¶-è„šæœ¬-JavaScriptã€Spoonã€‘" class="headerlink" title="è½¬æ¢ç»„ä»¶-è„šæœ¬-JavaScriptã€Spoonã€‘"></a>è½¬æ¢ç»„ä»¶-è„šæœ¬-JavaScriptã€Spoonã€‘</h2><p>æˆ‘ä»¬åœ¨ä½¿ç”¨JavaScriptç»„ä»¶çš„æ—¶å€™,åœ¨å·¦ä¾§æ ¸å¿ƒæ ‘å¯¹è±¡æ ä¸­å¯ä»¥çœ‹åˆ°Kettleä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šç®€æ´å¼ºå¤§çš„å†…ç½®å‡½æ•°,å¸®åŠ©æˆ‘ä»¬åœ¨å†™è„šæœ¬çš„æ—¶å€™å¯¹æ•°æ®ã€å‚æ•°å˜é‡ç­‰èƒ½å¾ˆè½»æ¾çš„åšå¤„ç†,ä½“éªŒç¼–ç çš„æ„Ÿè§‰.æœ¬ç¯‡å°†è¯¦ç»†ä»‹ç»JavaScriptç»„ä»¶ä¸­çš„å‡½æ•°åŠŸèƒ½</p>
<p>è„šæœ¬ç»„ä»¶åŒ…å«çš„å‡½æ•°ä¸»è¦åŒ…æ‹¬å…­å¤§ç±»,åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²ç±»å‹çš„å‡½æ•°(String Functions)</li>
<li>æµ®ç‚¹å‹çš„å‡½æ•°(Numeric Functions)</li>
<li>æ—¥æœŸç±»å‹å‡½æ•°(Date Functions)</li>
<li>é€»è¾‘åˆ¤æ–­å‹å‡½æ•°(Logic Functions)</li>
<li>ç‰¹æ®Šçš„å‡½æ•°(Special Functions)</li>
<li>æ–‡ä»¶å¤„ç†ç±»å‡½æ•°(File Functions)</li>
</ul>
<h2 id="å­—ç¬¦ä¸²ç±»å‹å‡½æ•°-String-Functions"><a href="#å­—ç¬¦ä¸²ç±»å‹å‡½æ•°-String-Functions" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹å‡½æ•°(String Functions)"></a>å­—ç¬¦ä¸²ç±»å‹å‡½æ•°(String Functions)</h2><p>é¡¾åæ€ä¹‰,å­—ç¬¦ä¸²ç±»å‹çš„å‡½æ•°è‚¯å®šæ˜¯é’ˆå¯¹å­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°ã€å˜é‡è¿›è¡Œå¤„ç†æ“ä½œçš„å‡½æ•°</p>
<h3 id="æ—¥æœŸè½¬å­—ç¬¦ä¸²-date2str"><a href="#æ—¥æœŸè½¬å­—ç¬¦ä¸²-date2str" class="headerlink" title="æ—¥æœŸè½¬å­—ç¬¦ä¸²(date2str)"></a>æ—¥æœŸè½¬å­—ç¬¦ä¸²(<code>date2str</code>)</h3><p>æ—¥æœŸè½¬å­—ç¬¦ä¸²å‡½æ•°<code>date2str</code>ä¸»è¦æœ‰4ä¸ªæ–¹æ³•,åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><code>date2str(date)</code>:ä¼ å…¥æ—¥æœŸå®ä¾‹,è½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹</li>
<li><code>date2str(date,format)</code>:ä¼ å…¥æ—¥æœŸå’Œæ ¼å¼åŒ–å‚æ•°,è¿›è¡Œæ ¼å¼åŒ–è½¬æ¢</li>
<li><code>date2str(date,format,iso)</code>:ä¼ å…¥æ—¥æœŸå’Œå‚æ•°æ ¼å¼åŒ–åŠISOä»£ç è¿›è¡Œè½¬æ¢,(DE = German, EN = English, FR = France, â€¦)</li>
<li><code>date2str(date,format,iso,zone)</code>:ä¼ å…¥æ—¶åŒºè¿›è¡Œæ ¼å¼åŒ–,ä¾‹å¦‚åŒ—äº¬æ—¶åŒº(GMT+8)</li>
</ul>
<p>æ—¥æœŸæ ¼å¼åŒ–å‚æ•°formatå‚æ•°ç±»å‹ä¾›å‚è€ƒï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yy / yyyy - <span class="number">06</span> / <span class="number">2006</span></span><br><span class="line">MM / MMM / MMMMM - <span class="number">11</span> / Nov / November</span><br><span class="line">d / dd  - <span class="number">1</span> / <span class="number">01</span></span><br><span class="line">E / EEEE - Tue / Tuesday</span><br><span class="line">hh / HH - <span class="number">11</span> / <span class="number">23</span></span><br><span class="line">m / mm - <span class="number">5</span> / <span class="number">05</span></span><br><span class="line">s / ss - <span class="number">8</span> / <span class="number">08</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»£ç ç¤ºä¾‹:</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dValue = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">writeToLog(date2str(dValue,<span class="string">"dd.MM.yyyy"</span>));</span><br><span class="line">writeToLog(date2str(dValue,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>));</span><br><span class="line">writeToLog(date2str(dValue,<span class="string">"E.MMM.yyyy"</span>,<span class="string">"DE"</span>));</span><br><span class="line">writeToLog(date2str(dValue,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"EN"</span>));</span><br><span class="line">writeToLog(date2str(dValue,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"ZH"</span>, <span class="string">"GMT+8"</span>));</span><br><span class="line">writeToLog(date2str(dValue,<span class="string">"yyyy-MM-dd HH:mm:ss"</span>,<span class="string">"ZH"</span>, <span class="string">"GMT+8"</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šä»£ç åœ¨æ§åˆ¶å°å°†ä¼šè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:12:56 - JavaScriptä»£ç .0 - 19.08.2019</span></span><br><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:12:56 - JavaScriptä»£ç .0 - 19.08.2019 10:12:56</span></span><br><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:12:56 - JavaScriptä»£ç .0 - Mo.Aug.2019</span></span><br><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:12:56 - JavaScriptä»£ç .0 - 19.08.2019 10:12:56</span></span><br><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:12:56 - JavaScriptä»£ç .0 - 19.08.2019 10:12:56</span></span><br><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:12:56 - JavaScriptä»£ç .0 - 2019-08-19 10:12:56</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è½¬ä¹‰HTMLescapeHtml-html"><a href="#è½¬ä¹‰HTMLescapeHtml-html" class="headerlink" title="è½¬ä¹‰HTMLescapeHtml(html)"></a>è½¬ä¹‰HTML<code>escapeHtml(html)</code></h3><p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> html=<span class="string">"&lt;h1&gt;æˆ‘æ˜¯H2æ ‡é¢˜&lt;/h2&gt;"</span>;</span><br><span class="line"></span><br><span class="line">writeToLog(escapeHtml(html))</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆè¾“å‡º</p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:16:13 - JavaScriptä»£ç .0 - &amp;lt;h1&amp;gt;&amp;#25105;&amp;#26159;H2&amp;#26631;&amp;#39064;&amp;lt;/h2&amp;gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è½¬ä¹‰SQL-escapeSQL-var"><a href="#è½¬ä¹‰SQL-escapeSQL-var" class="headerlink" title="è½¬ä¹‰SQL(escapeSQL(var))"></a>è½¬ä¹‰SQL(<code>escapeSQL(var)</code>)</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"SELECT * FROM CUSTOMER WHERE NAME='"</span> + escapeSQL(<span class="string">"McHale's Navy"</span>) + <span class="string">"'"</span>;  </span><br><span class="line">writeToLog(str1)</span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥å‡½æ•°ä¼šæŠŠå•å¼•å·è½¬æˆåŒå¼•å·,è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">18</span>:<span class="number">59</span> - JavaScriptä»£ç <span class="number">.0</span> - SELECT * FROM CUSTOMER WHERE NAME=<span class="string">'McHale'</span><span class="string">'s Navy'</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ„é€ å®šé•¿å­—ç¬¦ä¸²-fillString-char-length"><a href="#æ„é€ å®šé•¿å­—ç¬¦ä¸²-fillString-char-length" class="headerlink" title="æ„é€ å®šé•¿å­—ç¬¦ä¸²(fillString(char,length))"></a>æ„é€ å®šé•¿å­—ç¬¦ä¸²(<code>fillString(char,length)</code>)</h3><p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">writeToLog(fillString(<span class="string">"x"</span>,<span class="number">10</span>));</span><br><span class="line">writeToLog(fillString(<span class="string">"A"</span>,<span class="number">3</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆä¼šè¾“å‡º10ä¸ªXå’Œ3ä¸ª<code>A</code>,è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:24:08 - JavaScriptä»£ç .0 - xxxxxxxxxx</span></span><br><span class="line"><span class="meta">2019/08/19</span> <span class="string">10:24:08 - JavaScriptä»£ç .0 - AAA</span></span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªcharç±»å‹çš„å•å­—ç¬¦,ä¸èƒ½æ˜¯å­—ç¬¦ä¸²</p>
<h3 id="ç»Ÿè®¡å­—ç¬¦ä¸²å‡ºç°é¢‘æ¬¡-getOcuranceString-str-searchStr"><a href="#ç»Ÿè®¡å­—ç¬¦ä¸²å‡ºç°é¢‘æ¬¡-getOcuranceString-str-searchStr" class="headerlink" title="ç»Ÿè®¡å­—ç¬¦ä¸²å‡ºç°é¢‘æ¬¡(getOcuranceString(str,searchStr))"></a>ç»Ÿè®¡å­—ç¬¦ä¸²å‡ºç°é¢‘æ¬¡(<code>getOcuranceString(str,searchStr)</code>)</h3><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æœç´¢çš„å®Œæ•´å­—ç¬¦ä¸²,ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦æœç´¢ç»Ÿè®¡çš„å­—ç¬¦ä¸²</p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sef=<span class="string">'2007-09-11'</span>;</span><br><span class="line"></span><br><span class="line">writeToLog(getOcuranceString(sef,<span class="string">'0'</span>))</span><br><span class="line">writeToLog(getOcuranceString(sef,<span class="string">'00'</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬åˆ†åˆ«ç»Ÿè®¡å­—ç¬¦ä¸²0å’Œ00æœ€ç»ˆå‡ºç°çš„æ¬¡æ•°,æ­¤æ—¶,æ—¥å¿—æœ€ç»ˆæ‰“å°çš„æ¬¡æ•°æ˜¯3å’Œ1ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2019/08/19 10:28:45 - JavaScriptä»£ç .0 - 3</span><br><span class="line">2019/08/19 10:28:45 - JavaScriptä»£ç .0 - 1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–å­—ç¬¦ä¸²ä¸‹æ ‡ç´¢å¼•-indexOf"><a href="#è·å–å­—ç¬¦ä¸²ä¸‹æ ‡ç´¢å¼•-indexOf" class="headerlink" title="è·å–å­—ç¬¦ä¸²ä¸‹æ ‡ç´¢å¼•(indexOf)"></a>è·å–å­—ç¬¦ä¸²ä¸‹æ ‡ç´¢å¼•(<code>indexOf</code>)</h3><p>è·å–ä¸‹æ ‡ç´¢å¼•ä¸»è¦æœ‰2ä¸ªé‡æ„å‡½æ•°,åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><code>indexOf(string,subString)</code>:è·å–å‡ºç°å­—ç¬¦ä¸²çš„ç´¢å¼•å¼€å§‹ä½ç½®</li>
<li><code>indexOf(string,subString,fromIndex)</code>ï¼›æŒ‡å®šå¼€å§‹ä½ç½®,è·å–å­—ç¬¦ä¸²ç´¢å¼•å¼€å§‹ä½ç½®</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello Pentaho!"</span>;</span><br><span class="line"><span class="keyword">var</span> str2= indexOf(str1, <span class="string">"Pentaho"</span>);</span><br><span class="line"><span class="keyword">var</span> str3= indexOf(str1, <span class="string">"o"</span>, <span class="number">7</span>);</span><br><span class="line">writeToLog(<span class="string">"Input : "</span> + str1);</span><br><span class="line">writeToLog(<span class="string">"Index of 'Pentaho' : "</span> + str2);</span><br><span class="line">writeToLog(<span class="string">"index of 'o', search from position 7 : "</span> + str3);</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">34</span>:<span class="number">16</span> - JavaScriptä»£ç <span class="number">.0</span> - Input : Hello Pentaho!</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">34</span>:<span class="number">16</span> - JavaScriptä»£ç <span class="number">.0</span> - Index of <span class="string">'Pentaho'</span> : <span class="number">6</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">34</span>:<span class="number">16</span> - JavaScriptä»£ç <span class="number">.0</span> - index of <span class="string">'o'</span>, search from position <span class="number">7</span> : <span class="number">12</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="é¦–å­—æ¯å¤§å†™-initCap"><a href="#é¦–å­—æ¯å¤§å†™-initCap" class="headerlink" title="é¦–å­—æ¯å¤§å†™(initCap)"></a>é¦–å­—æ¯å¤§å†™(<code>initCap</code>)</h3><p>å¯¹æŒ‡å®šå­—ç¬¦ä¸²é¦–å­—æ¯å¤§å†™å¤„ç†,æ¥çœ‹ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"my home"</span>;      </span><br><span class="line">writeToLog(initCap(str1));</span><br><span class="line">writeToLog(initCap(<span class="string">'test a aaa cw'</span>));</span><br><span class="line">writeToLog(initCap(<span class="string">'myhome'</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶,æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">41</span>:<span class="number">27</span> - JavaScriptä»£ç <span class="number">.0</span> - My Home</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">41</span>:<span class="number">27</span> - JavaScriptä»£ç <span class="number">.0</span> - Test A Aaa Cw</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">41</span>:<span class="number">27</span> - JavaScriptä»£ç <span class="number">.0</span> - Myhome</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­—ç¬¦ä¸²è½¬å°å†™-lower"><a href="#å­—ç¬¦ä¸²è½¬å°å†™-lower" class="headerlink" title="å­—ç¬¦ä¸²è½¬å°å†™(lower)"></a>å­—ç¬¦ä¸²è½¬å°å†™(<code>lower</code>)</h3><p>å°†ä¼ å…¥å­—ç¬¦ä¸²å…¨éƒ¨è½¬å°å†™</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello World!"</span>;</span><br><span class="line"><span class="keyword">var</span> str2= lower(str1);</span><br><span class="line">writeToLog(<span class="string">"Input:"</span> + str1);</span><br><span class="line">writeToLog(<span class="string">"Converted to LowerCase:"</span> + str2);</span><br><span class="line">writeToLog(lower(<span class="string">'DDDHelloSWxss'</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>å“åº”å†…å®¹</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/<span class="number">08</span>/<span class="number">19</span> <span class="number">10</span>:<span class="number">43</span>:<span class="number">09</span> - JavaScriptä»£ç <span class="number">.0</span> - Input:Hello World!</span><br><span class="line"><span class="number">2019</span>/<span class="number">08</span>/<span class="number">19</span> <span class="number">10</span>:<span class="number">43</span>:<span class="number">09</span> - JavaScriptä»£ç <span class="number">.0</span> - Converted to LowerCase:hello world!</span><br><span class="line"><span class="number">2019</span>/<span class="number">08</span>/<span class="number">19</span> <span class="number">10</span>:<span class="number">43</span>:<span class="number">09</span> - JavaScriptä»£ç <span class="number">.0</span> - dddhelloswxss</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­—ç¬¦ä¸²å¡«å……å·¦ä¾§-lpad-string-char-length"><a href="#å­—ç¬¦ä¸²å¡«å……å·¦ä¾§-lpad-string-char-length" class="headerlink" title="å­—ç¬¦ä¸²å¡«å……å·¦ä¾§(lpad(string,char,length))"></a>å­—ç¬¦ä¸²å¡«å……å·¦ä¾§(<code>lpad(string,char,length)</code>)</h3><p>ç”¨æŒ‡å®šé•¿åº¦çš„ç»™å®šå­—ç¬¦å°†å­—ç¬¦ä¸²å¡«å……åˆ°å·¦ä¾§</p>
<p>å‚æ•°å®šä¹‰ï¼š</p>
<ul>
<li>1ï¼šä¼ å…¥å­—ç¬¦ä¸²</li>
<li>2ï¼šå¡«å……å•å­—ç¬¦</li>
<li>3ï¼šå¡«å……å•å­—ç¬¦é•¿åº¦</li>
</ul>
<p>å¦‚æœlengthé•¿åº¦è¶…è¿‡ç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦,å°†å¯¹å¡«å……å­—ç¬¦ä¸²åšå‡æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello World!"</span>; </span><br><span class="line">writeToLog(<span class="string">"Lpad:"</span> + lpad(str1, <span class="string">"x"</span>,<span class="number">20</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶,æœ€ç»ˆè¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">46</span>:<span class="number">38</span> - JavaScriptä»£ç <span class="number">.0</span> - Lpad:xxxxxxxxHello World!</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆçš„å®Œæˆé•¿åº¦æ˜¯20ä¸ªå­—ç¬¦é•¿åº¦,å› æ­¤å¡«å……çš„å•å­—ç¬¦<code>x</code>å¹¶æ²¡æœ‰å¡«å……20æ¬¡</p>
<p>å¦‚æœlengthé•¿åº¦å°äºç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦,åˆ™é»˜è®¤è¿”å›åŸå­—ç¬¦ä¸²,ä¸åšå¡«å……,ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello World!"</span>; </span><br><span class="line">writeToLog(<span class="string">"Lpad:"</span> + lpad(str1, <span class="string">"x"</span>,<span class="number">5</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶æœ€ç»ˆçš„è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">46</span>:<span class="number">38</span> - JavaScriptä»£ç <span class="number">.0</span> - Lpad:Hello World!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å»ç©ºå­—ç¬¦-ltrim"><a href="#å»ç©ºå­—ç¬¦-ltrim" class="headerlink" title="å»ç©ºå­—ç¬¦(ltrim)"></a>å»ç©ºå­—ç¬¦(<code>ltrim</code>)</h3><p>ä»å·¦ä¾§å¼€å§‹å»é™¤ç©ºå­—ç¬¦ä¸²</p>
<h3 id="æ•°å­—è½¬å­—ç¬¦ä¸²-num2str"><a href="#æ•°å­—è½¬å­—ç¬¦ä¸²-num2str" class="headerlink" title="æ•°å­—è½¬å­—ç¬¦ä¸²(num2str)"></a>æ•°å­—è½¬å­—ç¬¦ä¸²(<code>num2str</code>)</h3><p>ç»™å®šæ•°å­—,è½¬æ¢ä¸ºå­—ç¬¦ä¸²,ä¸»è¦æœ‰3ä¸ªæ„é€ å‡½æ•°ï¼š</p>
<ul>
<li><code>num2str(num)</code>:è½¬æ¢numæ•°å­—ä¸ºå­—ç¬¦ä¸²</li>
<li><code>num2str(num,format)</code>:æ ¼å¼åŒ–æ•°å­—ä¸ºæŒ‡å®šå­—ç¬¦ä¸²</li>
<li><code>num2str(num,format,iso)</code>:æŒ‰ç…§æœ¬åœ°ISOç¼–ç è¿›è¡Œæ ¼å¼åŒ–</li>
</ul>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="number">123.40</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = -<span class="number">123.40</span>;</span><br><span class="line">writeToLog(num2str(d1));</span><br><span class="line">writeToLog(num2str(d1, <span class="string">"0.00"</span>));</span><br><span class="line">writeToLog(num2str(d1, <span class="string">"0.00"</span>, <span class="string">"EN"</span>));</span><br><span class="line">writeToLog(num2str(d2, <span class="string">"0.00;(0.00)"</span>, <span class="string">"EN"</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">123.4</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">123.40</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">123.40</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScriptä»£ç <span class="number">.0</span> - (<span class="number">123.40</span>)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="XMLä¿æŠ¤æ ‡ç­¾å‡½æ•°è½¬æ¢-protectXMLCDATA"><a href="#XMLä¿æŠ¤æ ‡ç­¾å‡½æ•°è½¬æ¢-protectXMLCDATA" class="headerlink" title="XMLä¿æŠ¤æ ‡ç­¾å‡½æ•°è½¬æ¢(protectXMLCDATA)"></a>XMLä¿æŠ¤æ ‡ç­¾å‡½æ•°è½¬æ¢(<code>protectXMLCDATA</code>)</h3><p>ä¼ å…¥ç»™å®šå­—ç¬¦ä¸²,æ·»åŠ æ ‡å‡†ä¿æŠ¤,ä»£ç ç¤ºä¾‹</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"my home"</span>;      </span><br><span class="line">writeToLog(protectXMLCDATA(str1));</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶,å°†ä¼šç»™å˜é‡<code>str1</code>åŠ ä¸Šä¿æŠ¤æ ‡ç­¾</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">02</span>:09 - JavaScriptä»£ç <span class="number">.0</span> - &lt;![CDATA[my home]]&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç§»é™¤å­—ç¬¦ä¸²ä¸­CRLFå­—ç¬¦-removeCRLF-str"><a href="#ç§»é™¤å­—ç¬¦ä¸²ä¸­CRLFå­—ç¬¦-removeCRLF-str" class="headerlink" title="ç§»é™¤å­—ç¬¦ä¸²ä¸­CRLFå­—ç¬¦(removeCRLF(str))"></a>ç§»é™¤å­—ç¬¦ä¸²ä¸­CRLFå­—ç¬¦(<code>removeCRLF(str)</code>)</h3><p>ç»™å®šå­—ç¬¦ä¸²ä¸­åˆ é™¤CR END LFçš„å­—ç¬¦ä¸²</p>
<h3 id="æ›¿æ¢å­—ç¬¦ä¸²-replace"><a href="#æ›¿æ¢å­—ç¬¦ä¸²-replace" class="headerlink" title="æ›¿æ¢å­—ç¬¦ä¸²(replace)"></a>æ›¿æ¢å­—ç¬¦ä¸²(<code>replace</code>)</h3><p>æ›¿æ¢å­—ç¬¦ä¸²ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼š</p>
<ul>
<li><code>replace(str,searchStr,replaceStr)</code>:ä»æŒ‡å®šå­—ç¬¦ä¸²ä¸­æŸ¥è¯¢ï¼Œç„¶åæ›¿æ¢</li>
<li><code>replace(str,firstSearch,firstReplace,secondSearch,SecondReplace...)</code>ï¼šæ— é™æŸ¥è¯¢æ›¿æ¢</li>
</ul>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"Hello World, this is a nice function"</span>;      </span><br><span class="line"><span class="keyword">var</span> str2 = replace(str1,<span class="string">"World"</span>, <span class="string">"Folk"</span>);</span><br><span class="line">writeToLog(str2);</span><br><span class="line"><span class="keyword">var</span> str2 = replace(str1,<span class="string">"World"</span>, <span class="string">"Folk"</span>, <span class="string">"nice"</span>,<span class="string">"beautifull"</span>);</span><br><span class="line">writeToLog(str2);</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆè¾“å‡º:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">10</span>:<span class="number">21</span> - JavaScriptä»£ç <span class="number">.0</span> - Hello Folk, <span class="keyword">this</span> is a nice function</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">10</span>:<span class="number">21</span> - JavaScriptä»£ç <span class="number">.0</span> - Hello Folk, <span class="keyword">this</span> is a beautifull function</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­—ç¬¦ä¸²å³ä¾§å¡«å……-rpad-string-char-length"><a href="#å­—ç¬¦ä¸²å³ä¾§å¡«å……-rpad-string-char-length" class="headerlink" title="å­—ç¬¦ä¸²å³ä¾§å¡«å……(rpad(string,char,length))"></a>å­—ç¬¦ä¸²å³ä¾§å¡«å……(<code>rpad(string,char,length</code>))</h3><p>ä½¿ç”¨æ–¹æ³•åŒ<code>lpad</code>,åªæ˜¯ä¸€ä¸ªæ˜¯å·¦ä¾§ï¼Œä¸€ä¸ªæ˜¯å³ä¾§</p>
<h3 id="å»é™¤ç©ºå­—ç¬¦-å³ä¾§-rtrim"><a href="#å»é™¤ç©ºå­—ç¬¦-å³ä¾§-rtrim" class="headerlink" title="å»é™¤ç©ºå­—ç¬¦(å³ä¾§)(rtrim)"></a>å»é™¤ç©ºå­—ç¬¦(å³ä¾§)(<code>rtrim</code>)</h3><h3 id="æ­£åˆ™åˆ‡åˆ†-str2RegExp"><a href="#æ­£åˆ™åˆ‡åˆ†-str2RegExp" class="headerlink" title="æ­£åˆ™åˆ‡åˆ†(str2RegExp)"></a>æ­£åˆ™åˆ‡åˆ†(<code>str2RegExp</code>)</h3><p>å‡ºå…¥ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼,å¯¹stringå­—ç¬¦ä¸²è¿›è¡ŒSplitæ“ä½œ.ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> strToMatch = <span class="string">"info@proconis.de"</span>;</span><br><span class="line"><span class="keyword">var</span> strReg = <span class="string">"^(\\w+)@([a-zA-Z_]+?)\\.([a-zA-Z]{2,3})$"</span>;</span><br><span class="line"><span class="keyword">var</span> xArr =  str2RegExp(strToMatch, strReg);</span><br><span class="line"><span class="keyword">if</span> ( xArr != <span class="literal">null</span> ) {</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;xArr.length;i++) {</span><br><span class="line">	    writeToLog(xArr[i]);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span> {</span><br><span class="line">    writeToLog(<span class="string">"no match"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">21</span>:<span class="number">19</span> - JavaScriptä»£ç <span class="number">.0</span> - info</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">21</span>:<span class="number">19</span> - JavaScriptä»£ç <span class="number">.0</span> - proconis</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">21</span>:<span class="number">19</span> - JavaScriptä»£ç <span class="number">.0</span> - de</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­—ç¬¦ä¸²æˆªå–-substr"><a href="#å­—ç¬¦ä¸²æˆªå–-substr" class="headerlink" title="å­—ç¬¦ä¸²æˆªå–(substr)"></a>å­—ç¬¦ä¸²æˆªå–(<code>substr</code>)</h3><p>é€šè¿‡åˆ¶å®šç´¢å¼•å¼€å§‹å¯¹å­—ç¬¦ä¸²è¿›è¡Œæˆªå–æ“ä½œ,ä¸»è¦æœ‰ä¸¤ä¸ªé‡æ„å‚æ•°ï¼š</p>
<ul>
<li><code>substr(string,from)</code>:æŒ‡å®šfromç´¢å¼•å¼€å§‹æˆªå–å­—ç¬¦ä¸²</li>
<li><code>substr(string,from,to)</code>:æŒ‡å®šå¼€å§‹å’Œæˆªæ­¢ç´¢å¼•è¿›è¡Œæˆªå–</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello Pentaho!"</span>;</span><br><span class="line"><span class="keyword">var</span> str2= substr(str1, <span class="number">6</span>);</span><br><span class="line"><span class="keyword">var</span> str3= substr(str1, <span class="number">6</span>, <span class="number">7</span>);</span><br><span class="line">writeToLog(<span class="string">"Input : "</span> + str1);</span><br><span class="line">writeToLog(<span class="string">"From position 6: "</span> + str2);</span><br><span class="line">writeToLog(<span class="string">"From position 6 for 7 long : "</span> + str3);</span><br></pre></td></tr></tbody></table></figure>

<p>æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">31</span>:<span class="number">20</span> - JavaScriptä»£ç <span class="number">.0</span> - Input : Hello Pentaho!</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">31</span>:<span class="number">20</span> - JavaScriptä»£ç <span class="number">.0</span> - From position <span class="number">6</span>: Pentaho!</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">31</span>:<span class="number">20</span> - JavaScriptä»£ç <span class="number">.0</span> - From position <span class="number">6</span> <span class="keyword">for</span> <span class="number">7</span> <span class="keyword">long</span> : Pentaho</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å»é™¤å·¦å³ç©ºæ ¼-trim"><a href="#å»é™¤å·¦å³ç©ºæ ¼-trim" class="headerlink" title="å»é™¤å·¦å³ç©ºæ ¼(trim)"></a>å»é™¤å·¦å³ç©ºæ ¼(<code>trim</code>)</h3><h3 id="ä¸è½¬ä¹‰HTML-unEscapeHtml-html"><a href="#ä¸è½¬ä¹‰HTML-unEscapeHtml-html" class="headerlink" title="ä¸è½¬ä¹‰HTML(unEscapeHtml(html))"></a>ä¸è½¬ä¹‰HTML(<code>unEscapeHtml(html)</code>)</h3><p>é’ˆå¯¹ä»¥è½¬ä¹‰çš„HTMLå­—ç¬¦è¿›è¡Œè§£å¯†,ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> w=<span class="string">'&lt;h2&gt;æˆ‘æ˜¯H2æ ‡é¢˜&lt;/h2&gt;'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> esW=escapeHtml(w);</span><br><span class="line"><span class="keyword">var</span> unesw=unEscapeHtml(esW);</span><br><span class="line"></span><br><span class="line">writeToLog(esW);</span><br><span class="line">writeToLog(unesw);</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">38</span>:<span class="number">16</span> - JavaScriptä»£ç <span class="number">.0</span> - &amp;lt;h2&amp;gt;&amp;#<span class="number">25105</span>;&amp;#<span class="number">26159</span>;H2&amp;#<span class="number">26631</span>;&amp;#<span class="number">39064</span>;&amp;lt;/h2&amp;gt;</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">38</span>:<span class="number">16</span> - JavaScriptä»£ç <span class="number">.0</span> - &lt;h2&gt;æˆ‘æ˜¯H2æ ‡é¢˜&lt;/h2&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è§£ç è½¬ä¹‰XML-unEscapeXml"><a href="#è§£ç è½¬ä¹‰XML-unEscapeXml" class="headerlink" title="è§£ç è½¬ä¹‰XML(unEscapeXml )"></a>è§£ç è½¬ä¹‰XML(<code>unEscapeXml </code>)</h3><h3 id="å­—ç¬¦ä¸²è½¬å¤§å†™-upper"><a href="#å­—ç¬¦ä¸²è½¬å¤§å†™-upper" class="headerlink" title="å­—ç¬¦ä¸²è½¬å¤§å†™(upper)"></a>å­—ç¬¦ä¸²è½¬å¤§å†™(<code>upper</code>)</h3><p>å°†ä¼ å…¥å­—ç¬¦ä¸²å…¨éƒ¨è½¬å¤§å†™.ä¾‹å¦‚:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"Hello World"</span>;</span><br><span class="line">writeToLog(upper(str));</span><br></pre></td></tr></tbody></table></figure>

<h2 id="æµ®ç‚¹å‹çš„å‡½æ•°-Numeric-Functions"><a href="#æµ®ç‚¹å‹çš„å‡½æ•°-Numeric-Functions" class="headerlink" title="æµ®ç‚¹å‹çš„å‡½æ•°(Numeric Functions)"></a>æµ®ç‚¹å‹çš„å‡½æ•°(Numeric Functions)</h2><h3 id="è®¡ç®—ç»å¯¹å€¼-abs-num"><a href="#è®¡ç®—ç»å¯¹å€¼-abs-num" class="headerlink" title="è®¡ç®—ç»å¯¹å€¼(abs(num))"></a>è®¡ç®—ç»å¯¹å€¼(<code>abs(num)</code>)</h3><p>è®¡ç®—ä¸€ä¸ªæ•°å€¼çš„ç»å¯¹å€¼,ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = -<span class="number">1234.01</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="number">1234.01</span>;</span><br><span class="line">writeToLog(abs(d1));</span><br><span class="line">writeToLog(abs(d2));</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºä¸ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">51</span>:<span class="number">00</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">1234.01</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">51</span>:<span class="number">00</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">1234.01</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æœ€å°åŒç²¾åº¦å€¼-ceil-num"><a href="#æœ€å°åŒç²¾åº¦å€¼-ceil-num" class="headerlink" title="æœ€å°åŒç²¾åº¦å€¼(ceil(num))"></a>æœ€å°åŒç²¾åº¦å€¼(<code>ceil(num)</code>)</h3><p>è¿”å›æœ€å°çš„åŒç²¾åº¦å€¼ã€‚è¯¥å€¼å°†è¢«å››èˆäº”å…¥ã€‚ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = -<span class="number">1234.01</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="number">1234.01</span>;</span><br><span class="line">writeToLog(ceil(d1));</span><br><span class="line">writeToLog(ceil(d2));</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">52</span>:<span class="number">40</span> - JavaScriptä»£ç <span class="number">.0</span> - -<span class="number">1234</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">52</span>:<span class="number">40</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">1235</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æœ€å¤§æ•°å€¼-floor-num"><a href="#æœ€å¤§æ•°å€¼-floor-num" class="headerlink" title="æœ€å¤§æ•°å€¼(floor(num))"></a>æœ€å¤§æ•°å€¼(<code>floor(num)</code>)</h3><p>è¿”å›æœ€å¤§æ•°å€¼,è¯¥å€¼å°†è¢«å››èˆäº”å…¥,ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = -<span class="number">1234.01</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="number">1234.01</span>;</span><br><span class="line">writeToLog(floor(d1));</span><br><span class="line">writeToLog(floor(d2));</span><br></pre></td></tr></tbody></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">55</span>:<span class="number">13</span> - JavaScriptä»£ç <span class="number">.0</span> - -<span class="number">1235</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">55</span>:<span class="number">13</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">1234</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­—ç¬¦ä¸²è½¬æ•°å€¼-str2num-var"><a href="#å­—ç¬¦ä¸²è½¬æ•°å€¼-str2num-var" class="headerlink" title="å­—ç¬¦ä¸²è½¬æ•°å€¼(str2num(var))"></a>å­—ç¬¦ä¸²è½¬æ•°å€¼(<code>str2num(var)</code>)</h3><p>å­—ç¬¦ä¸²è½¬æ•°å€¼ä¸»è¦åŒ…å«ä¸¤ä¸ªæ„é€ å‡½æ•°,åˆ†åˆ«æ˜¯</p>
<ul>
<li><code>str2num(str)</code>:ä¼ å…¥æ•°å€¼å­—ç¬¦ä¸²,è¿›è¡Œæ ¼å¼åŒ–è½¬æ¢</li>
<li><code>str2num(str,format)</code>:é€šè¿‡æŒ‡å®šæ ¼å¼è¿›è¡Œæ•°å€¼è½¬æ¢</li>
</ul>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"1.234,56"</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"12"</span>;</span><br><span class="line">writeToLog((str2num(str1,<span class="string">"#,##0.00"</span>)));</span><br><span class="line">writeToLog((str2num(str2)));</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">02</span>:<span class="number">19</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">1.234</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">02</span>:<span class="number">19</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">12</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æˆªå–æ•°å€¼-trunc"><a href="#æˆªå–æ•°å€¼-trunc" class="headerlink" title="æˆªå–æ•°å€¼(trunc)"></a>æˆªå–æ•°å€¼(<code>trunc</code>)</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trunc(<span class="number">1234.9</span>); <span class="comment">// è¿”å› 1234</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="æ—¥æœŸç±»å‹å‡½æ•°-Date-Functions"><a href="#æ—¥æœŸç±»å‹å‡½æ•°-Date-Functions" class="headerlink" title="æ—¥æœŸç±»å‹å‡½æ•°(Date Functions)"></a>æ—¥æœŸç±»å‹å‡½æ•°(Date Functions)</h2><h3 id="æ—¥æœŸç›¸åŠ -dateAdd"><a href="#æ—¥æœŸç›¸åŠ -dateAdd" class="headerlink" title="æ—¥æœŸç›¸åŠ (dateAdd)"></a>æ—¥æœŸç›¸åŠ (<code>dateAdd</code>)</h3><p>é’ˆå¯¹æ—¥æœŸå˜é‡è¿›è¡Œç›¸åº”çš„æ·»åŠ æ—¶é—´,æ·»åŠ é¢‘ç‡åŒ…æ‹¬å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ ç­‰ç­‰</p>
<p>å‡½æ•°å®šä¹‰:<code>dateAdd(date,format,plusNum)</code></p>
<ul>
<li>date:æ—¥æœŸå¯¹è±¡</li>
<li>format:è¦åŠ çš„ç±»å‹</li>
<li>plusNum:åŠ çš„æ•°å€¼</li>
</ul>
<p>ç›¸åŠ ç±»å‹ä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>y:å¹´</li>
<li>mï¼šæœˆ</li>
<li>d:æ—¥</li>
<li>w:å‘¨</li>
<li>wd:å·¥ä½œæ—¥</li>
<li>hh:å°æ—¶</li>
<li>mi:åˆ†é’Ÿ</li>
<li>ss:ç§’</li>
</ul>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fmt=<span class="string">'yyyy-MM-dd HH:mm:ss'</span>;</span><br><span class="line">writeToLog(<span class="string">"å½“å‰æ—¶é—´:"</span>+date2str(d1,fmt));</span><br><span class="line"><span class="keyword">var</span> py=dateAdd(d1,<span class="string">'y'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> fy=date2str(py,fmt);</span><br><span class="line">writeToLog(<span class="string">"åŠ 1å¹´ï¼š"</span>+fy);</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> - JavaScriptä»£ç <span class="number">.0</span> - å½“å‰æ—¶é—´:<span class="number">2019</span>-08-<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> - JavaScriptä»£ç <span class="number">.0</span> - åŠ <span class="number">1</span>å¹´ï¼š<span class="number">2020</span>-08-<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ—¥æœŸæ¯”è¾ƒ-dateDiff"><a href="#æ—¥æœŸæ¯”è¾ƒ-dateDiff" class="headerlink" title="æ—¥æœŸæ¯”è¾ƒ(dateDiff)"></a>æ—¥æœŸæ¯”è¾ƒ(<code>dateDiff</code>)</h3><p>ä¸¤ä¸ªæ—¥æœŸç›¸äº’æ¯”è¾ƒ</p>
<p>å‡½æ•°å®šä¹‰:<code>dateDiff(startDate,endDate,type)</code></p>
<ul>
<li>startDate:å¼€å§‹æ—¥æœŸ</li>
<li>endDate:æˆªæ­¢æ—¥æœŸ</li>
<li>typeï¼šè¿”å›ç›¸å·®æ•°å€¼ç±»å‹</li>
</ul>
<p>ç±»å‹ä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>y:å¹´</li>
<li>mï¼šæœˆ</li>
<li>d:æ—¥</li>
<li>w:å‘¨</li>
<li>wd:å·¥ä½œæ—¥</li>
<li>hh:å°æ—¶</li>
<li>mi:åˆ†é’Ÿ</li>
<li>ss:ç§’</li>
</ul>
<h3 id="è·å–æŒ‡å®šæ—¥æœŸæ•°å€¼-getDayNumber"><a href="#è·å–æŒ‡å®šæ—¥æœŸæ•°å€¼-getDayNumber" class="headerlink" title="è·å–æŒ‡å®šæ—¥æœŸæ•°å€¼(getDayNumber)"></a>è·å–æŒ‡å®šæ—¥æœŸæ•°å€¼(<code>getDayNumber</code>)</h3><p>æ ¹æ®ç±»å‹è·å–æŒ‡å®šæ—¥æœŸçš„æ•°å€¼</p>
<p>å‡½æ•°å®šä¹‰ï¼š<code>getDayNumber(date,type)</code></p>
<ul>
<li>date:å½“å‰æ—¥æœŸå®ä¾‹</li>
<li>type:ç±»åˆ«</li>
</ul>
<p>ç±»åˆ«ä¸»è¦åˆ†å››ç±»</p>
<ul>
<li>y:è·å–å½“å¹´çš„å¤©æ•°</li>
<li>m:è·å–å½“æœˆçš„å¤©æ•°</li>
<li>w:è·å–æœ¬å‘¨çš„å¤©æ•°</li>
<li>wm:è·å–å½“æœˆä¸­æœ¬å‘¨çš„å¤©æ•°</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> Date();</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"y"</span>));</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"m"</span>));</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"w"</span>));</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"wm"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="getFiscalDate"><a href="#getFiscalDate" class="headerlink" title="getFiscalDate"></a>getFiscalDate</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Returns the fiscal Date from the date value,</span></span><br><span class="line"><span class="comment">// based on a given offset.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Usage:</span></span><br><span class="line"><span class="comment">// getFiscalDate(var);</span></span><br><span class="line"><span class="comment">// 1: Date - The Variable with the Date.</span></span><br><span class="line"><span class="comment">// 2: String - The Date/Month which represents</span></span><br><span class="line"><span class="comment">// the fiscal Start Offset. Format allways "dd.MM.".</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 2006-11-15</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">"01.07."</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"10.12."</span>;</span><br><span class="line">Alert(getFiscalDate(d1, str1));</span><br><span class="line">Alert(getFiscalDate(d1, str2));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ—¥æœŸ-getNextWorkingDay"><a href="#è·å–ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ—¥æœŸ-getNextWorkingDay" class="headerlink" title="è·å–ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ—¥æœŸ(getNextWorkingDay)"></a>è·å–ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ—¥æœŸ(<code>getNextWorkingDay</code>)</h3><p>ä¼ å…¥å½“å‰æ—¥æœŸ,è·å–è¯¥æ—¥æœŸåé¢ä¸€ä¸ªå·¥ä½œæ—¥æ—¥æœŸ</p>
<p>å‡½æ•°å®šä¹‰<code>getNextWorkingDay(date)</code></p>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘¨1</span></span><br><span class="line"><span class="keyword">var</span> d2=str2date(<span class="string">'2019-08-19 16:36:00'</span>,fmt);</span><br><span class="line"><span class="comment">//å‘¨ 6</span></span><br><span class="line"><span class="keyword">var</span> d3=str2date(<span class="string">'2019-08-17 16:36:00'</span>,fmt);</span><br><span class="line"></span><br><span class="line">writeToLog(date2str(getNextWorkingDay(d1),fmt));</span><br><span class="line">writeToLog(date2str(getNextWorkingDay(d2),fmt));</span><br><span class="line">writeToLog(date2str(getNextWorkingDay(d3),fmt));</span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬è¿™d2å’Œd3å˜é‡ä¸­å®šä¹‰äº†ä¸åŒçš„æ—¥æœŸå®ä¾‹,åˆ†åˆ«æ˜¯å‘¨1å’Œå‘¨6,æœ€ç»ˆé€šè¿‡<code>getNextWorkingDay</code>èƒ½è·å–å¾—åˆ°ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ—¥æœŸï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">2019</span>-08-<span class="number">20</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">2019</span>-08-<span class="number">20</span> <span class="number">16</span>:<span class="number">36</span>:<span class="number">00</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span> - JavaScriptä»£ç <span class="number">.0</span> - <span class="number">2019</span>-08-<span class="number">19</span> <span class="number">16</span>:<span class="number">36</span>:<span class="number">00</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–å½“å‰æœˆä»½æ•°å€¼-month-date"><a href="#è·å–å½“å‰æœˆä»½æ•°å€¼-month-date" class="headerlink" title="è·å–å½“å‰æœˆä»½æ•°å€¼(month(date))"></a>è·å–å½“å‰æœˆä»½æ•°å€¼(<code>month(date)</code>)</h3><p>è·å–å½“å‰æ—¥æœŸçš„æœˆä»½æ•°å€¼,éœ€è¦æ³¨æ„çš„æ˜¯,è¯¥å€¼çš„æœˆä»½æ˜¯ä»0å¼€å§‹çš„,å› æ­¤æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„ç»“æœåº”è¯¥+1æ‰æ˜¯æˆ‘ä»¬çš„çœŸå®æœˆä»½æ•°å€¼ï¼Œä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();<span class="comment">//2019/08/19</span></span><br><span class="line">writeToLog(month(d1)); <span class="comment">//æœ€ç»ˆè¾“å‡ºä¸º7</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–å½“å‰æ—¶é—´çš„å­£åº¦å€¼-quarter-date"><a href="#è·å–å½“å‰æ—¶é—´çš„å­£åº¦å€¼-quarter-date" class="headerlink" title="è·å–å½“å‰æ—¶é—´çš„å­£åº¦å€¼(quarter(date))"></a>è·å–å½“å‰æ—¶é—´çš„å­£åº¦å€¼(<code>quarter(date)</code>)</h3><p>æ ¹æ®æŒ‡å®šæ—¥æœŸè·å–å½“å‰å­£åº¦æ•°å€¼</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();<span class="comment">//2019/08/19</span></span><br><span class="line">writeToLog(quarter(d1));<span class="comment">//æœ€ç»ˆè¾“å‡ºä¸º3(ä»£è¡¨ç¬¬ä¸‰å­£åº¦)</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­—ç¬¦ä¸²è½¬æ—¥æœŸ-str2date"><a href="#å­—ç¬¦ä¸²è½¬æ—¥æœŸ-str2date" class="headerlink" title="å­—ç¬¦ä¸²è½¬æ—¥æœŸ(str2date)"></a>å­—ç¬¦ä¸²è½¬æ—¥æœŸ(<code>str2date</code>)</h3><p>å­—ç¬¦ä¸²è½¬æ—¥æœŸå’Œæ—¥æœŸè½¬å­—ç¬¦ä¸²æœ‰ç‚¹ç±»ä¼¼,åªä¸è¿‡ä¸»ä½“å¯¹æ¢äº†ä¸€ä¸‹,ä½†æ˜¯ä¼ å…¥çš„æ ¼å¼å‚æ•°éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸»è¦æœ‰4ä¸ªé‡è½½å‡½æ•°:</p>
<ul>
<li><code>str2date(str)</code>:é»˜è®¤è½¬æ¢</li>
<li><code>str2date(str,format)</code>:ä¼ å…¥formatæ ¼å¼åŒ–å‚æ•°</li>
<li><code>str2date(str,format,iso)</code>:æ ¹æ®isoç¼–ç åŠæ ¼å¼åŒ–å‚æ•°è¿›è¡Œè½¬æ¢</li>
<li><code>str2date(str,format,iso,timezone)</code>:æ ¹æ®ä¸åŒæ—¶åŒºçš„isoç¼–ç è¿›è¡Œæ ¼å¼åŒ–è½¬æ¢</li>
</ul>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">writeToLog(str2date(<span class="string">"01.12.2006"</span>,<span class="string">"dd.MM.yyyy"</span>));</span><br><span class="line">writeToLog(str2date(<span class="string">"01.12.2006 23:23:01"</span>,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>));</span><br><span class="line">writeToLog(str2date(<span class="string">"Tue.May.2006"</span>,<span class="string">"E.MMM.yyyy"</span>,<span class="string">"EN"</span>));</span><br><span class="line">writeToLog(str2date(<span class="string">"22.02.2008 23:23:01"</span>,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"DE"</span>));</span><br><span class="line">writeToLog(str2date(<span class="string">"22.02.2008 23:23:01"</span>,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"DE"</span>, <span class="string">"EST"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æˆªå–æ—¥æœŸ-truncDate-date-type"><a href="#æˆªå–æ—¥æœŸ-truncDate-date-type" class="headerlink" title="æˆªå–æ—¥æœŸ(truncDate(date,type))"></a>æˆªå–æ—¥æœŸ(<code>truncDate(date,type)</code>)</h3><p>æŒ‡å®šæˆªå–ä¸åŒçš„æ—¥æœŸéƒ¨åˆ†,å‡½æ•°å®šä¹‰truncDate(date,type)</p>
<ul>
<li>date:å½“å‰æ—¥æœŸå®ä¾‹</li>
<li>type:æˆªå–ç±»å‹</li>
</ul>
<p>ç±»å‹ä¸»è¦æœ‰6ä¸­,åˆ†åˆ«æ˜¯æ•´å‹ï¼Œä»0-5ï¼š</p>
<ul>
<li>5ï¼šæˆªå–æœˆä»½</li>
<li>4ï¼šæˆªå–å¤©æ•°</li>
<li>3:æˆªå–å°æ—¶</li>
<li>2ï¼šæˆªå–åˆ†é’Ÿ</li>
<li>1ï¼šæˆªå–ç§’</li>
<li>0:æˆªå–æ¯«ç§’</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dateTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> date0 = truncDate(dateTime, <span class="number">0</span>); <span class="comment">// gives back today at yyyy/MM/dd HH:mm:ss.000</span></span><br><span class="line"><span class="keyword">var</span> date1 = truncDate(dateTime, <span class="number">1</span>); <span class="comment">// gives back today at yyyy/MM/dd HH:mm:00.000</span></span><br><span class="line"><span class="keyword">var</span> date2 = truncDate(dateTime, <span class="number">2</span>); <span class="comment">// gives back today at yyyy/MM/dd HH:00:00.000</span></span><br><span class="line"><span class="keyword">var</span> date3 = truncDate(dateTime, <span class="number">3</span>); <span class="comment">// gives back today at yyyy/MM/dd 00:00:00.000</span></span><br><span class="line"><span class="keyword">var</span> date4 = truncDate(dateTime, <span class="number">4</span>); <span class="comment">// gives back today at yyyy/MM/01 00:00:00.000</span></span><br><span class="line"><span class="keyword">var</span> date5 = truncDate(dateTime, <span class="number">5</span>); <span class="comment">// gives back today at yyyy/01/01 00:00:00.000</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–å½“å¹´çš„å‘¨æ•°-week"><a href="#è·å–å½“å¹´çš„å‘¨æ•°-week" class="headerlink" title="è·å–å½“å¹´çš„å‘¨æ•°(week)"></a>è·å–å½“å¹´çš„å‘¨æ•°(<code>week</code>)</h3><p>è·å–æŒ‡å®šæ—¥æœŸçš„å‘¨æ•°,ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">//2019/08/19</span></span><br><span class="line"> </span><br><span class="line">writeToLog(week(d1));<span class="comment">// è¿”å›34</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–å¹´ä»½-year"><a href="#è·å–å¹´ä»½-year" class="headerlink" title="è·å–å¹´ä»½(year)"></a>è·å–å¹´ä»½(<code>year</code>)</h3><p>è·å–ä¼ å…¥æ—¥æœŸçš„å¹´ä»½,ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">//2019/08/19</span></span><br><span class="line"> </span><br><span class="line">writeToLog(year(d1));<span class="comment">// è¿”å›2019</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="é€»è¾‘åˆ¤æ–­å‹å‡½æ•°-Logic-Functions"><a href="#é€»è¾‘åˆ¤æ–­å‹å‡½æ•°-Logic-Functions" class="headerlink" title="é€»è¾‘åˆ¤æ–­å‹å‡½æ•°(Logic Functions)"></a>é€»è¾‘åˆ¤æ–­å‹å‡½æ•°(Logic Functions)</h2><h3 id="isCodepage"><a href="#isCodepage" class="headerlink" title="isCodepage"></a>isCodepage</h3><p>åˆ¤æ–­å­—ç¬¦ä¸²çš„codepageé¡¹,ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xStr = <span class="string">"RÃƒÂ©al"</span>;</span><br><span class="line">writeToLog(isCodepage(xStr, <span class="string">"UTF-8"</span>));<span class="comment">// true</span></span><br><span class="line">writeToLog(isCodepage(xStr, <span class="string">"windows-1250"</span>));<span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ˜¯å¦æ—¥æœŸ-isDate-str"><a href="#æ˜¯å¦æ—¥æœŸ-isDate-str" class="headerlink" title="æ˜¯å¦æ—¥æœŸ(isDate(str))"></a>æ˜¯å¦æ—¥æœŸ(<code>isDate(str)</code>)</h3><p>åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦æ—¥æœŸ</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="string">"Hello World"</span>;      </span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">writeToLog(isDate(d1));<span class="comment">//false</span></span><br><span class="line">writeToLog(isDate(d2));<span class="comment">//true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ˜¯å¦ä¸ºç©º-isEmpty-str"><a href="#æ˜¯å¦ä¸ºç©º-isEmpty-str" class="headerlink" title="æ˜¯å¦ä¸ºç©º(isEmpty(str))"></a>æ˜¯å¦ä¸ºç©º(<code>isEmpty(str)</code>)</h3><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="string">"Hello World"</span>;      </span><br><span class="line">Alert(isEmpty(d));<span class="comment">//false</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºé‚®ç®±æ ‡å‡†æ ¼å¼-isMailValid-str"><a href="#åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºé‚®ç®±æ ‡å‡†æ ¼å¼-isMailValid-str" class="headerlink" title="åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºé‚®ç®±æ ‡å‡†æ ¼å¼(isMailValid(str))"></a>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºé‚®ç®±æ ‡å‡†æ ¼å¼(<code>isMailValid(str)</code>)</h3><p>åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯é‚®ç®±</p>
<h3 id="åˆ¤æ–­æ˜¯å¦æ˜¯æ•°å€¼-isNum-str"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯æ•°å€¼-isNum-str" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯æ•°å€¼(isNum(str))"></a>åˆ¤æ–­æ˜¯å¦æ˜¯æ•°å€¼(<code>isNum(str)</code>)</h3><p>åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯æ•°å€¼</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"Hello World"</span>;      </span><br><span class="line"><span class="keyword">var</span> str2 = <span class="number">123456</span>;</span><br><span class="line">Alert(isNum(str1));<span class="comment">//false</span></span><br><span class="line">Alert(isNum(str2));<span class="comment">//true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ˜¯å¦æ­£åˆ™åŒ¹é…-isRegExp"><a href="#æ˜¯å¦æ­£åˆ™åŒ¹é…-isRegExp" class="headerlink" title="æ˜¯å¦æ­£åˆ™åŒ¹é…(isRegExp)"></a>æ˜¯å¦æ­£åˆ™åŒ¹é…(<code>isRegExp</code>)</h3><p>åˆ¤æ–­ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦åŒ¹é…å½“å‰çš„å­—ç¬¦ä¸²ï¼Œä¸»è¦æœ‰2ä¸ªå‡½æ•°å®šä¹‰ï¼š</p>
<ul>
<li>isRegExp(str,reg):ç»™å®šæ­£åˆ™åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…</li>
<li>isRegExp(str,reg1,reg2,reg3â€¦)ï¼›å¯ä»¥é€’å½’åˆ¤æ–­æ­£åˆ™åŒ¹é…</li>
</ul>
<p>æœ€ç»ˆè¿”å›çš„æ˜¯åŒ¹é…çš„æ¬¡æ•°æ•°å€¼,å¦‚æœä¸åŒ¹é…,è¿”å›-1</p>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> email1 =<span class="string">"info@proconis.de"</span>;</span><br><span class="line"><span class="keyword">var</span> email2= <span class="string">"support@proconis.co.uk"</span>;</span><br><span class="line"><span class="keyword">var</span> email3= <span class="string">"HelloWorld@x"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg1=<span class="string">"^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$"</span>;</span><br><span class="line"><span class="keyword">var</span> reg2=<span class="string">"^[\\w-\.]+@([\\w-]+\\.)+[\\w-]{2,4}$"</span>;</span><br><span class="line"></span><br><span class="line">writeToLog(isRegExp(email1, reg1,reg2) + <span class="string">" Matches"</span>); <span class="comment">//1</span></span><br><span class="line">writeToLog(isRegExp(email2, reg1,reg2) + <span class="string">" Matches"</span>);  <span class="comment">//2</span></span><br><span class="line">writeToLog(isRegExp(email3, reg1,reg2) + <span class="string">" Matches"</span>);<span class="comment">// 1</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ˜¯å¦å·¥ä½œæ—¥-isWorkingDay-date"><a href="#æ˜¯å¦å·¥ä½œæ—¥-isWorkingDay-date" class="headerlink" title="æ˜¯å¦å·¥ä½œæ—¥(isWorkingDay(date))"></a>æ˜¯å¦å·¥ä½œæ—¥(<code>isWorkingDay(date)</code>)</h3><p>åˆ¤æ–­æŸæ—¥æœŸæ˜¯å¦æ˜¯å·¥ä½œæ—¥,ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();<span class="comment">//å‘¨1</span></span><br><span class="line"><span class="keyword">var</span> d2=str2date(<span class="string">'2019-08-17'</span>,<span class="string">'yyyy-MM-dd'</span>) <span class="comment">//å‘¨å…­</span></span><br><span class="line">writeToLog(isWorkingDay(d1));<span class="comment">//true</span></span><br><span class="line">writeToLog(isWorkingDay(d2));<span class="comment">//false</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ç‰¹æ®Šçš„å‡½æ•°-Special-Functions"><a href="#ç‰¹æ®Šçš„å‡½æ•°-Special-Functions" class="headerlink" title="ç‰¹æ®Šçš„å‡½æ•°(Special Functions)"></a>ç‰¹æ®Šçš„å‡½æ•°(Special Functions)</h2><h3 id="å¼¹æ¡†ä¿¡æ¯-Alert-msg"><a href="#å¼¹æ¡†ä¿¡æ¯-Alert-msg" class="headerlink" title="å¼¹æ¡†ä¿¡æ¯(Alert(msg))"></a>å¼¹æ¡†ä¿¡æ¯(<code>Alert(msg)</code>)</h3><p>åœ¨å±å¹•å‰å¼¹å‡ºä¸€ä¸ªä¿¡æ¯æ¡†</p>
<h3 id="åŠ è½½JavaScriptæ–‡ä»¶-LoadScriptFile"><a href="#åŠ è½½JavaScriptæ–‡ä»¶-LoadScriptFile" class="headerlink" title="åŠ è½½JavaScriptæ–‡ä»¶(LoadScriptFile)"></a>åŠ è½½JavaScriptæ–‡ä»¶(<code>LoadScriptFile</code>)</h3><p>å°†ä¸€ä¸ªjavascriptæ–‡ä»¶åŠ è½½åˆ°å®é™…çš„è¿è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚åº”è¯¥ä»å®šä¹‰çš„StartScriptè°ƒç”¨æ­¤å‡½æ•°ï¼Œå¦åˆ™ï¼Œæ¯æ¬¡å¤„ç†éƒ½ä¼šåŠ è½½javascriptæ–‡ä»¶è¡Œã€‚</p>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xPfad = <span class="string">"F:/bak/Hello.js"</span>;</span><br><span class="line">LoadScriptFile(xPfad);</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶,æˆ‘ä»¬çš„å¤–éƒ¨JSæ–‡ä»¶ä»…ä»…æ˜¯åŒ…å«ä¸€å¥ç®€å•çš„è¾“å‡ºï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writeToLog(<span class="string">"Hello LoadScriptFile,outSide JS File "</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆè¿è¡Œæ—¶,æ§åˆ¶å°ä¼šæ‰“å°å‡ºæˆ‘ä»¬åœ¨å¤–éƒ¨JSä¸­çš„è¾“å‡ºè¡Œ</p>
<h3 id="ä»å½“å‰Tabæ åŠ è½½JSå¹¶è¿è¡Œ-LoadScriptFromTab"><a href="#ä»å½“å‰Tabæ åŠ è½½JSå¹¶è¿è¡Œ-LoadScriptFromTab" class="headerlink" title="ä»å½“å‰Tabæ åŠ è½½JSå¹¶è¿è¡Œ(LoadScriptFromTab)"></a>ä»å½“å‰Tabæ åŠ è½½JSå¹¶è¿è¡Œ(<code>LoadScriptFromTab</code>)</h3><p>å¦‚æœæˆ‘ä»¬åœ¨å½“å‰çš„JavaScriptç»„ä»¶ä¸­é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼ç¼–å†™äº†å¾ˆå¤šè„šæœ¬ä»£ç ,æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>LoadScriptFromTab</code>å‡½æ•°è¿›è¡Œç›¸äº’è°ƒç”¨,è¿™å¯¹äºå¼€å‘æŠ½è±¡æ¥è¯´æ˜¯å¾ˆå¥½çš„,ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">writeToLog(<span class="string">"å¤–éƒ¨TabåŠ è½½JS-------------------------"</span>)</span><br><span class="line">LoadScriptFromTab(<span class="string">'Item_1'</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æœ‰æ•ˆå¡å·åˆ¤æ–­-LuhnCheck"><a href="#æœ‰æ•ˆå¡å·åˆ¤æ–­-LuhnCheck" class="headerlink" title="æœ‰æ•ˆå¡å·åˆ¤æ–­(LuhnCheck)"></a>æœ‰æ•ˆå¡å·åˆ¤æ–­(<code>LuhnCheck</code>)</h3><p>å¦‚æœç»™å®šçš„æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å¡å·,åˆ™è¿”å›true</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"4444333322221111"</span>;      </span><br><span class="line">writeToLog(str1 + <span class="string">": "</span> + LuhnCheck(str1)); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"4444333322221110"</span>;      </span><br><span class="line">writeToLog(str2 + <span class="string">": "</span> + LuhnCheck(str2));<span class="comment">//false</span></span><br><span class="line">      </span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘æ–‡ä»¶ä¸­è¿½åŠ æ•°æ®-appendToFile"><a href="#å‘æ–‡ä»¶ä¸­è¿½åŠ æ•°æ®-appendToFile" class="headerlink" title="å‘æ–‡ä»¶ä¸­è¿½åŠ æ•°æ®(appendToFile)"></a>å‘æ–‡ä»¶ä¸­è¿½åŠ æ•°æ®(<code>appendToFile</code>)</h3><p>å‘æŒ‡å®šæ–‡ä»¶ä¸­è¿½åŠ æ•°æ®,å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> file = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++){</span><br><span class="line"> appendToFile(file,<span class="string">'TEST'</span>+i+<span class="string">"\r\n"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶,è¯¥ä»£ç ä¼šå‘<code>log.txt</code>æ–‡ä»¶è¾“å‡º100æ¡æ•°æ®è¡Œ</p>
<h3 id="decodeå‡½æ•°"><a href="#decodeå‡½æ•°" class="headerlink" title="decodeå‡½æ•°"></a>decodeå‡½æ•°</h3><p>decodeå‡½æ•°æœ‰ç‚¹ç±»ä¼¼äº<code>IF-THEN-ELSE</code>è¯­å¥ï¼Œå³è¡¨ç¤ºé€šè¿‡ç»™å®šæŸ¥è¯¢çš„å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œå³æ›¿æ¢,å¦åˆ™è¿”å›é»˜è®¤å€¼</p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"Hallo"</span>;</span><br><span class="line">writeToLog(decode(str1, <span class="string">"Hallo"</span>, <span class="string">"Hello"</span>));</span><br><span class="line">writeToLog(decode(str1, <span class="string">"1"</span>, <span class="string">"Mr"</span>, <span class="string">"2"</span>, <span class="string">"Mrs"</span>, <span class="string">"N/A"</span>));</span><br><span class="line">writeToLog(decode(str1, <span class="string">"1"</span>, <span class="string">"Mr"</span>, <span class="string">"2"</span>, <span class="string">"Mrs"</span>));</span><br><span class="line">str1 = <span class="string">"Mrs"</span>;</span><br><span class="line">writeToLog(decode(str1, <span class="string">"1"</span>, <span class="string">"Mr"</span>, <span class="string">"2"</span>, <span class="string">"Mrs"</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScriptä»£ç <span class="number">.0</span> - Hello</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScriptä»£ç <span class="number">.0</span> - N/A</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScriptä»£ç <span class="number">.0</span> - Hallo</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScriptä»£ç <span class="number">.0</span> - Mrs</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ‰§è¡Œå‘½ä»¤-execProcess"><a href="#æ‰§è¡Œå‘½ä»¤-execProcess" class="headerlink" title="æ‰§è¡Œå‘½ä»¤(execProcess)"></a>æ‰§è¡Œå‘½ä»¤(<code>execProcess</code>)</h3><p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t=execProcess(<span class="string">'ping www.baidu.com'</span>);</span><br><span class="line">writeToLog(t)</span><br></pre></td></tr></tbody></table></figure>

<p>è°ƒç”¨å‘½ä»¤è¡Œ,pingç™¾åº¦çš„ç½‘å€ï¼Œæœ€ç»ˆè¾“å‡ºè¿”å›æ•°æ®</p>
<h3 id="æ‰§è¡ŒSQLè¯­å¥-fireToDB"><a href="#æ‰§è¡ŒSQLè¯­å¥-fireToDB" class="headerlink" title="æ‰§è¡ŒSQLè¯­å¥(fireToDB)"></a>æ‰§è¡ŒSQLè¯­å¥(<code>fireToDB</code>)</h3><p>é€šè¿‡è·å–æ•°æ®åº“è¿æ¥åç§°ï¼Œä¼ é€’SQLè¯­å¥,ä»¥è¿”å›SQLæŸ¥è¯¢çš„å€¼,å‡½æ•°å®šä¹‰ï¼š</p>
<ul>
<li>fireToDB(connectionName,SQL)ï¼›ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ•°æ®åº“è¿æ¥åç§°ï¼Œæˆ‘ä»¬åœ¨JNDIä¸­å®šä¹‰çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºSQLè¯­å¥</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strConn = <span class="string">"MY Connection"</span>;</span><br><span class="line"><span class="keyword">var</span> strSQL = <span class="string">"SELECT COUNT(*) FROM ..."</span>;</span><br><span class="line"><span class="keyword">var</span> xArr = fireToDB(strConn, strSQL);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä»…ä»…è·å–æ•°å€¼-getDigitsOnly"><a href="#ä»…ä»…è·å–æ•°å€¼-getDigitsOnly" class="headerlink" title="ä»…ä»…è·å–æ•°å€¼(getDigitsOnly)"></a>ä»…ä»…è·å–æ•°å€¼(<code>getDigitsOnly</code>)</h3><p>åœ¨ç»™å®šçš„å­—ç¬¦ä¸²ä¸­ä»…ä»…ç­›é€‰è¿‡æ»¤å¾—åˆ°æ•°å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"abc123cde"</span>;      </span><br><span class="line">writeToLog(getDigitsOnly(str1));<span class="comment">//è¿”å›123</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–Kettleç¯å¢ƒå˜é‡çš„å€¼-getEnvironmentVar"><a href="#è·å–Kettleç¯å¢ƒå˜é‡çš„å€¼-getEnvironmentVar" class="headerlink" title="è·å–Kettleç¯å¢ƒå˜é‡çš„å€¼(getEnvironmentVar)"></a>è·å–Kettleç¯å¢ƒå˜é‡çš„å€¼(<code>getEnvironmentVar</code>)</h3><p>è·å–åœ¨Kettleä¸­çš„ç¯å¢ƒå˜é‡çš„å€¼</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">writeToLog(getEnvironmentVar(<span class="string">"user.dir"</span>));</span><br><span class="line">writeToLog(getEnvironmentVar(<span class="string">"user.name"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–å½“å‰è¿›ç¨‹çš„å—å½±å“è¡Œæ•°-getProcessCount-type"><a href="#è·å–å½“å‰è¿›ç¨‹çš„å—å½±å“è¡Œæ•°-getProcessCount-type" class="headerlink" title="è·å–å½“å‰è¿›ç¨‹çš„å—å½±å“è¡Œæ•°(getProcessCount(type))"></a>è·å–å½“å‰è¿›ç¨‹çš„å—å½±å“è¡Œæ•°(<code>getProcessCount(type)</code>)</h3><p>æ ¹æ®ç±»å‹è·å–å½“å‰è¿›ç¨‹çš„å—å½±å“è¡Œæ•°ï¼Œç±»å‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>u:æ›´æ–°è¡Œæ•°</li>
<li>i:æ’å…¥è¡Œæ•°</li>
<li>w:å†™å…¥è¡Œæ•°</li>
<li>r:è¯»å–è¡Œæ•°</li>
<li>o:è¾“å‡ºè¡Œæ•°</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">writeToLog(getProcessCount(<span class="string">"u"</span>));</span><br><span class="line">writeToLog(getProcessCount(<span class="string">"r"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–å½“å‰è½¬æ¢åç§°-getTransformationName"><a href="#è·å–å½“å‰è½¬æ¢åç§°-getTransformationName" class="headerlink" title="è·å–å½“å‰è½¬æ¢åç§°(getTransformationName)"></a>è·å–å½“å‰è½¬æ¢åç§°(<code>getTransformationName</code>)</h3><p>è·å–å½“å‰çš„è½¬æ¢åç§°</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xTranName = getTransformationName();</span><br><span class="line">writeToLog(xTranName);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–Kettleç¯å¢ƒä¸­çš„å˜é‡å€¼-getVariable"><a href="#è·å–Kettleç¯å¢ƒä¸­çš„å˜é‡å€¼-getVariable" class="headerlink" title="è·å–Kettleç¯å¢ƒä¸­çš„å˜é‡å€¼(getVariable)"></a>è·å–Kettleç¯å¢ƒä¸­çš„å˜é‡å€¼(<code>getVariable</code>)</h3><p>ä»å½“å‰çš„Kettleç¯å¢ƒä¸­è·å–æŒ‡å®šçš„å˜é‡å€¼,ç›®å‰å‡½æ•°æœ‰2ä¸ªé‡è½½ï¼š</p>
<ul>
<li>getVariable(varName)ï¼›æ ¹æ®å˜é‡åç§°è·å–å˜é‡å€¼</li>
<li>getVariable(varName,defaultValue):æ ¹æ®å˜é‡åè·å–å€¼,å¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strVarName=<span class="string">"getVariableTest"</span>;</span><br><span class="line"><span class="keyword">var</span> strVarValue=<span class="string">"123456"</span>;</span><br><span class="line">Alert(getVariable(strVarName, <span class="string">""</span>));</span><br><span class="line">setVariable(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line">Alert(getVariable(strVarName, <span class="string">""</span>));</span><br><span class="line">strVarValue=<span class="string">"654321"</span>;</span><br><span class="line">setVariable(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line">Alert(getVariable(strVarName, <span class="string">""</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ§åˆ¶å°æ‰“å°-println"><a href="#æ§åˆ¶å°æ‰“å°-println" class="headerlink" title="æ§åˆ¶å°æ‰“å°(println)"></a>æ§åˆ¶å°æ‰“å°(<code>println</code>)</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Hello World!"</span>;</span><br><span class="line">print(str);</span><br><span class="line">      </span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç§»é™¤æ•°å€¼-removeDigits"><a href="#ç§»é™¤æ•°å€¼-removeDigits" class="headerlink" title="ç§»é™¤æ•°å€¼(removeDigits)"></a>ç§»é™¤æ•°å€¼(<code>removeDigits</code>)</h3><p>ç§»é™¤ç»™å®šå­—ç¬¦ä¸²ä¸­çš„æ•°å€¼ï¼Œä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"abc123cde"</span>; </span><br><span class="line"></span><br><span class="line">writeToLog(removeDigits(str1));<span class="comment">//è¿”å›abccde</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘é€é‚®ä»¶"><a href="#å‘é€é‚®ä»¶" class="headerlink" title="å‘é€é‚®ä»¶"></a>å‘é€é‚®ä»¶</h3><h3 id="è®¾ç½®ç¯å¢ƒå˜é‡-setEnvironmentVar"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡-setEnvironmentVar" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡(setEnvironmentVar)"></a>è®¾ç½®ç¯å¢ƒå˜é‡(<code>setEnvironmentVar</code>)</h3><p>é€šè¿‡åœ¨Scriptè„šæœ¬ç»„ä»¶ä¸­è°ƒç”¨å‡½æ•°é‡æ–°è®¾ç½®Kettleçš„ç¯å¢ƒå˜é‡</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strVarName=<span class="string">"setEnvTest"</span>;</span><br><span class="line"><span class="keyword">var</span> strVarValue=<span class="string">"123456"</span>;</span><br><span class="line">Alert(getEnvironmentVar(strVarName));</span><br><span class="line">setEnvironmentVar(strVarName,strVarValue);</span><br><span class="line">Alert(getEnvironmentVar(strVarName));</span><br><span class="line">strVarValue=<span class="string">"654321"</span>;</span><br><span class="line">setEnvironmentVar(strVarName,strVarValue);</span><br><span class="line">Alert(getEnvironmentVar(strVarName));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è®¾ç½®å˜é‡-setVariable"><a href="#è®¾ç½®å˜é‡-setVariable" class="headerlink" title="è®¾ç½®å˜é‡(setVariable)"></a>è®¾ç½®å˜é‡(<code>setVariable</code>)</h3><p>é€šè¿‡<code>setVariable</code>å‡½æ•°è®¾ç½®ç¯å¢ƒå˜é‡,è¯¥ç”¨é€”å¯ä»¥ç”¨äºé‡æ–°èµ‹å€¼Kettleç¯å¢ƒä¸­å·²ç»å­˜åœ¨çš„å˜é‡å€¼æˆ–è€…é‡æ–°ç”Ÿæˆå˜é‡å€¼</p>
<p>å‡½æ•°å®šä¹‰<code>setVariable(key,value,level)</code></p>
<ul>
<li>key:å˜é‡åç§°</li>
<li>value:å˜é‡å€¼</li>
<li>level:çº§åˆ«,ä¸»è¦åŒ…æ‹¬s(system)ã€r(root)ã€p(parent)ã€g(grandparent)å››ç§ç±»åˆ«</li>
</ul>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strVarName=<span class="string">"setEnvTest"</span>;</span><br><span class="line"><span class="keyword">var</span> strVarValue=<span class="string">"123456"</span>;</span><br><span class="line">Alert(getVariable(strVarName, <span class="string">""</span>));</span><br><span class="line">setVariable(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line">Alert(getVariable(strVarName, <span class="string">""</span>));</span><br><span class="line">strVarValue=<span class="string">"654321"</span>;</span><br><span class="line">setVariable(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line">Alert(getVariable(strVarName, <span class="string">""</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å†™å…¥æ—¥å¿—-writeToLog"><a href="#å†™å…¥æ—¥å¿—-writeToLog" class="headerlink" title="å†™å…¥æ—¥å¿—(writeToLog)"></a>å†™å…¥æ—¥å¿—(<code>writeToLog</code>)</h3><p>æ‰“å°å¹¶å†™å…¥æ—¥å¿—ä¿¡æ¯,è¯¥å‡½æ•°å¯èƒ½æ˜¯æˆ‘ä»¬ç”¨åˆ°çš„æœ€å¤šçš„å‡½æ•°,å¯ä»¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•ä¿¡æ¯,ä¸»è¦æœ‰ä¸¤ä¸ªé‡è½½ï¼š</p>
<ul>
<li>writeToLog(msg):å†™å…¥msgæ—¥å¿—ä¿¡æ¯</li>
<li>writeToLog(level,msg)ï¼šæ ¹æ®levelåŸºæœ¬å†™å…¥msgä¿¡æ¯</li>
</ul>
<p>å…³äºæ—¥å¿—çš„çº§åˆ«,è¿™é‡Œä¸»è¦æ˜¯ç®€å†™çš„æ–¹å¼,ä¸»è¦å¦‚ä¸‹ï¼š</p>
<ul>
<li>d(Debug):è°ƒè¯•æ¨¡å¼</li>
<li>l(Detailed):è¯¦ç»†</li>
<li>e(Error):é”™è¯¯</li>
<li>m(Minimal):æœ€å°æ—¥å¿—</li>
<li>r(RowLevel):è¡Œçº§æ—¥å¿—</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">writeToLog(<span class="string">"Hello World!"</span>);</span><br><span class="line">writeToLog(<span class="string">"r"</span>, <span class="string">"Hello World!"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="æ–‡ä»¶å¤„ç†ç±»å‡½æ•°-File-Functions"><a href="#æ–‡ä»¶å¤„ç†ç±»å‡½æ•°-File-Functions" class="headerlink" title="æ–‡ä»¶å¤„ç†ç±»å‡½æ•°(File Functions)"></a>æ–‡ä»¶å¤„ç†ç±»å‡½æ•°(File Functions)</h2><h3 id="å¤åˆ¶æ–‡ä»¶-copyFile"><a href="#å¤åˆ¶æ–‡ä»¶-copyFile" class="headerlink" title="å¤åˆ¶æ–‡ä»¶(copyFile)"></a>å¤åˆ¶æ–‡ä»¶(<code>copyFile</code>)</h3><p>å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•,å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p><code>copyFile(sourceFile,targetFile,overwrite)</code></p>
<ul>
<li>sourceFile:æºæ–‡ä»¶</li>
<li>targetFile:ç›®æ ‡æ–‡ä»¶</li>
<li>overWrite:æ˜¯å¦è¦†ç›–,å¦‚æœç›®æ ‡æ–‡ä»¶å­˜åœ¨çš„è¯,å¸ƒå°”ç±»å‹</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"></span><br><span class="line">copyFile(file1,targetFile,<span class="literal">false</span>)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ›å»ºæ–‡ä»¶å¤¹-createFolder"><a href="#åˆ›å»ºæ–‡ä»¶å¤¹-createFolder" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¤¹(createFolder)"></a>åˆ›å»ºæ–‡ä»¶å¤¹(<code>createFolder</code>)</h3><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹,ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strFolder = <span class="string">"F:/bak/createFolder"</span>;</span><br><span class="line">createFolder(strFolder);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ é™¤æ–‡ä»¶-deleteFile"><a href="#åˆ é™¤æ–‡ä»¶-deleteFile" class="headerlink" title="åˆ é™¤æ–‡ä»¶(deleteFile)"></a>åˆ é™¤æ–‡ä»¶(<code>deleteFile</code>)</h3><p>åˆ é™¤ä¸€ä¸ªæ–‡ä»¶(ä¸èƒ½åˆ é™¤æ–‡ä»¶å¤¹)</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"> </span><br><span class="line">deleteFile(targetFile);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨-fileExists"><a href="#åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨-fileExists" class="headerlink" title="åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨(fileExists())"></a>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨(<code>fileExists()</code>)</h3><p>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"> </span><br><span class="line">fileExists(targetFile);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–æ–‡ä»¶æ‰©å±•å-getFileExtension"><a href="#è·å–æ–‡ä»¶æ‰©å±•å-getFileExtension" class="headerlink" title="è·å–æ–‡ä»¶æ‰©å±•å(getFileExtension)"></a>è·å–æ–‡ä»¶æ‰©å±•å(<code>getFileExtension</code>)</h3><p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨,åˆ™è¿”å›null,ä»£ç ç¤ºä¾‹</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> ext=getFileExtension(file1);</span><br><span class="line">writeToLog(<span class="string">"æ‰©å±•åï¼š"</span>+ext)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–æ–‡ä»¶å¤§å°-getFileSize"><a href="#è·å–æ–‡ä»¶å¤§å°-getFileSize" class="headerlink" title="è·å–æ–‡ä»¶å¤§å°(getFileSize)"></a>è·å–æ–‡ä»¶å¤§å°(<code>getFileSize</code>)</h3><p>è·å–æ–‡ä»¶å¤§å°,ç»“æœæ˜¯ä¸€ä¸ªlongç±»å‹çš„é•¿æ•´å‹æ•°å€¼</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> ext=getFileSize(file1);</span><br><span class="line">writeToLog(<span class="string">"å¤§å°ï¼š"</span>+ext)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸ-getLastModifiedTime"><a href="#è·å–æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸ-getLastModifiedTime" class="headerlink" title="è·å–æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸ(getLastModifiedTime)"></a>è·å–æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸ(<code>getLastModifiedTime</code>)</h3><p>è·å–æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸ,å‡½æ•°å®šä¹‰ï¼š</p>
<p><code>getLastModifiedTime(filePath,format)</code></p>
<ul>
<li>filePath:æ–‡ä»¶è·¯å¾„</li>
<li>formatï¼šæ—¥æœŸæ ¼å¼åŒ–</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> ext=getLastModifiedTime(file1,<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–æ–‡ä»¶çš„çˆ¶æ–‡ä»¶å¤¹åç§°-getParentFoldername"><a href="#è·å–æ–‡ä»¶çš„çˆ¶æ–‡ä»¶å¤¹åç§°-getParentFoldername" class="headerlink" title="è·å–æ–‡ä»¶çš„çˆ¶æ–‡ä»¶å¤¹åç§°(getParentFoldername)"></a>è·å–æ–‡ä»¶çš„çˆ¶æ–‡ä»¶å¤¹åç§°(<code>getParentFoldername</code>)</h3><p>è·å–æ–‡ä»¶çš„çˆ¶æ–‡ä»¶å¤¹åç§°</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> parentFolder=getParentFoldername(file1);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–æ–‡ä»¶ç®€ç§°-getShortName"><a href="#è·å–æ–‡ä»¶ç®€ç§°-getShortName" class="headerlink" title="è·å–æ–‡ä»¶ç®€ç§°(getShortName)"></a>è·å–æ–‡ä»¶ç®€ç§°(<code>getShortName</code>)</h3><p>è·å–æ–‡ä»¶ç®€ç§°</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> shortName=getShortFilename(file1);</span><br><span class="line"></span><br><span class="line">writeToLog(<span class="string">"ç®€å•åç§°:"</span>+shortName)<span class="comment">//è¿”å›log.txt</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶-isFile"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶-isFile" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶(isFile)"></a>åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶(<code>isFile</code>)</h3><p>åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> flag=isFile(file1) <span class="comment">//true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹-isFolder"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹-isFolder" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹(isFolder)"></a>åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹(<code>isFolder</code>)</h3><p>åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> flag=isFolder(file1) <span class="comment">//false</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åŠ è½½ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹-loadFileContent"><a href="#åŠ è½½ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹-loadFileContent" class="headerlink" title="åŠ è½½ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹(loadFileContent)"></a>åŠ è½½ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹(<code>loadFileContent</code>)</h3><p>ä»æŒ‡å®šæ–‡ä»¶ä¸­åŠ è½½å†…å®¹,ä¸»è¦æœ‰ä¸¤ä¸ªé‡è½½å‡½æ•°ï¼š</p>
<ul>
<li>loadFileContent(filePath):é»˜è®¤åŠ è½½æ–‡ä»¶</li>
<li>loadFileContent(filePath,encoding):æŒ‡å®šç¼–ç åŠ è½½æ–‡ä»¶å†…å®¹</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> content=loadFileContent(file1);</span><br><span class="line"><span class="keyword">var</span> c1=loadFileContent(file1,<span class="string">"UTF-8"</span>)</span><br><span class="line">writeToLog(content)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç§»åŠ¨æ–‡ä»¶-moveFile"><a href="#ç§»åŠ¨æ–‡ä»¶-moveFile" class="headerlink" title="ç§»åŠ¨æ–‡ä»¶(moveFile)"></a>ç§»åŠ¨æ–‡ä»¶(<code>moveFile</code>)</h3><p>ç§»åŠ¨æŒ‡å®šæ–‡ä»¶ï¼Œå‡½æ•°å®šä¹‰moveFile(source,target,overWrite)</p>
<ul>
<li>source:æºæ–‡ä»¶</li>
<li>target:ç›®æ ‡æ–‡ä»¶</li>
<li>overWriteï¼›æ˜¯å¦è¦†ç›–,å¦‚æœç›®æ ‡æ–‡ä»¶å­˜åœ¨,å¸ƒå°”ç±»å‹å€¼</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"></span><br><span class="line">moveFile(file1,targetFile,<span class="literal">false</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶-touch"><a href="#åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶-touch" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶(touch)"></a>åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶(<code>touch</code>)</h3><p>åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strFile = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line">touch(strFile);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯Kettle 8.3ç‰ˆæœ¬ä¸­çš„å†…ç½®å‡½æ•°æ–¹æ³•,æ–¹æ³•å¾ˆå¤š,å†™è¿™ç¯‡åšå®¢ä¹Ÿæ˜¯å¾ˆç´¯,ç®—æ˜¯å…¨éƒ¨éƒ½å­¦ä¹ äº†ä¸€é,è„‘å­é‡Œå·²ç»è®°å¿†äº†ä¸€é,ä½†æ˜¯æˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ­»è®°ç¡¬èƒŒ,å°±å’Œæˆ‘ä»¬å­¦äº›Linuxå‘½ä»¤ä¸€æ ·,å¦‚æœä½ çŸ¥é“<code>man</code>å‘½ä»¤ï¼Œå¯¹æŸä¸ªå‘½ä»¤ä¸æ˜¯å¾ˆäº†è§£çš„è¯ç›´æ¥é€šè¿‡manå‘½ä»¤å­¦ä¹ å³å¯.</p>
<p>Kettleä¹Ÿæ˜¯å¦‚æ­¤,å¯¹äºæŸä¸ªå‡½æ•°ä¸æ˜¯å¾ˆäº†è§£çš„è¯,å³é”®ç‚¹å‡»è¯¥å‡½æ•°,ä¼šå‡ºç°<code>sample</code>å­—æ ·èœå•,ç‚¹å‡»è¯¥èœå•å³å¯å¼¹å‡ºè¯¥å‡½æ•°çš„ä»‹ç»å’Œä½¿ç”¨ä¿¡æ¯,é‡Œé¢åŒ…å«äº†è¯¥å‡½æ•°çš„è°ƒç”¨ç¤ºä¾‹å’Œå‡½æ•°è¯¦ç»†ä»‹ç»,ä¹Ÿæ˜¯å¾ˆäººæ€§åŒ–çš„.</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/07/28/sqlite/"><img class="fill" src="/images/default.jpeg" alt="SQLiteå­¦ä¹ ã€ä¸€ã€‘"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-28T05:43:59.000Z" title="2021/7/28 ä¸‹åˆ1:43:59">2021-07-28</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-02-23T09:21:16.940Z" title="2022/2/23 ä¸‹åˆ5:21:16">2022-02-23</time>æ›´æ–°</span><span class="level-item">1 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦181ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/28/sqlite/">SQLiteå­¦ä¹ ã€ä¸€ã€‘</a></h1><div class="content"><span id="more"></span>
<figure class="highlight sql"><figcaption><span>SQLiteå­¦ä¹ .sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--åˆ›å»ºæ•°æ®åº“(æ•°æ®åº“åå¯ä»¥æ˜¯ä»»ä½•åå­—ï¼Œæ–‡ä»¶ç±»å‹å§‹ç»ˆä¸ºsqliteç±»å‹)</span></span><br><span class="line">sqlite3 test.sqlite</span><br><span class="line">sqlite3 other.db</span><br><span class="line">sqlite3 db.sqlite3</span><br><span class="line"></span><br><span class="line"><span class="comment">--åˆ›å»ºæ•°æ®è¡¨ å¢åˆ æ”¹æŸ¥ SQLite</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> DEPARTMENT(</span><br><span class="line">   ID <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY      <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   DEPT           <span class="type">CHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   EMP_ID         <span class="type">INT</span>      <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>  Test(</span><br><span class="line">   ID <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   NAME           TEXT    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   AGE            <span class="type">INT</span>     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   ADDRESS        <span class="type">CHAR</span>(<span class="number">50</span>),</span><br><span class="line">   SALARY         <span class="type">REAL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="string">'table'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span>  DEPARTMENT;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="string">'table'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--å¢</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `Test` (ID, NAME, AGE, ADDRESS, SALARY) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">'æµ‹è¯•äººå‘˜'</span>,<span class="number">35</span>,<span class="string">'ä¸œåŒ—é‚£æ—®ç˜©'</span>,<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `Test` (ID, NAME, AGE, ADDRESS, SALARY)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="string">'æµ‹è¯•äººå‘˜'</span>,<span class="number">35</span>,<span class="string">'ä¸œåŒ—é‚£æ—®ç˜©'</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> Test ;</span><br><span class="line"><span class="comment">--åˆ </span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">from</span> `Test` <span class="keyword">where</span> ID<span class="operator">=</span><span class="string">'1'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> Test ;</span><br><span class="line"></span><br><span class="line"><span class="comment">--æ”¹</span></span><br><span class="line">update `Test` <span class="keyword">set</span> Name <span class="operator">=</span><span class="string">'æµ‹è¯•äººå‘˜2'</span> <span class="keyword">where</span> ID<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> `Test`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> Test;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="string">'table'</span>;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/07/21/CSharp%E7%A9%BF%E9%80%8Fsession%E9%9A%94%E7%A6%BB%E2%80%94%E2%80%94%E2%80%94Windows%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8UI%E4%BA%A4%E4%BA%92%E7%A8%8B%E5%BA%8F/"><img class="fill" src="/images/default.jpeg" alt="C#ç©¿é€sessionéš”ç¦»â€”â€”â€”WindowsæœåŠ¡å¯åŠ¨UIäº¤äº’ç¨‹åº"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-21T03:28:37.000Z" title="2021/7/21 ä¸Šåˆ11:28:37">2021-07-21</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-02-23T09:21:12.928Z" title="2022/2/23 ä¸‹åˆ5:21:12">2022-02-23</time>æ›´æ–°</span><span class="level-item">9 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1296ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/21/CSharp%E7%A9%BF%E9%80%8Fsession%E9%9A%94%E7%A6%BB%E2%80%94%E2%80%94%E2%80%94Windows%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8UI%E4%BA%A4%E4%BA%92%E7%A8%8B%E5%BA%8F/">C#ç©¿é€sessionéš”ç¦»â€”â€”â€”WindowsæœåŠ¡å¯åŠ¨UIäº¤äº’ç¨‹åº</a></h1><div class="content"><span id="more"></span>

<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>ä¸€å¼€å§‹æ˜¯å› ä¸ºæœåŠ¡å™¨ç»å¸¸ä¼šå‡ºç°æ–­ç”µã€ç³»ç»Ÿå´©æºƒçš„æƒ…å†µï¼Œå¯¼è‡´ä¸€äº›æ­£å¸¸è¿è¡Œçš„winformç¨‹åºåœ¨ç³»ç»Ÿæ•…éšœé‡å¯åï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨ç™»å½•è§¦å‘äº‹ä»¶è®©ç¨‹åºè‡ªå¯ã€‚ç„¶åæƒ³åˆ©ç”¨windowsæœåŠ¡åœ¨å¼€å¯æ—¶å°±ä¼šè‡ªå¯æ¥å®ç°å¼€æœºå¯åŠ¨Winformç¨‹åºã€‚<br>ä½†æ˜¯å› ä¸ºä»Vista å¼€å§‹å¼•å…¥äº† Session 0 éš”ç¦»æœºåˆ¶ï¼Œå¯¼è‡´windowsæœåŠ¡æ— æ³•ç›´æ¥è¿›è¡Œç•Œé¢äº¤äº’æ“ä½œã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong><br>ä½¿ç”¨CreateProcessAsUserä¸ç•Œé¢äº¤äº’éœ€è¦Session Id &gt;0 ï¼Œ<strong>ç”¨æˆ·ä¼šè¯çš„å¿…é¡»å­˜åœ¨</strong>ï¼Œå¦‚æœå­˜åœ¨æœåŠ¡å™¨é‡å¯ã€æ³¨é”€åï¼Œé‡æ–°å¼€æœºå¯¼è‡´ç³»ç»Ÿåªæœ‰Session 0å­˜åœ¨ï¼Œæ­¤æ—¶æœåŠ¡è°ƒç”¨åçš„ç¨‹åºæ˜¯ä¸ä¼šæ˜¾ç¤ºç•Œé¢çš„ã€‚<br>æ‰€ä»¥åˆ°å¤´æ¥è¿˜æ˜¯æ²¡èƒ½å®ç°æˆ‘çš„æƒ³æ³•ã€‚ã€‚ã€‚æ·¦</p>
<h3 id="Session-0-éš”ç¦»åŸç†"><a href="#Session-0-éš”ç¦»åŸç†" class="headerlink" title="Session 0 éš”ç¦»åŸç†"></a>Session 0 éš”ç¦»åŸç†</h3><p>å‚è€ƒï¼š</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gnielee/archive/2010/04/07/session0-isolation-part1.html">ç©¿é€Session 0 éš”ç¦»ï¼ˆä¸€ï¼‰</a><br>æ‘˜å½•<br><a target="_blank" rel="noopener" href="https://www.daimajiaoliu.com/daima/476136b999003e8">ç”¨æˆ·ç•Œé¢ç‰¹æƒéš”ç¦»</a></p>
<blockquote>
<p>åœ¨æ—©æœŸçš„Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œåœ¨åŒä¸€ç”¨æˆ·ä¸‹è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹æœ‰ç€ç›¸åŒçš„å®‰å…¨ç­‰çº§ï¼Œæ‹¥æœ‰ç›¸åŒçš„æƒé™ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥è‡ªç”±åœ°å‘é€ä¸€ä¸ªWindowsæ¶ˆæ¯åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹çš„çª—å£ã€‚ä»Windows Vistaå¼€å§‹ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬Windows 7ã€Windows 10ï¼Œå¯¹äºæŸäº›Windowsæ¶ˆæ¯ï¼Œè¿™ä¸€æ–¹å¼å†ä¹Ÿè¡Œä¸é€šäº†ã€‚è¿›ç¨‹(æˆ–è€…å…¶ä»–çš„å¯¹è±¡)å¼€å§‹æ‹¥æœ‰ä¸€ä¸ªæ–°çš„å±æ€§â€”â€”ç‰¹æƒç­‰çº§(Privilege Level)ã€‚ä¸€ä¸ªç‰¹æƒç­‰çº§è¾ƒä½çš„è¿›ç¨‹ä¸å†å¯ä»¥å‘ä¸€ä¸ªç‰¹æƒç­‰çº§è¾ƒé«˜çš„è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œè™½ç„¶ä»–ä»¬åœ¨ç›¸åŒçš„ç”¨æˆ·æƒé™ä¸‹è¿è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„ç”¨æˆ·ç•Œé¢ç‰¹æƒéš”ç¦»(User Interface Privilege Isolation ï¼ŒUIPI)ã€‚</p>
<p>UIPIçš„å¼•å…¥ï¼Œæœ€å¤§çš„ç›®çš„æ˜¯é˜²æ­¢æ¶æ„ä»£ç å‘é€æ¶ˆæ¯ç»™é‚£äº›æ‹¥æœ‰è¾ƒé«˜æƒé™çš„çª—å£ä»¥å¯¹å…¶è¿›è¡Œæ”»å‡»ï¼Œä»è€Œè·å–è¾ƒé«˜çš„æƒé™ç­‰ç­‰ï¼Œåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œè¿™å´æ˜¯ä¸€ç§ç»´æŠ¤ç³»ç»Ÿå®‰å…¨çš„åˆé€‚æ–¹å¼ã€‚</p>
</blockquote>
</blockquote>
<h3 id="windowsæœåŠ¡å¯åŠ¨UIç¨‹åºã€"><a href="#windowsæœåŠ¡å¯åŠ¨UIç¨‹åºã€" class="headerlink" title="windowsæœåŠ¡å¯åŠ¨UIç¨‹åºã€"></a>windowsæœåŠ¡å¯åŠ¨UIç¨‹åºã€</h3><p>å¯¹äºç®€å•çš„äº¤äº’ï¼ŒæœåŠ¡å¯ä»¥é€šè¿‡WTSSendMessage å‡½æ•°ï¼Œåœ¨ç”¨æˆ·Session ä¸Šæ˜¾ç¤ºæ¶ˆæ¯çª—å£ã€‚å¯¹äºä¸€äº›å¤æ‚çš„UI äº¤äº’ï¼Œå¿…é¡»è°ƒç”¨CreateProcessAsUser æˆ–å…¶ä»–æ–¹æ³•ï¼ˆWCFã€.NETè¿œç¨‹å¤„ç†ç­‰ï¼‰è¿›è¡Œè·¨Session é€šä¿¡ï¼Œåœ¨æ¡Œé¢ç”¨æˆ·ä¸Šåˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºç•Œé¢ã€‚</p>
<p>è§£å†³æ€è·¯æ˜¯ï¼šwindow serviceåˆ›å»ºä¸€ä¸ªå’Œä¸å½“å‰ç™»é™†ç”¨æˆ·å¯ä»¥äº¤äº’çš„è¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹è¿è¡Œåœ¨adminæƒé™ä¸‹ï¼Œèƒ½å¤Ÿè°ƒèµ·åº”ç”¨ç¨‹åºçš„UI</p>
<p>å…·ä½“çš„åšæ³•æ˜¯ï¼šwidow serviceå¤åˆ¶winlogon.exeè¿›ç¨‹å¥æŸ„ï¼Œç„¶åé€šè¿‡è°ƒç”¨apiå‡½æ•°CreateProcessAsUserï¼ˆï¼‰ä»¥winlogon.exeæƒé™åˆ›å»ºæ–°è¿›ç¨‹ï¼Œæ–°åˆ›å»ºçš„è¿›ç¨‹æœ‰winlogon.exeçš„æƒé™ï¼ˆwinlogon.exeè¿è¡Œåœ¨systemæƒé™ä¸‹ï¼‰ï¼Œè´Ÿè´£è°ƒç”¨ç¨‹åºã€‚</p>
<blockquote>
<p>ä½œè€…åŸæ–‡ï¼š</p>
<p>First, we are going to create a Windows Service that runs under the System account. This service will be responsible for spawning an interactive process within the currently active Userâ€™s Session. This newly created process will display a UI and run with full admin rights. When the first User logs on to the computer, this service will be started and will be running in Session0; however the process that this service spawns will be running on the desktop of the currently logged on User. We will refer to this service as the LoaderService.</p>
<p>Next, the winlogon.exe process is responsible for managing User login and logout procedures. We know that every User who logs on to the computer will have a unique Session ID and a corresponding winlogon.exe process associated with their Session. Now, we mentioned above, the LoaderService runs under the System account. We also confirmed that each winlogon.exe process on the computer runs under the System account. Because the System account is the owner of both the LoaderService and the winlogon.exe processes, our LoaderService can copy the access token (and Session ID) of the winlogon.exe process and then call the Win32 API function CreateProcessAsUser to launch a process into the currently active Session of the logged on User. Since the Session ID located within the access token of the copied winlogon.exe process is greater than 0, we can launch an interactive process using that token.</p>
</blockquote>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows/win32/services/interactive-services?redirectedfrom=MSDN">äº¤äº’å¼æœåŠ¡</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wyy1234/p/10191958.html">C#å¼€å‘WindowsæœåŠ¡è¯¦ç»†æµç¨‹</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/CityOfThousandFires/p/10375242.html">C#ç©¿é€sessionéš”ç¦»â€”â€”â€”WindowsæœåŠ¡å¯åŠ¨UIäº¤äº’ç¨‹åº</a><br><a target="_blank" rel="noopener" href="https://www.codeproject.com/Articles/35773/Subverting-Vista-UAC-in-Both-32-and-64-bit-Archite">Subverting Vista UAC in Both 32 and 64 bit Architectures</a></p>
<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>windowsæœåŠ¡å¯åŠ¨winformç¨‹åºä¸æ˜¾ç¤ºUIé—®é¢˜è§£å†³<br>åŸå› ï¼š<br>xpç³»ç»Ÿçš„ç”¨æˆ·å’Œwindow serviceè¿è¡Œåœ¨ä¸€ä¸ªsessionä¸‹ï¼Œåœ¨xpä»¥åï¼Œwindowsç³»ç»Ÿæ”¹å˜äº†ç”¨æˆ·ä¼šè¯ç®¡ç†çš„ç­–ç•¥ï¼Œwindow serviceç‹¬ç«‹è¿è¡Œåœ¨session0ä¸‹ï¼Œä¾æ¬¡ç»™åç»­çš„ç™»å½•ç”¨æˆ·åˆ†é…sessionX(X =1,2,3â€¦)ï¼Œsession0æ²¡æœ‰æƒé™è¿è¡ŒUIã€‚æ‰€ä»¥åœ¨window xpä»¥åçš„ç³»ç»Ÿä¸‹ï¼Œwindow serviceè°ƒç”¨æœ‰UIçš„applicationæ—¶åªèƒ½çœ‹åˆ°ç¨‹åºè¿›ç¨‹ä½†ä¸èƒ½è¿è¡Œç¨‹åºçš„UIã€‚</p>
<p>å‚è€ƒï¼š<br><strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/buli93/p/7086440.html">C# windowsæœåŠ¡å¯åŠ¨winformç¨‹åºä¸æ˜¾ç¤ºUIé—®é¢˜è§£å†³</a></strong><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/267838/how-can-a-windows-service-execute-a-gui-application">How can a Windows service execute a GUI application?</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gnielee/archive/2010/04/08/session0-isolation-part2.html">ç©¿é€Session 0 éš”ç¦»ï¼ˆäºŒï¼‰</a></p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/07/20/Win1020H2%E4%B8%AD%E6%96%87%E8%AF%AD%E8%A8%80%E4%B8%8B%E6%B7%BB%E5%8A%A0%E7%BE%8E%E5%BC%8F%E9%94%AE%E7%9B%98/"><img class="fill" src="/images/default.jpeg" alt="Win10ä¸­æ–‡è¯­è¨€ä¸‹æ·»åŠ ç¾å¼é”®ç›˜"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-20T03:46:40.000Z" title="2021/7/20 ä¸Šåˆ11:46:40">2021-07-20</time>å‘è¡¨</span><span class="level-item"><time dateTime="2022-02-23T09:21:04.239Z" title="2022/2/23 ä¸‹åˆ5:21:04">2022-02-23</time>æ›´æ–°</span><span class="level-item">1 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦219ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/20/Win1020H2%E4%B8%AD%E6%96%87%E8%AF%AD%E8%A8%80%E4%B8%8B%E6%B7%BB%E5%8A%A0%E7%BE%8E%E5%BC%8F%E9%94%AE%E7%9B%98/">Win10ä¸­æ–‡è¯­è¨€ä¸‹æ·»åŠ ç¾å¼é”®ç›˜</a></h1><div class="content"><p>ä¸ªäººæ“ä½œä¹ æƒ¯ä½¿ç”¨Ctrl+Shiftåˆ‡æ¢é”®ç›˜å¸ƒå±€ï¼Œä½†æ˜¯win10çš„æ›´æ–°ä¼šç»å¸¸æ€§å¯¼è‡´è¾“å…¥æ³•çš„é—®é¢˜å‡ºç°ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¹³æ—¶æ”¶é›†åˆ°çš„æ–¹æ³•ã€‚</p></div><a class="article-more button is-small is-size-7" href="/2021/07/20/Win1020H2%E4%B8%AD%E6%96%87%E8%AF%AD%E8%A8%80%E4%B8%8B%E6%B7%BB%E5%8A%A0%E7%BE%8E%E5%BC%8F%E9%94%AE%E7%9B%98/#more">é˜…è¯»æ›´å¤š</a></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/4/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="/page/6/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/4/">4</a></li><li><a class="pagination-link is-current" href="/page/5/">5</a></li><li><a class="pagination-link" href="/page/6/">6</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/9/">9</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Blog/"><span class="level-start"><span class="level-item">Blog</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Csharp/"><span class="level-start"><span class="level-item">Csharp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Technology/"><span class="level-start"><span class="level-item">Technology</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/VUE/"><span class="level-start"><span class="level-item">VUE</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/cranky/"><span class="level-start"><span class="level-item">cranky</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/node/"><span class="level-start"><span class="level-item">node</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/other/"><span class="level-start"><span class="level-item">other</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">å‰ç«¯</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%BD%AC%E8%BD%BD/"><span class="level-start"><span class="level-item">è½¬è½½</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-07T01:15:07.000Z">2022-09-07</time></p><p class="title"><a href="/2022/09/07/sqlserver%E6%97%A5%E5%BF%97%E5%A2%9E%E9%95%BF%E8%BF%87%E5%BF%AB%E5%BA%94%E5%AF%B9%E7%AD%96%E7%95%A5/">sqlserveræ—¥å¿—å¢é•¿è¿‡å¿«åº”å¯¹ç­–ç•¥</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-05T11:53:27.000Z">2022-09-05</time></p><p class="title"><a href="/2022/09/05/SQLSERVER%E5%8F%82%E6%95%B0%E5%8C%96%E6%9F%A5%E8%AF%A2%E7%BC%93%E6%85%A2%E9%97%AE%E9%A2%98/">SQLSERVERå‚æ•°åŒ–æŸ¥è¯¢ç¼“æ…¢é—®é¢˜</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2022/08/31/%E4%BD%BF%E7%94%A8JMeter%E8%BF%9B%E8%A1%8C%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/"><img src="/images/default.jpeg" alt="ä½¿ç”¨JMeterè¿›è¡Œå‹åŠ›æµ‹è¯•"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-08-31T06:40:24.000Z">2022-08-31</time></p><p class="title"><a href="/2022/08/31/%E4%BD%BF%E7%94%A8JMeter%E8%BF%9B%E8%A1%8C%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/">ä½¿ç”¨JMeterè¿›è¡Œå‹åŠ›æµ‹è¯•</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-26T08:16:11.000Z">2022-08-26</time></p><p class="title"><a href="/2022/08/26/vsocde%E4%BE%BF%E6%90%BA%E7%89%88%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94%E5%9B%BE%E6%A0%87/">vsocdeä¾¿æºç‰ˆè®¾ç½®æ–‡ä»¶å…³è”å›¾æ ‡</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-23T03:19:36.000Z">2022-08-23</time></p><p class="title"><a href="/2022/08/23/Nginx%E5%88%9D%E8%AF%86%E3%80%90%E4%BA%8C%E3%80%91/">Nginxåˆè¯†ã€äºŒã€‘</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">ä¹æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">å…«æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">å››æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">ä¸‰æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">äºŒæœˆ 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">åäºŒæœˆ 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">åæœˆ 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">ä¹æœˆ 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">å…«æœˆ 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">åä¸€æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">ä¹æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">å…«æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">åäºŒæœˆ 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">åä¸€æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">åæœˆ 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">å››æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">ä¸‰æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ADO-NET/"><span class="tag">ADO.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-NET/"><span class="tag">ASP.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-Net-MVC/"><span class="tag">ASP.Net MVC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C#</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gmail/"><span class="tag">Gmail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IIS/"><span class="tag">IIS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mail/"><span class="tag">Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Markdown/"><span class="tag">Markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Oracle/"><span class="tag">Oracle</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Postman/"><span class="tag">Postman</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SOAP/"><span class="tag">SOAP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQLlite/"><span class="tag">SQLlite</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/System-Net-Mail/"><span class="tag">System.Net.Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Technology/"><span class="tag">Technology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML/"><span class="tag">XML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emoji/"><span class="tag">emoji</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kettle/"><span class="tag">kettle</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live2d/"><span class="tag">live2d</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shadowsocks/"><span class="tag">shadowsocks</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql-server/"><span class="tag">sql server</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlserver/"><span class="tag">sqlserver</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/v2ray/"><span class="tag">v2ray</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmess/"><span class="tag">vmess</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webservice/"><span class="tag">webservice</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"><span class="tag">å‘é€é‚®ä»¶</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%90%E6%A7%BD/"><span class="tag">åæ§½</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"><span class="tag">å‘½ä»¤è¡Œ</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%84%9F%E6%83%B3/"><span class="tag">æ„Ÿæƒ³</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%88%90%E9%95%BF/"><span class="tag">æˆé•¿</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%99%E8%82%B2/"><span class="tag">æ•™è‚²</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%AD%BB%E9%94%81/"><span class="tag">æ­»é”</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%B0%E5%BD%95/"><span class="tag">è®°å½•</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B4%9F%E8%83%BD%E9%87%8F/"><span class="tag">è´Ÿèƒ½é‡</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AC%E8%BD%BD/"><span class="tag">è½¬è½½</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7/"><span class="tag">è½¯ä»¶ç‰ˆæœ¬å·</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/"><span class="tag">é€ŸæŸ¥è¡¨</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81/"><span class="tag">é‚®ä»¶å‘é€</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%85%8D%E7%BD%AE/"><span class="tag">é…ç½®</span><span class="tag">2</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Choose C</a><p class="is-size-7"><span>&copy; 2022 zhang</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">Ã—</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>