<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>不知选啥就选C</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Choose C"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Choose C"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="一个记录生活的Blog"><meta property="og:type" content="blog"><meta property="og:title" content="不知选啥就选C"><meta property="og:url" content="https://yuanjianzhang.github.io/"><meta property="og:site_name" content="不知选啥就选C"><meta property="og:description" content="一个记录生活的Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://yuanjianzhang.github.io/img/og_image.png"><meta property="article:author" content="zhang"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://yuanjianzhang.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yuanjianzhang.github.io"},"headline":"不知选啥就选C","image":["https://yuanjianzhang.github.io/img/og_image.png"],"author":{"@type":"Person","name":"zhang"},"publisher":{"@type":"Organization","name":"不知选啥就选C","logo":{"@type":"ImageObject","url":{"text":"Choose C"}}},"description":"一个记录生活的Blog"}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Choose C</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/categories/Technology">技术</a><a class="navbar-item" href="/other">树洞</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/12/01/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E3%80%90%E4%B8%80%E3%80%91/"><img class="fill" src="/images/default.jpeg" alt="判断文件类型【一】"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-01T08:54:21.000Z" title="2021/12/1 下午4:54:21">2021-12-01</time>发表</span><span class="level-item"><time dateTime="2022-07-22T03:07:20.600Z" title="2022/7/22 上午11:07:20">2022-07-22</time>更新</span><span class="level-item">6 分钟读完 (大约906个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/01/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E3%80%90%E4%B8%80%E3%80%91/">判断文件类型【一】</a></h1><div class="content"><span id="more"></span>

<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>现有一文件，其扩展名未知或标记错误。假设它是一个正常的、非空的文件，且将扩展名更正后可以正常使用，那么，如何判断它是哪种类型的文件？</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>使用文件签名来判断实际文件类型，又称<code>magic numbers</code> 或 <code>Magic Bytes</code>。关于文件签名介绍，参考<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_file_signatures">List of file signatures</a></p>
<p><strong>Magic Number</strong>:</p>
<ul>
<li>magic number是嵌入在文件开头或附近的数字，指示其文件格式（即文件的类型）。</li>
<li>我们看不到这个数字。</li>
<li>每个文件都有一个数字，代表文件类型的名称，它是十六进制格式。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature/13614746#13614746">C#实现参考</a>：</p>
<h3 id="C-实现"><a href="#C-实现" class="headerlink" title="C#实现"></a>C#实现</h3><figure class="highlight csharp"><figcaption><span>example.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MimeType</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] BMP = { <span class="number">66</span>, <span class="number">77</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] DOC = { <span class="number">208</span>, <span class="number">207</span>, <span class="number">17</span>, <span class="number">224</span>, <span class="number">161</span>, <span class="number">177</span>, <span class="number">26</span>, <span class="number">225</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] EXE_DLL = { <span class="number">77</span>, <span class="number">90</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] GIF = { <span class="number">71</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">56</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] ICO = { <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] JPG = { <span class="number">255</span>, <span class="number">216</span>, <span class="number">255</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] MP3 = { <span class="number">255</span>, <span class="number">251</span>, <span class="number">48</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] OGG = { <span class="number">79</span>, <span class="number">103</span>, <span class="number">103</span>, <span class="number">83</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] PDF = { <span class="number">37</span>, <span class="number">80</span>, <span class="number">68</span>, <span class="number">70</span>, <span class="number">45</span>, <span class="number">49</span>, <span class="number">46</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] PNG = { <span class="number">137</span>, <span class="number">80</span>, <span class="number">78</span>, <span class="number">71</span>, <span class="number">13</span>, <span class="number">10</span>, <span class="number">26</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">13</span>, <span class="number">73</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">82</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] RAR = { <span class="number">82</span>, <span class="number">97</span>, <span class="number">114</span>, <span class="number">33</span>, <span class="number">26</span>, <span class="number">7</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] SWF = { <span class="number">70</span>, <span class="number">87</span>, <span class="number">83</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TIFF = { <span class="number">73</span>, <span class="number">73</span>, <span class="number">42</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TORRENT = { <span class="number">100</span>, <span class="number">56</span>, <span class="number">58</span>, <span class="number">97</span>, <span class="number">110</span>, <span class="number">110</span>, <span class="number">111</span>, <span class="number">117</span>, <span class="number">110</span>, <span class="number">99</span>, <span class="number">101</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TTF = { <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] WAV_AVI = { <span class="number">82</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">70</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] WMV_WMA = { <span class="number">48</span>, <span class="number">38</span>, <span class="number">178</span>, <span class="number">117</span>, <span class="number">142</span>, <span class="number">102</span>, <span class="number">207</span>, <span class="number">17</span>, <span class="number">166</span>, <span class="number">217</span>, <span class="number">0</span>, <span class="number">170</span>, <span class="number">0</span>, <span class="number">98</span>, <span class="number">206</span>, <span class="number">108</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] ZIP_DOCX = { <span class="number">80</span>, <span class="number">75</span>, <span class="number">3</span>, <span class="number">4</span> };</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">GetMimeType</span>(<span class="params"><span class="built_in">byte</span>[] file, <span class="built_in">string</span> fileName</span>)</span></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> mime = <span class="string">"application/octet-stream"</span>; <span class="comment">//DEFAULT UNKNOWN MIME TYPE</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Ensure that the filename isn't empty or null</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrWhiteSpace(fileName))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> mime;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get the file extension</span></span><br><span class="line">        <span class="built_in">string</span> extension = Path.GetExtension(fileName) == <span class="literal">null</span></span><br><span class="line">                               ? <span class="built_in">string</span>.Empty</span><br><span class="line">                               : Path.GetExtension(fileName).ToUpper();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get the MIME Type</span></span><br><span class="line">        <span class="keyword">if</span> (file.Take(<span class="number">2</span>).SequenceEqual(BMP))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/bmp"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">8</span>).SequenceEqual(DOC))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/msword"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">2</span>).SequenceEqual(EXE_DLL))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-msdownload"</span>; <span class="comment">//both use same mime type</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(GIF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/gif"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(ICO))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/x-icon"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(JPG))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/jpeg"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(MP3))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"audio/mpeg"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">14</span>).SequenceEqual(OGG))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (extension == <span class="string">".OGX"</span>)</span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"application/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (extension == <span class="string">".OGA"</span>)</span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"audio/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"video/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">7</span>).SequenceEqual(PDF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/pdf"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">16</span>).SequenceEqual(PNG))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/png"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">7</span>).SequenceEqual(RAR))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-rar-compressed"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(SWF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-shockwave-flash"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(TIFF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/tiff"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">11</span>).SequenceEqual(TORRENT))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-bittorrent"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">5</span>).SequenceEqual(TTF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-font-ttf"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(WAV_AVI))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".AVI"</span> ? <span class="string">"video/x-msvideo"</span> : <span class="string">"audio/x-wav"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">16</span>).SequenceEqual(WMV_WMA))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".WMA"</span> ? <span class="string">"audio/x-ms-wma"</span> : <span class="string">"video/x-ms-wmv"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(ZIP_DOCX))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".DOCX"</span> ? <span class="string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span> : <span class="string">"application/x-zip-compressed"</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mime;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h3><p>摘录部份常用文件HEX签名,来源<a target="_blank" rel="noopener" href="https://www.garykessler.net/library/file_sigs.html">GCK’S FILE SIGNATURES TABLE</a></p>
<table>
<thead>
<tr>
<th align="left">十六进制签名</th>
<th align="right"></th>
<th align="left">ASCII 签名</th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="right">文件扩展名</td>
<td align="left">文件描述</td>
</tr>
<tr>
<td align="left">50 4B 03 04</td>
<td align="right"></td>
<td align="left">PK..</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">ZIP</td>
<td align="left">PKZIP archive file (Ref. 1  Ref. 2)<br>        Trailer: filename 50 4B 17 characters 00 00 00<br>        Trailer: (filename PK 17 characters …)<br>        Note: PK are the initals of Phil Katz, co-creator of the ZIP file format and author of PKZIP.</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">ZIP</td>
<td align="left">Apple Mac OS X Dashboard Widget, Aston Shell theme, Oolite eXpansion Pack,<br>        Opera Widget, Pivot Style Template, Rockbox Theme package, Simple Machines<br>        Forums theme, SubEthaEdit Mode, Trillian zipped skin, Virtual Skipper skin</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">APK</td>
<td align="left">Android package</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">JAR</td>
<td align="left">Java archive; compressed file package for classes and data</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">KMZ</td>
<td align="left">Google Earth saved working session file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">KWD</td>
<td align="left">KWord document</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">ODT, ODP, OTT</td>
<td align="left">OpenDocument text document, presentation, and text document template, respectively.</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">OXPS</td>
<td align="left">Microsoft Open XML paper specification file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">SXC, SXD, SXI, SXW</td>
<td align="left">OpenOffice spreadsheet (Calc), drawing (Draw), presentation (Impress),and word processing (Writer) files, respectively.</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">SXC</td>
<td align="left">StarOffice spreadsheet</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">WMZ</td>
<td align="left">Windows Media compressed skin file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">XPI</td>
<td align="left">Mozilla Browser Archive</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">XPS</td>
<td align="left">XML paper specification file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">XPT</td>
<td align="left">eXact Packager Models</td>
</tr>
</tbody></table>
<h4 id="HEX（十六进制）转换byte数组"><a href="#HEX（十六进制）转换byte数组" class="headerlink" title="HEX（十六进制）转换byte数组"></a>HEX（十六进制）转换byte数组</h4><p>javascript在线计算：</p>
<iframe height="300" style="width: 100%;" scrolling="no" title="HEX Convert Code Part" src="https://codepen.io/soyobean/embed/zYWoJLB?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/soyobean/pen/zYWoJLB">
  HEX Convert Code Part</a> by soyobean (<a target="_blank" rel="noopener" href="https://codepen.io/soyobean">@soyobean</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.
</iframe>

<p>资料：<br><a target="_blank" rel="noopener" href="https://github.com/Muraad/Mime-Detective">Mime-Detective</a></p>
<p>文件签名表格：<br><a target="_blank" rel="noopener" href="https://www.garykessler.net/library/file_sigs.html">GCK’S FILE SIGNATURES TABLE</a></p>
<p>参考资料：<br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Magic_number_%28programming%29#In_files">Magic number</a><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_file_signatures">List of file signatures</a></p>
<p>拓展阅读：<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/think-in-java/p/5527389.html">byte为什么要与上0xff？</a></p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/21/Markdown%E8%AF%AD%E6%B3%95%E9%80%9F%E6%9F%A5%E8%A1%A8/"><img class="fill" src="/images/default.jpeg" alt="Markdown语法速查表"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-21T02:31:02.000Z" title="2021/10/21 上午10:31:02">2021-10-21</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:44.236Z" title="2022/2/23 下午5:21:44">2022-02-23</time>更新</span><span class="level-item">2 分钟读完 (大约308个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/Markdown%E8%AF%AD%E6%B3%95%E9%80%9F%E6%9F%A5%E8%A1%A8/">Markdown语法速查表</a></h1><div class="content"><span id="more"></span>
<h2 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h2><p>此 Markdown 语法速查表提供了所有 Markdown 语法元素的快速参考。但是此速查表无法涵盖所有极限用法，因此，如果您需要某些语法元素的详细信息，请参阅我们的 <a href="/basic-syntax">basic syntax</a>  和 <a href="/extended-syntax">extended syntax</a> 手册。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>这些是 John Gruber 的原始设计文档中列出的元素。所有 Markdown 应用程序都支持这些元素。</p>
<table class="table table-bordered">
  <thead class="thead-light">
    <tr>
      <th>元素</th>
      <th>Markdown 语法</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/basic-syntax/#headings">Heading</a></td>
      <td>
        <code># H1<br>## H2<br>### H3</code>
        </td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#bold">Bold</a></td>
      <td><code>**bold text**</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#italic">Italic</a></td>
      <td><code>*italicized text*</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#blockquotes-1">Blockquote</a></td>
      <td><code>&gt; blockquote</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#ordered-lists">Ordered List</a></td>
      <td><code>
        1. First item<br>
        2. Second item<br>
        3. Third item<br>
      </code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#unordered-lists">Unordered List</a></td>
      <td>
        <code>
          - First item<br>
          - Second item<br>
          - Third item<br>
        </code>
      </td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#code">Code</a></td>
      <td><code>`code`</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#horizontal-rules">Horizontal Rule</a></td>
      <td><code>---</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#links">Link</a></td>
      <td><code>[title](https://www.example.com)</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#images-1">Image</a></td>
      <td><code>![alt text](image.jpg)</code></td>
    </tr>
  </tbody>
</table>

<h2 id="扩展语法"><a href="#扩展语法" class="headerlink" title="扩展语法"></a>扩展语法</h2><p>这些元素通过添加额外的功能扩展了基本语法。但是，并非所有 Markdown 应用程序都支持这些元素。</p>
<table class="table table-bordered">
  <thead class="thead-light">
    <tr>
      <th>Element</th>
      <th>Markdown Syntax</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/extended-syntax/#tables">Table</a></td>
      <td><code>| Syntax      | Description |<br>
                | ----------- | ----------- |<br>
                | Header      | Title       |<br>
                | Paragraph   | Text        |
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#fenced-code-blocks">Fenced Code Block</a></td>
      <td><code>```<br>
      {<br>
      &nbsp;&nbsp;"firstName": "John",<br>
      &nbsp;&nbsp;"lastName": "Smith",<br>
      &nbsp;&nbsp;"age": 25<br>
      }<br>
      ```
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#footnotes">Footnote</a></td>
      <td><code>
        Here's a sentence with a footnote. [^1]<br><br>
        [^1]: This is the footnote.
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#heading-ids">Heading ID</a></td>
      <td><code>### My Great Heading </code></td></tr></tbody></table></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/"><img class="fill" src="/images/default.jpeg" alt="sql server 中的数组和列表（转载）"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-21T01:39:08.000Z" title="2021/10/21 上午9:39:08">2021-10-21</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:51.377Z" title="2022/2/23 下午5:21:51">2022-02-23</time>更新</span><span class="level-item">7 分钟读完 (大约984个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/">sql server 中的数组和列表（转载）</a></h1><div class="content"><span id="more"></span>

<blockquote>
<p>转载自：<a target="_blank" rel="noopener" href="https://www.sommarskog.se/arrays-in-sql.html">Arrays and Lists in SQL Server-The Short Version</a></p>
</blockquote>
<h3 id="原文摘录"><a href="#原文摘录" class="headerlink" title="原文摘录"></a>原文摘录</h3><p><strong>Two Simple Multi-Statement Functions</strong><br>If you search the web, there is no end of functions to split strings into table format. Here, I will present two simple functions that run on SQL 2008 or later, one for a list of integers and one for a list of strings. I should immediately warn you that these functions are not the most efficient and therefore not suitable if you have long lists with thousands of elements. But they are perfectly adequate if you are passing the contents of a multi-choice checkbox from a client where you would rarely have as many as 50 elements.</p>
<p>I opted to share these functions because they are simple and you can easily adapt them if you want different behaviour with regards to the choices that I have made. In my long article, I describe methods that are faster, but they all require extra setup than just a function.</p>
<p>Below is a function to split a delimited list of integers. The function accepts a parameter for the delimiter which can be up to 10 characters long. The function returns the list positions for the elements. An empty element is returned as NULL. If there is a non-numeric value in the list, there will be a conversion error.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       n       <span class="type">int</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (n)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="keyword">convert</span>(<span class="type">int</span>, <span class="built_in">nullif</span>(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>), <span class="string">''</span>)))</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>You are likely to be puzzled by the COLLATE clause. This is a small speed booster. By forcing a binary collation, we avoid that SQL Server employs the full Unicode rules when searching for the delimiter. This pays off when scanning long strings. Why Czech? The language does not matter here, so I just picked one with a short name.</p>
<p>And why datalength divided by 2 and not len? datalength returns the length in bytes, whence the division. len does not count trailing spaces, so it does not work if the delimiter is a space.</p>
<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3, 677,7 , ,-1'</span>, <span class="string">','</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1&lt;-&gt;2&lt;-&gt;3&lt;-&gt; 677&lt;-&gt;7&lt;-&gt;&lt;-&gt;-1'</span>, <span class="string">'&lt;-&gt;'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Since the values are the same in both lists, the output is the same:</p>
<table>
<thead>
<tr>
<th align="center">listpos</th>
<th align="center">n</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">677</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">-1</td>
</tr>
</tbody></table>
<p>Here is an example of how you would use it in a simple query:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  col <span class="keyword">IN</span> (<span class="keyword">SELECT</span> n <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3,4'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>If you find that you are only using comma-separated lists, you may grow tired of having to specify the delimiter every time. To that end, this wrapper can be handy:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlisttotbl (<span class="variable">@list</span> nvarchar(MAX)) <span class="keyword">RETURNS</span> <span class="keyword">TABLE</span> <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">RETURN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> listpos, n <span class="keyword">FROM</span> intlist_to_tbl(<span class="variable">@list</span>, <span class="string">','</span>)</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>I leave it as an exercise to the reader to come up with a better name.</p>
<p>Here is a function for a list of strings. It accepts an input parameter of the type nvarchar(MAX), but the return table has both a varchar and an nvarchar column. I will return to why in a second. Like intlist_to_tbl it returns the list position. It trims leading and trailing spaces. In difference to intlist_to_tbl, empty elements are returned as empty strings and not as NULL.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> strlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       str     <span class="type">varchar</span>(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">                       nstr    nvarchar(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@nstr</span>      nvarchar(<span class="number">4000</span>),</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nstr</span> <span class="operator">=</span> ltrim(rtrim(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>)))</span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (str, nstr)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="variable">@nstr</span>, <span class="variable">@nstr</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'Alpha (α) | Beta (β)|Gamma (γ)|Delta (δ)|'</span>, <span class="string">'|'</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'a///b///c///v///x'</span>, <span class="string">'///'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Here is the output:</p>
<p>listpos   |  str   |     nstr<br>|:–:|:–:|:–:|<br>1    |      Alpha (a)| Alpha (α)<br>2    |      Beta (ß) | Beta (β)<br>3    |      Gamma (?)| Gamma (γ)<br>4    |      Delta (d)| Delta (δ)<br>5     |              |   |</p>
<p>listpos   |  str   |     nstr<br>|:–:|:–:|:–:|<br>1      |    a     |    a<br>2      |    b     |    b<br>3      |    c     |    c<br>4      |    v     |    v<br>5      |    x     |    x</p>
<p>Note in the first result set that the Greek characters has been replaced by fallback characters in the str column. They are unchanged in the nstr column. (If you have a Greek or a UTF-8 collation, the two columns will be identical, though.)</p>
<p>Here are two examples of using this function:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  varcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> str <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  nvarcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> nstr <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>These examples illustrate why there are two columns. If you are going to use the list against a varchar column, you need to use the str column. This is important because of the type-conversion rules in SQL Server. If you mistakenly compare varcharcol to nstr, varcharcol will be converted to nvarchar, and this can render any index on varcharcol ineligible for the query, leading to a performance disaster as the table must be scanned. And conversely, if you have an nvarchar column, you need to compare it to the nvarchar value, since else the result can be incorrect because of the character replacement with the conversion to varchar.</p>
<p>I like to point out that these functions are by no means cast in stone, but see them as suggestions. Feel free to modify them according to your preferences and needs.</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="MongoDb初识"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-01T07:51:01.000Z" title="2021/9/1 下午3:51:01">2021-09-01</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:39.882Z" title="2022/2/23 下午5:21:39">2022-02-23</time>更新</span><span class="level-item">4 分钟读完 (大约607个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/">MongoDb初识</a></h1><div class="content"><span id="more"></span>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html">https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html</a></p>
<p>MongoDb 命令查询所有数据库列表</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></tbody></table></figure>

<p>如果想查看当前连接在哪个数据库下面，可以直接输入db<br>db</p>
<p>切换到test数据库下面<br>use test</p>
<p>想查看test下有哪些表或者叫collection，可以输入<br>show collections</p>
<p>想知道mongodb支持哪些命令，可以直接输入help<br>help</p>
<p>想知道当前数据库支持哪些方法<br>db.help();</p>
<p>想知道当前数据库下的表或者表collection支持哪些方法，可以使用以下命令<br>db.user.help();  user为表名</p>
<p>根据条件查找数据<br>通过条件查询： db.foo.find( { x : 77 } , { name : 1 , x : 1 } )  </p>
<ol>
<li><p>超级用户相关：  </p>
<pre><code>  #增加或修改用户密码  

  db.addUser('admin','pwd')  

  #查看用户列表  

  db.system.users.find()  

  #用户认证  

  db.auth('admin','pwd')  

  #删除用户  

  db.removeUser('mongodb')  
</code></pre>
<p>#查看所有用户  </p>
<pre><code>  show users  

  #查看所有数据库  

  show dbs  

  #查看所有的collection  

  show collections  

  #查看各collection的状态  

  db.printCollectionStats()  

  #查看主从复制状态  

  db.printReplicationInfo()  

  #修复数据库  

  db.repairDatabase()  

  #设置记录profiling，0=off 1=slow 2=all  

  db.setProfilingLevel(1)  

  #查看profiling  
 show profile  

  #拷贝数据库  

  db.copyDatabase('mail_addr','mail_addr_tmp')  

  #删除collection  

  db.mail_addr.drop()  

  #删除当前的数据库  

  db.dropDatabase()  
</code></pre>
<ol start="2">
<li><p>客户端连接  </p>
<pre><code>/usr/local/mongodb/bin/mongo user_addr -u user -p 'pwd'  
</code></pre>
</li>
<li><p>增删改  </p>
<pre><code> #存储嵌套的对象  

db.foo.save({'name':'ysz','address':{'city':'beijing','post':100096},'phone':[138,139]})  

#存储数组对象  

db.user_addr.save({'Uid':'yushunzhi@sohu.com','Al':['test-1@sohu.com','test-2@sohu.com']})  

#根据query条件修改，如果不存在则插入，允许修改多条记录  
</code></pre>
<p>db.foo.update({‘yy’:5},{‘$set’:{‘xx’:2}},upsert=true,multi=true)  </p>
<pre><code>#删除yy=5的记录  

db.foo.remove({'yy':5})  

#删除所有的记录  
</code></pre>
<p>   db.foo.remove()  </p>
</li>
<li><p>索引  </p>
<pre><code>增加索引：1(ascending),-1(descending)  

db.things.ensureIndex({firstname: 1, lastname: 1}, {unique: true});  

#索引子对象  

db.user_addr.ensureIndex({'Al.Em': 1})  

#查看索引信息  

db.deliver_status.getIndexes()  

db.deliver_status.getIndexKeys()  

#根据索引名删除索引  
</code></pre>
<p>db.user_addr.dropIndex(‘Al.Em_1’)  </p>
</li>
<li><p>查询  </p>
<pre><code>查找所有  

db.foo.find()  

#查找一条记录  

db.foo.findOne()  

#根据条件检索10条记录  

db.foo.find({'msg':'Hello 1'}).limit(10)  

#sort排序  

db.deliver_status.find({'From':'yushunzhi@sohu.com'}).sort({'Dt',-1})  

db.deliver_status.find().sort({'Ct':-1}).limit(1)  
</code></pre>
<p>   #count操作  </p>
<p>   db.user_addr.count()  </p>
<p>   #distinct操作  </p>
<p>   db.foo.distinct(‘msg’)<br>#&gt;操作  </p>
<p>   db.foo.find({“timestamp”: {“$gte” : 2}})  </p>
<p>   #子对象的查找  </p>
<p>   db.foo.find({‘address.city’:’beijing’})  </p>
</li>
<li><p>管理  </p>
<pre><code>查看collection数据的大小  

db.deliver_status.dataSize()  

#查看colleciont状态  

db.deliver_status.stats()  

#查询所有索引的大小  

db.deliver_status.totalIndexSize()
</code></pre>
</li>
</ol>
</li>
</ol>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/14/Dockerfile%E7%AC%94%E8%AE%B0/"><img class="fill" src="/images/default.jpeg" alt="Dockerfile笔记"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-14T04:52:12.000Z" title="2021/8/14 下午12:52:12">2021-08-14</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:30.124Z" title="2022/2/23 下午5:21:30">2022-02-23</time>更新</span><span class="level-item">几秒读完 (大约1个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/14/Dockerfile%E7%AC%94%E8%AE%B0/">Dockerfile笔记</a></h1><div class="content"><span id="more"></span></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/14/yapi-docker%E9%83%A8%E7%BD%B2/"><img class="fill" src="/images/default.jpeg" alt="yapi-docker部署"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-14T04:50:09.000Z" title="2021/8/14 下午12:50:09">2021-08-14</time>发表</span><span class="level-item"><time dateTime="2022-09-07T06:28:12.124Z" title="2022/9/7 下午2:28:12">2022-09-07</time>更新</span><span class="level-item">2 分钟读完 (大约266个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/14/yapi-docker%E9%83%A8%E7%BD%B2/">yapi-docker部署</a></h1><div class="content"><span id="more"></span>

<h2 id="部署步骤"><a href="#部署步骤" class="headerlink" title="部署步骤"></a>部署步骤</h2><p><a target="_blank" rel="noopener" href="https://github.com/MyHerux/code-note/blob/master/Program/%E5%B7%A5%E5%85%B7%E7%AF%87/Yapi/%E4%BD%BF%E7%94%A8DockerCompose%E6%9E%84%E5%BB%BA%E9%83%A8%E7%BD%B2Yapi.md">使用DockerCompose构建部署Yapi.md</a></p>
<h2 id="填坑"><a href="#填坑" class="headerlink" title="填坑"></a>填坑</h2><p>docker images生成部署时。发现docker-entrypoint.sh没有初始化数据库，只有<a target="_blank" rel="noopener" href="https://github.com/MyHerux/code-note/blob/master/Program/%E5%B7%A5%E5%85%B7%E7%AF%87/Yapi/docker-entrypoint.sh#L32">运行代码</a>，没有添加初始化命令：</p>
<blockquote>
<p>npm run install-server //安装程序，初始化数据库索引和管理员账号，管理员账号名可在 config.json 配置`</p>
</blockquote>
<p>补救措施：</p>
<figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-4-16-centos /]# docker exec -it 2e43588c8b1f bash</span><br><span class="line">root@2e43588c8b1f:/# node api/vendors/server/install.js                      </span><br><span class="line">(node:65) DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.</span><br><span class="line">log: mongodb load success...</span><br><span class="line">初始化管理员账号成功,账号名："xxxxx@gmail.com"，密码："ymfe.org"</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><code>config.json</code>内容如下：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line"><span class="attr">"port"</span><span class="punctuation">:</span> <span class="string">"3000"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"adminAccount"</span><span class="punctuation">:</span> <span class="string">"admin@admin.com"</span><span class="punctuation">,</span><span class="comment">//yapi管理员账号</span></span><br><span class="line">  <span class="attr">"timeout"</span><span class="punctuation">:</span><span class="number">120000</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"db"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"servername"</span><span class="punctuation">:</span> <span class="string">"192.168.0.1"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"DATABASE"</span><span class="punctuation">:</span> <span class="string">"yapi"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"port"</span><span class="punctuation">:</span> <span class="number">27017</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"user"</span><span class="punctuation">:</span> <span class="string">"yapi"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"pass"</span><span class="punctuation">:</span> <span class="string">"123456"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"authSource"</span><span class="punctuation">:</span> <span class="string">""</span></span><br><span class="line">  <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/13/docker%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="docker初识"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-13T15:17:18.000Z" title="2021/8/13 下午11:17:18">2021-08-13</time>发表</span><span class="level-item"><time dateTime="2022-05-28T03:06:33.191Z" title="2022/5/28 上午11:06:33">2022-05-28</time>更新</span><span class="level-item">8 分钟读完 (大约1193个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/13/docker%E5%88%9D%E8%AF%86/">docker初识</a></h1><div class="content"><span id="more"></span>

<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>容器与镜像的关系类似于面向对象编程中的对象与类。</p>
<table>
<thead>
<tr>
<th>Docker</th>
<th>面向对象</th>
</tr>
</thead>
<tbody><tr>
<td>容器</td>
<td>对象</td>
</tr>
<tr>
<td>镜像</td>
<td>类</td>
</tr>
</tbody></table>
<p><img src="docker1.png" alt="容器与镜像的关系"></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>参考：<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/ubuntu-docker-install.html">Ubuntu Docker 安装</a></p>
<h2 id="docker命令"><a href="#docker命令" class="headerlink" title="docker命令"></a>docker命令</h2><p>列出docker的命令帮助，在<code>docker xx </code>后面 加上 <code>--help</code>  可以查看具体的命令用法和参数注解</p>
<figure class="highlight shell"><figcaption><span>cmd-help.sh</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --help</span><br></pre></td></tr></tbody></table></figure>

<h2 id="创建镜像"><a href="#创建镜像" class="headerlink" title="创建镜像"></a>创建镜像</h2><p>列出所有镜像：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -a</span><br></pre></td></tr></tbody></table></figure>

<p>获取一个新的ubuntu 13.10版本镜像</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:13.10</span><br></pre></td></tr></tbody></table></figure>

<p>查找centos镜像</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search centos</span><br></pre></td></tr></tbody></table></figure>

<p>删除ubuntu镜像</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi ubuntu</span><br></pre></td></tr></tbody></table></figure>

<p>创建镜像<br>1、从已经创建的容器中更新镜像，并且提交这个镜像<br>2、使用 Dockerfile 指令来创建一个新的镜像</p>
<h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2><h3 id="容器管理命令"><a href="#容器管理命令" class="headerlink" title="容器管理命令"></a>容器管理命令</h3><table>
<thead>
<tr>
<th align="left">code</th>
<th align="left">操作</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker ps</code></td>
<td align="left">查看正在运行的容器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker ps -s -a</code></td>
<td align="left">查看当前所有容器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker stop 容器名称</code></td>
<td align="left">停止容器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker restart 容器名称</code></td>
<td align="left">重启容器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker kill 容器名称</code></td>
<td align="left">杀死容器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker rm -f 镜像ID或者镜像名</code></td>
<td align="left">删除已经停止的容器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></td>
<td align="left">运行容器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>docker run --name mynginx -d nginx:latest</code></td>
<td align="left">使用docker镜像nginx:latest以后台模式启动一个容器,并将容器命名为mynginx。</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>OPTIONS说明：<ul>
<li>-a stdin: 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；</li>
<li>-d: 后台运行容器，并返回容器ID；</li>
<li>-i: 以交互模式运行容器，通常与 -t 同时使用；</li>
<li>-P: 随机端口映射，容器内部端口随机映射到主机的端口</li>
<li>-p: 指定端口映射，格式为：主机(宿主)端口:容器端口</li>
<li>-t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；</li>
<li>–name=”nginx-lb”: 为容器指定一个名称；</li>
<li>–dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致；</li>
<li>–dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致；</li>
<li>-h “mars”: 指定容器的hostname；</li>
<li>-e username=”ritchie”: 设置环境变量；</li>
<li>–env-file=[]: 从指定文件读入环境变量；</li>
<li>–cpuset=”0-2” or –cpuset=”0,1,2”: 绑定容器到指定CPU运行；</li>
<li>-m :设置容器使用内存最大值；</li>
<li>–net=”bridge”: 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；</li>
<li>–link=[]: 添加链接到另一个容器；</li>
<li>–expose=[]: 开放一个端口或一组端口；</li>
<li>–volume , -v: 绑定一个卷</li>
</ul>
</li>
</ul>
</blockquote>
<hr>
<h4 id="example"><a href="#example" class="headerlink" title="example"></a>example</h4><p>运行一个新容器，映射至5600端口，挂载目录</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit -v $PWD/ql/config:/ql/config -v $PWD/ql/log:/ql/log -v $PWD/ql/db:/ql/db -v $PWD/ql/repo:/ql/repo -v $PWD/ql/raw:/ql/raw -v $PWD/ql/scripts:/ql/scripts -v $PWD/ql/jbot:/ql/jbot -p 5600:5600 --name qinglong --hostname qinglong --restart always whyour/qinglong:latest</span><br></pre></td></tr></tbody></table></figure>

<h4 id="摘录"><a href="#摘录" class="headerlink" title="摘录"></a>摘录</h4><p>docker镜像管理命令<br>查看本地镜像</p>
<p>docker images #查看当前机器的所有镜像</p>
<p>docker images –q # 查看所用镜像的id</p>
<p>docker search 镜像名称 #搜索镜像，网络中查找需要的镜像</p>
<p>docker pull 镜像名称 #从Docker仓库拉取镜像，名称:版本号</p>
<p>docker push 镜像名称 #推送镜像</p>
<p>docker rmi 镜像名称/镜像id #删除本地机器的镜像</p>
<p>docker rmi docker images -q # 删除所有本地镜像</p>
<p>docker tag 镜像名称:tag 镜像名称:tag #为一个镜像打tag</p>
<p>docker save {image_name} &gt; {new_image_name}.tar #镜像打包成一个tar包</p>
<p>docker load &lt; {image_name}.tar #解压一个镜像tar包</p>
<p>docker查看日志信息<br>docker logs -f 容器名称 #查看容器日志</p>
<p>docker info #查看docker服务的信息</p>
<p>docker inspect 容器名称 # 获取镜像的元信息，详细信息</p>
<p>与容器交互的命令<br>进入正在运行的容器<br>docker exec -it 容器ID或者容器名 /bin/bash</p>
<p>exec的意思是在容器中运行⼀个命令。 /bin/bash是固有写法，作用是因为docker后台必须运行一个进程，否则容器就会退出，在这里表示启动容器后启动 bash。</p>
<p>退出容器<br>exit #退出也关闭容器;</p>
<p>Ctrl+P+Q #退出不关闭容器</p>
<p>创建启动容器时，使用–v参数设置数据卷<br>docker run … –v 宿主机目录/文件:容器内目录/文件</p>
<p>数据卷宿主机的一个目录或文件</p>
<p>目录必须是绝对路径</p>
<p>如果目录不存在，会自动创建</p>
<p>可以挂载多个数据卷</p>
<p>拷贝文件<br>docker cp 主机文件路径 容器ID或容器名:容器路径 #宿主机文件拷贝到容器中</p>
<p>docker cp 容器ID或容器名:容器路径 主机文件路径 #容器文件拷贝到宿主机中</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/08/03/kettle%E5%A1%AB%E5%9D%91/"><img class="fill" src="/images/default.jpeg" alt="kettle填坑"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-03T09:32:04.000Z" title="2021/8/3 下午5:32:04">2021-08-03</time>发表</span><span class="level-item"><time dateTime="2022-07-28T01:19:49.097Z" title="2022/7/28 上午9:19:49">2022-07-28</time>更新</span><span class="level-item">10 分钟读完 (大约1450个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/03/kettle%E5%A1%AB%E5%9D%91/">kettle填坑</a></h1><div class="content"><span id="more"></span>

<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>为了将MSSqlserver数据传输至MySql数据库，一开始的选择有很多,类似<code>DataX</code>、<code>ES</code>，但是碍于运行环境是windows server 2012,且服务器环境不方便更改，查阅一番后，决定使用kettle进行数据的同步。</p>
<ul>
<li>环境<ul>
<li>系统：windows server 2012R2  64位</li>
<li>内存：8GB</li>
<li>JDK：1.8</li>
</ul>
</li>
</ul>
<h2 id="kettle配置统一参数"><a href="#kettle配置统一参数" class="headerlink" title="kettle配置统一参数"></a>kettle配置统一参数</h2><p>一、kettle的常用配置文件说明：</p>
<ul>
<li><p><code>${user.home}</code> 表示WINDOWS的当前用户的文档文件夹，在C:\Users文件夹下</p>
</li>
<li><p><code>${user.home}/ .kettle /repositories.xml</code>: 该文件保存了用户设置的所有资源库信息,包括资源库名称,资源库需要的数据库连接参数等。该文件中定义的资源库将显示在spoon启动后出现的选择资源库下拉列表中,注意该文件的编码是UTF-8，资源库的名称尽量使用英文。</p>
</li>
<li><p><code>${user.home}/ kettle/kettle.properties</code>: 该文件保存了转换或作业中需要的变量, spoon启动后会自动加载该文件里定义的变量。</p>
</li>
<li><p><code>${user.home}/.kettle/shared.xml</code>: 该文件里保存了共享对象,共享对象可以是Database connections, Steps,Slave servers ,Partition schemas ,Cluster schemas。对象共享实质上就是将对象序列化的过程, spoon启动时,会加载shared.xml文件中定义的所有对象。</p>
</li>
<li><p><code>lib\kettle-engine.jar\kettle-jobs.xml</code>: 该文件中定义了Spoon启动时需要加载的作业项。</p>
</li>
</ul>
<p><code>lib\kettle-engine.jarkettle-partition-plugins.xml</code>: 该文件中定义了Spoon启动时需要加载的分区插件。</p>
<ul>
<li><code>lib\kettle-engine.jar\kettle- plugins.xml</code>: 该文件中定义了Spoon启动时步骤和作业项插件的加载路径。</li>
<li><code>lib\kettle-engine.jar\kettle-steps.xml</code>: 该文件中定义了Spoon启动时需要加载的转换步骤。</li>
</ul>
<p>二、修改repositories.xml的位置</p>
<p>找到kettle所在文件夹下的Spoon.bat 文件,在里面查找出Kettle home所在的代码段,在 <code>cd %KETTLE_DIR%</code>代码上一行加上代码：<code>set KETTLE_HOME=D:/AAA/BBB/CCC</code></p>
<ul>
<li>如上，表示把文件重新等位到D:/AAA/BBB/CCC这个文件夹下。(注意:文件夹的斜杠和WINDOWS的目录斜杠是反的）</li>
<li>复制 <code>${user.home}</code> 文件夹下的 .kettle 文件夹到D:/AAA/BBB/CCC目录下。</li>
<li>启动kettle程序。</li>
</ul>
<p>参考：<br>  <a target="_blank" rel="noopener" href="https://www.cnblogs.com/lsy-blogs/p/8268318.html">Kettle日常使用汇总整理</a><br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/xiezhongkai08/article/details/71244528">Kettle使用统一的数据库配置</a><br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/ZZQHELLO2018/article/details/99693263">kettle学习笔记10—配置文件的使用</a><br>  <a target="_blank" rel="noopener" href="https://www.pianshen.com/article/63971845790/">Kettle环境配置-kettle.properties</a><br>部份配置:<br><img src="config.jpg" alt="部份配置"></p>
<h2 id="kettle配置作业、转换"><a href="#kettle配置作业、转换" class="headerlink" title="kettle配置作业、转换"></a>kettle配置作业、转换</h2><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013468915/article/details/82629260">Kettle—使用手册</a></p>
<p>在配置完成后,执行作业的方式有两种：</p>
<ul>
<li><strong>使用spoon.bat打开UI程序进行执行</strong><ul>
<li>优点：作业执行很稳定，不会异常退出。</li>
<li>缺点：吃内存，配置不高的服务器可能压力大。懂不懂1GB起步。😓</li>
</ul>
</li>
<li><strong>使用Kitchen.bat脚本执行作业</strong><ul>
<li>优点：可以结合windows的任务执行计划程序进行定时启动作业，占用内存少，完成后自动退出。</li>
<li>缺点：一些耗时长的任务会有闪退的情况，或者数据量太大，执行时只取了一部分，会造成数据丢失。</li>
</ul>
</li>
</ul>
<h3 id="配置重抽作业的逻辑"><a href="#配置重抽作业的逻辑" class="headerlink" title="配置重抽作业的逻辑"></a>配置重抽作业的逻辑</h3><p>初始化时在作业里设置开始时间、结束时间变量值，执行转换前判断变量值，未到时间点，执行转换。执行一次转换后，更新变量，循环判断，实现重抽的需求。<br>作业流程配置:</p>
<p><img src="job.jpg" alt="重抽作业流程"><br>转换流程配置：</p>
<p><img src="trans.jpg" alt="数据转换流程"></p>
<p>更新时间变量JavaScript代码：</p>
<figure class="highlight javascript"><figcaption><span>updatetime.js</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Script here</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//var st =getVariable("StTime",'2021-01-01')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//var end =getVariable("End",'2021-7-27')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Alert("st:"+st+"end:"+end)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stDate =<span class="title class_">StTime</span>;<span class="comment">// str2date(st,'yyyy-MM-dd')</span></span><br><span class="line"><span class="keyword">var</span> endDate =<span class="title class_">End</span>;<span class="comment">// str2date(end,'yyyy-MM-dd')</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(stDate==<span class="literal">null</span>|| endDate==<span class="literal">null</span>) {</span><br><span class="line">  <span class="comment">//Alert("error")</span></span><br><span class="line">   <span class="literal">false</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">var</span> diff = <span class="title function_">dateDiff</span>(stDate,endDate,<span class="string">'d'</span>)</span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span>(diff&gt;=<span class="number">1</span>){</span><br><span class="line">  <span class="keyword">var</span> nextDate =<span class="title function_">dateAdd</span>(stDate,<span class="string">'d'</span>,<span class="number">1</span>);</span><br><span class="line">  <span class="comment">//Alert("next:"+nextDate)</span></span><br><span class="line">  <span class="keyword">var</span> strDate=<span class="title function_">date2str</span>(stDate,<span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line">  <span class="keyword">var</span> strNextDate = <span class="title function_">date2str</span>(nextDate,<span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//setVariable("StTime",strNextDate,‘p’)</span></span><br><span class="line">  <span class="comment">//Alert("开始时间:"+strDate+"结束时间:"+strNextDate)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="定时启动无界面kettle任务"><a href="#定时启动无界面kettle任务" class="headerlink" title="定时启动无界面kettle任务"></a>定时启动无界面kettle任务</h3><p>使用CMD脚本+windows任务计划程序实现定时启动作业执行。<strong>耗时在2小时以内的作业可以使用脚本方式，执行时间长的作业最好使用spoon窗口程序执行，不会存在执行一半退出的情况。</strong><br><strong>bat文件保存要按ANSI编码进行保存</strong></p>
<figure class="highlight bash"><figcaption><span>Task.bat</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@REM @<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">@REM <span class="keyword">if</span> <span class="string">"%1"</span> == <span class="string">"h"</span> goto begin</span><br><span class="line">@REM mshta vbscript:createobject(<span class="string">"wscript.shell"</span>).run(<span class="string">"%~nx0 h"</span>,0)(window.close)&amp;&amp;<span class="built_in">exit</span></span><br><span class="line">@REM :begin</span><br><span class="line"></span><br><span class="line">:: Kitchen.bat所在路径盘符?</span><br><span class="line">D:</span><br><span class="line">:: Kitchen.bat所在目录? ? ?</span><br><span class="line"><span class="built_in">cd</span> D:\PDI\data-integration\</span><br><span class="line"></span><br><span class="line">:: 作业（job）文件路径和日志文件路径</span><br><span class="line">:: 执行kitchen执行job，并写入日志</span><br><span class="line">Kitchen.bat /file:F:\pdi-ce-9.1.0.0-324\WorkSpace\测试.kjb /level:Base &gt;F:\pdi-ce-9.1.0.0-324\Log</span><br></pre></td></tr></tbody></table></figure>

<p>Kitchen.bat参数详细说明：<a target="_blank" rel="noopener" href="https://help.hitachivantara.com/Documentation/Pentaho/9.1/Products/Use_Command_Line_Tools_to_Run_Transformations_and_Jobs">Use Command Line Tools to Run Transformations and Jobs</a></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.staroon.dev/2018/07/18/KettleDoc-1/">Kettle系列教程-第一章</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/shuaishuai1234/article/details/103005023">kettle-数据同步比较数据（删除更新）</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22310551/article/details/115163517">Kettle之定时运行Job</a><br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904021824634893">kettle教程—kettle作业调度，根据更新时间增量更新</a><br><a target="_blank" rel="noopener" href="https://ask.hellobi.com/blog/hql15/5038">Kettle实现循环增量抽取数据</a><br><a target="_blank" rel="noopener" href="https://help.pentaho.com/Documentation/8.1/Products/Data_Integration/PDI_Client">Learn About the PDI Client (Spoon)-官方文档</a><br><a target="_blank" rel="noopener" href="https://help.hitachivantara.com/Documentation/Pentaho/9.1/Products/Use_Command_Line_Tools_to_Run_Transformations_and_Jobs">Use Command Line Tools to Run Transformations and Jobs</a></p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/07/29/Kettle/"><img class="fill" src="/images/default.jpeg" alt="PDI【Kettle】（一）"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-29T08:39:12.000Z" title="2021/7/29 下午4:39:12">2021-07-29</time>发表</span><span class="level-item"><time dateTime="2022-07-28T01:17:22.675Z" title="2022/7/28 上午9:17:22">2022-07-28</time>更新</span><span class="level-item">36 分钟读完 (大约5367个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/29/Kettle/">PDI【Kettle】（一）</a></h1><div class="content"><span id="more"></span>

<h1 id="Kettle中JavaScript内置函数说明"><a href="#Kettle中JavaScript内置函数说明" class="headerlink" title="Kettle中JavaScript内置函数说明"></a>Kettle中JavaScript内置函数说明</h1><h2 id="转换组件-脚本-JavaScript【Spoon】"><a href="#转换组件-脚本-JavaScript【Spoon】" class="headerlink" title="转换组件-脚本-JavaScript【Spoon】"></a>转换组件-脚本-JavaScript【Spoon】</h2><p>我们在使用JavaScript组件的时候,在左侧核心树对象栏中可以看到Kettle为我们提供了很多简洁强大的内置函数,帮助我们在写脚本的时候对数据、参数变量等能很轻松的做处理,体验编码的感觉.本篇将详细介绍JavaScript组件中的函数功能</p>
<p>脚本组件包含的函数主要包括六大类,分别是：</p>
<ul>
<li>字符串类型的函数(String Functions)</li>
<li>浮点型的函数(Numeric Functions)</li>
<li>日期类型函数(Date Functions)</li>
<li>逻辑判断型函数(Logic Functions)</li>
<li>特殊的函数(Special Functions)</li>
<li>文件处理类函数(File Functions)</li>
</ul>
<h2 id="字符串类型函数-String-Functions"><a href="#字符串类型函数-String-Functions" class="headerlink" title="字符串类型函数(String Functions)"></a>字符串类型函数(String Functions)</h2><p>顾名思义,字符串类型的函数肯定是针对字符串类型的参数、变量进行处理操作的函数</p>
<h3 id="日期转字符串-date2str"><a href="#日期转字符串-date2str" class="headerlink" title="日期转字符串(date2str)"></a>日期转字符串(<code>date2str</code>)</h3><p>日期转字符串函数<code>date2str</code>主要有4个方法,分别是：</p>
<ul>
<li><code>date2str(date)</code>:传入日期实例,转换成字符串类型</li>
<li><code>date2str(date,format)</code>:传入日期和格式化参数,进行格式化转换</li>
<li><code>date2str(date,format,iso)</code>:传入日期和参数格式化及ISO代码进行转换,(DE = German, EN = English, FR = France, …)</li>
<li><code>date2str(date,format,iso,zone)</code>:传入时区进行格式化,例如北京时区(GMT+8)</li>
</ul>
<p>日期格式化参数format参数类型供参考：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yy / yyyy - <span class="number">06</span> / <span class="number">2006</span></span><br><span class="line"><span class="variable constant_">MM</span> / <span class="variable constant_">MMM</span> / <span class="variable constant_">MMMMM</span> - <span class="number">11</span> / <span class="title class_">Nov</span> / <span class="title class_">November</span></span><br><span class="line">d / dd  - <span class="number">1</span> / <span class="number">01</span></span><br><span class="line">E / <span class="variable constant_">EEEE</span> - <span class="title class_">Tue</span> / <span class="title class_">Tuesday</span></span><br><span class="line">hh / <span class="variable constant_">HH</span> - <span class="number">11</span> / <span class="number">23</span></span><br><span class="line">m / mm - <span class="number">5</span> / <span class="number">05</span></span><br><span class="line">s / ss - <span class="number">8</span> / <span class="number">08</span></span><br></pre></td></tr></tbody></table></figure>

<p>代码示例:</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dValue = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(dValue,<span class="string">"dd.MM.yyyy"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(dValue,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(dValue,<span class="string">"E.MMM.yyyy"</span>,<span class="string">"DE"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(dValue,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"EN"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(dValue,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"ZH"</span>, <span class="string">"GMT+8"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(dValue,<span class="string">"yyyy-MM-dd HH:mm:ss"</span>,<span class="string">"ZH"</span>, <span class="string">"GMT+8"</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>以上代码在控制台将会输出如下：</p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:12:56 - JavaScript代码.0 - 19.08.2019</span></span><br><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:12:56 - JavaScript代码.0 - 19.08.2019 10:12:56</span></span><br><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:12:56 - JavaScript代码.0 - Mo.Aug.2019</span></span><br><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:12:56 - JavaScript代码.0 - 19.08.2019 10:12:56</span></span><br><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:12:56 - JavaScript代码.0 - 19.08.2019 10:12:56</span></span><br><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:12:56 - JavaScript代码.0 - 2019-08-19 10:12:56</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="转义HTMLescapeHtml-html"><a href="#转义HTMLescapeHtml-html" class="headerlink" title="转义HTMLescapeHtml(html)"></a>转义HTML<code>escapeHtml(html)</code></h3><p>代码如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> html=<span class="string">"&lt;h1&gt;我是H2标题&lt;/h2&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">writeToLog</span>(escapeHtml(html))</span><br></pre></td></tr></tbody></table></figure>

<p>最终输出</p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:16:13 - JavaScript代码.0 - &amp;lt;h1&amp;gt;&amp;#25105;&amp;#26159;H2&amp;#26631;&amp;#39064;&amp;lt;/h2&amp;gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="转义SQL-escapeSQL-var"><a href="#转义SQL-escapeSQL-var" class="headerlink" title="转义SQL(escapeSQL(var))"></a>转义SQL(<code>escapeSQL(var)</code>)</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"SELECT * FROM CUSTOMER WHERE NAME='"</span> + escapeSQL(<span class="string">"McHale's Navy"</span>) + <span class="string">"'"</span>;  </span><br><span class="line"><span class="title function_">writeToLog</span>(str1)</span><br></pre></td></tr></tbody></table></figure>

<p>该函数会把单引号转成双引号,输出结果如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">18</span>:<span class="number">59</span> - JavaScript代码<span class="number">.0</span> - SELECT * FROM CUSTOMER WHERE NAME=<span class="string">'McHale'</span><span class="string">'s Navy'</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="构造定长字符串-fillString-char-length"><a href="#构造定长字符串-fillString-char-length" class="headerlink" title="构造定长字符串(fillString(char,length))"></a>构造定长字符串(<code>fillString(char,length)</code>)</h3><p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">fillString</span>(<span class="string">"x"</span>,<span class="number">10</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">fillString</span>(<span class="string">"A"</span>,<span class="number">3</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>最终会输出10个X和3个<code>A</code>,输出结果如下：</p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:24:08 - JavaScript代码.0 - xxxxxxxxxx</span></span><br><span class="line"><span class="attr">2019/08/19</span> <span class="string">10:24:08 - JavaScript代码.0 - AAA</span></span><br></pre></td></tr></tbody></table></figure>

<p>需要注意的是第一个是一个char类型的单字符,不能是字符串</p>
<h3 id="统计字符串出现频次-getOcuranceString-str-searchStr"><a href="#统计字符串出现频次-getOcuranceString-str-searchStr" class="headerlink" title="统计字符串出现频次(getOcuranceString(str,searchStr))"></a>统计字符串出现频次(<code>getOcuranceString(str,searchStr)</code>)</h3><p>第一个参数是要搜索的完整字符串,第二个参数是要搜索统计的字符串</p>
<p>代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sef=<span class="string">'2007-09-11'</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">getOcuranceString</span>(sef,<span class="string">'0'</span>))</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">getOcuranceString</span>(sef,<span class="string">'00'</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>我们分别统计字符串0和00最终出现的次数,此时,日志最终打印的次数是3和1：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2019/08/19 10:28:45 - JavaScript代码.0 - 3</span><br><span class="line">2019/08/19 10:28:45 - JavaScript代码.0 - 1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取字符串下标索引-indexOf"><a href="#获取字符串下标索引-indexOf" class="headerlink" title="获取字符串下标索引(indexOf)"></a>获取字符串下标索引(<code>indexOf</code>)</h3><p>获取下标索引主要有2个重构函数,分别是：</p>
<ul>
<li><code>indexOf(string,subString)</code>:获取出现字符串的索引开始位置</li>
<li><code>indexOf(string,subString,fromIndex)</code>；指定开始位置,获取字符串索引开始位置</li>
</ul>
<p>代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello Pentaho!"</span>;</span><br><span class="line"><span class="keyword">var</span> str2= <span class="title function_">indexOf</span>(str1, <span class="string">"Pentaho"</span>);</span><br><span class="line"><span class="keyword">var</span> str3= <span class="title function_">indexOf</span>(str1, <span class="string">"o"</span>, <span class="number">7</span>);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Input : "</span> + str1);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Index of 'Pentaho' : "</span> + str2);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"index of 'o', search from position 7 : "</span> + str3);</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">34</span>:<span class="number">16</span> - JavaScript代码<span class="number">.0</span> - Input : Hello Pentaho!</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">34</span>:<span class="number">16</span> - JavaScript代码<span class="number">.0</span> - Index of <span class="string">'Pentaho'</span> : <span class="number">6</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">34</span>:<span class="number">16</span> - JavaScript代码<span class="number">.0</span> - index of <span class="string">'o'</span>, search from position <span class="number">7</span> : <span class="number">12</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="首字母大写-initCap"><a href="#首字母大写-initCap" class="headerlink" title="首字母大写(initCap)"></a>首字母大写(<code>initCap</code>)</h3><p>对指定字符串首字母大写处理,来看代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"my home"</span>;      </span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">initCap</span>(str1));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">initCap</span>(<span class="string">'test a aaa cw'</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">initCap</span>(<span class="string">'myhome'</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>此时,最终控制台输出如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">41</span>:<span class="number">27</span> - JavaScript代码<span class="number">.0</span> - My Home</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">41</span>:<span class="number">27</span> - JavaScript代码<span class="number">.0</span> - Test A Aaa Cw</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">41</span>:<span class="number">27</span> - JavaScript代码<span class="number">.0</span> - Myhome</span><br></pre></td></tr></tbody></table></figure>

<h3 id="字符串转小写-lower"><a href="#字符串转小写-lower" class="headerlink" title="字符串转小写(lower)"></a>字符串转小写(<code>lower</code>)</h3><p>将传入字符串全部转小写</p>
<p>代码如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello World!"</span>;</span><br><span class="line"><span class="keyword">var</span> str2= <span class="title function_">lower</span>(str1);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Input:"</span> + str1);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Converted to LowerCase:"</span> + str2);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">lower</span>(<span class="string">'DDDHelloSWxss'</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>响应内容</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/<span class="number">08</span>/<span class="number">19</span> <span class="number">10</span>:<span class="number">43</span>:<span class="number">09</span> - <span class="title class_">JavaScript</span>代码<span class="number">.0</span> - <span class="title class_">Input</span>:<span class="title class_">Hello</span> <span class="title class_">World</span>!</span><br><span class="line"><span class="number">2019</span>/<span class="number">08</span>/<span class="number">19</span> <span class="number">10</span>:<span class="number">43</span>:<span class="number">09</span> - <span class="title class_">JavaScript</span>代码<span class="number">.0</span> - <span class="title class_">Converted</span> to <span class="title class_">LowerCase</span>:hello world!</span><br><span class="line"><span class="number">2019</span>/<span class="number">08</span>/<span class="number">19</span> <span class="number">10</span>:<span class="number">43</span>:<span class="number">09</span> - <span class="title class_">JavaScript</span>代码<span class="number">.0</span> - dddhelloswxss</span><br></pre></td></tr></tbody></table></figure>

<h3 id="字符串填充左侧-lpad-string-char-length"><a href="#字符串填充左侧-lpad-string-char-length" class="headerlink" title="字符串填充左侧(lpad(string,char,length))"></a>字符串填充左侧(<code>lpad(string,char,length)</code>)</h3><p>用指定长度的给定字符将字符串填充到左侧</p>
<p>参数定义：</p>
<ul>
<li>1：传入字符串</li>
<li>2：填充单字符</li>
<li>3：填充单字符长度</li>
</ul>
<p>如果length长度超过给定字符串的长度,将对填充字符串做减法，例如：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello World!"</span>; </span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Lpad:"</span> + <span class="title function_">lpad</span>(str1, <span class="string">"x"</span>,<span class="number">20</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>此时,最终输出结果为：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">46</span>:<span class="number">38</span> - JavaScript代码<span class="number">.0</span> - Lpad:xxxxxxxxHello World!</span><br></pre></td></tr></tbody></table></figure>

<p>最终的完成长度是20个字符长度,因此填充的单字符<code>x</code>并没有填充20次</p>
<p>如果length长度小于给定字符串的长度,则默认返回原字符串,不做填充,代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello World!"</span>; </span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Lpad:"</span> + <span class="title function_">lpad</span>(str1, <span class="string">"x"</span>,<span class="number">5</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>此时最终的输出结果为：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">10</span>:<span class="number">46</span>:<span class="number">38</span> - JavaScript代码<span class="number">.0</span> - Lpad:Hello World!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="去空字符-ltrim"><a href="#去空字符-ltrim" class="headerlink" title="去空字符(ltrim)"></a>去空字符(<code>ltrim</code>)</h3><p>从左侧开始去除空字符串</p>
<h3 id="数字转字符串-num2str"><a href="#数字转字符串-num2str" class="headerlink" title="数字转字符串(num2str)"></a>数字转字符串(<code>num2str</code>)</h3><p>给定数字,转换为字符串,主要有3个构造函数：</p>
<ul>
<li><code>num2str(num)</code>:转换num数字为字符串</li>
<li><code>num2str(num,format)</code>:格式化数字为指定字符串</li>
<li><code>num2str(num,format,iso)</code>:按照本地ISO编码进行格式化</li>
</ul>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="number">123.40</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = -<span class="number">123.40</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">num2str</span>(d1));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">num2str</span>(d1, <span class="string">"0.00"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">num2str</span>(d1, <span class="string">"0.00"</span>, <span class="string">"EN"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">num2str</span>(d2, <span class="string">"0.00;(0.00)"</span>, <span class="string">"EN"</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScript代码<span class="number">.0</span> - <span class="number">123.4</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScript代码<span class="number">.0</span> - <span class="number">123.40</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScript代码<span class="number">.0</span> - <span class="number">123.40</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">17</span> - JavaScript代码<span class="number">.0</span> - (<span class="number">123.40</span>)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="XML保护标签函数转换-protectXMLCDATA"><a href="#XML保护标签函数转换-protectXMLCDATA" class="headerlink" title="XML保护标签函数转换(protectXMLCDATA)"></a>XML保护标签函数转换(<code>protectXMLCDATA</code>)</h3><p>传入给定字符串,添加标准保护,代码示例</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"my home"</span>;      </span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">protectXMLCDATA</span>(str1));</span><br></pre></td></tr></tbody></table></figure>

<p>此时,将会给变量<code>str1</code>加上保护标签</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">02</span>:09 - JavaScript代码<span class="number">.0</span> - &lt;![CDATA[my home]]&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="移除字符串中CRLF字符-removeCRLF-str"><a href="#移除字符串中CRLF字符-removeCRLF-str" class="headerlink" title="移除字符串中CRLF字符(removeCRLF(str))"></a>移除字符串中CRLF字符(<code>removeCRLF(str)</code>)</h3><p>给定字符串中删除CR END LF的字符串</p>
<h3 id="替换字符串-replace"><a href="#替换字符串-replace" class="headerlink" title="替换字符串(replace)"></a>替换字符串(<code>replace</code>)</h3><p>替换字符串主要包括两个构造函数：</p>
<ul>
<li><code>replace(str,searchStr,replaceStr)</code>:从指定字符串中查询，然后替换</li>
<li><code>replace(str,firstSearch,firstReplace,secondSearch,SecondReplace...)</code>：无限查询替换</li>
</ul>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"Hello World, this is a nice function"</span>;      </span><br><span class="line"><span class="keyword">var</span> str2 = <span class="title function_">replace</span>(str1,<span class="string">"World"</span>, <span class="string">"Folk"</span>);</span><br><span class="line"><span class="title function_">writeToLog</span>(str2);</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="title function_">replace</span>(str1,<span class="string">"World"</span>, <span class="string">"Folk"</span>, <span class="string">"nice"</span>,<span class="string">"beautifull"</span>);</span><br><span class="line"><span class="title function_">writeToLog</span>(str2);</span><br></pre></td></tr></tbody></table></figure>

<p>最终输出:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">10</span>:<span class="number">21</span> - JavaScript代码<span class="number">.0</span> - Hello Folk, <span class="built_in">this</span> is a nice function</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">11</span>:<span class="number">10</span>:<span class="number">21</span> - JavaScript代码<span class="number">.0</span> - Hello Folk, <span class="built_in">this</span> is a beautifull function</span><br></pre></td></tr></tbody></table></figure>

<h3 id="字符串右侧填充-rpad-string-char-length"><a href="#字符串右侧填充-rpad-string-char-length" class="headerlink" title="字符串右侧填充(rpad(string,char,length))"></a>字符串右侧填充(<code>rpad(string,char,length</code>))</h3><p>使用方法同<code>lpad</code>,只是一个是左侧，一个是右侧</p>
<h3 id="去除空字符-右侧-rtrim"><a href="#去除空字符-右侧-rtrim" class="headerlink" title="去除空字符(右侧)(rtrim)"></a>去除空字符(右侧)(<code>rtrim</code>)</h3><h3 id="正则切分-str2RegExp"><a href="#正则切分-str2RegExp" class="headerlink" title="正则切分(str2RegExp)"></a>正则切分(<code>str2RegExp</code>)</h3><p>出入一个正则表达式,对string字符串进行Split操作.代码如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> strToMatch = <span class="string">"info@proconis.de"</span>;</span><br><span class="line"><span class="keyword">var</span> strReg = <span class="string">"^(\\w+)@([a-zA-Z_]+?)\\.([a-zA-Z]{2,3})$"</span>;</span><br><span class="line"><span class="keyword">var</span> xArr =  <span class="title function_">str2RegExp</span>(strToMatch, strReg);</span><br><span class="line"><span class="keyword">if</span> ( xArr != <span class="literal">null</span> ) {</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;xArr.<span class="property">length</span>;i++) {</span><br><span class="line">	    <span class="title function_">writeToLog</span>(xArr[i]);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span> {</span><br><span class="line">    <span class="title function_">writeToLog</span>(<span class="string">"no match"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">21</span>:<span class="number">19</span> - JavaScript代码<span class="number">.0</span> - info</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">21</span>:<span class="number">19</span> - JavaScript代码<span class="number">.0</span> - proconis</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">21</span>:<span class="number">19</span> - JavaScript代码<span class="number">.0</span> - de</span><br></pre></td></tr></tbody></table></figure>

<h3 id="字符串截取-substr"><a href="#字符串截取-substr" class="headerlink" title="字符串截取(substr)"></a>字符串截取(<code>substr</code>)</h3><p>通过制定索引开始对字符串进行截取操作,主要有两个重构参数：</p>
<ul>
<li><code>substr(string,from)</code>:指定from索引开始截取字符串</li>
<li><code>substr(string,from,to)</code>:指定开始和截止索引进行截取</li>
</ul>
<p>代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1= <span class="string">"Hello Pentaho!"</span>;</span><br><span class="line"><span class="keyword">var</span> str2= <span class="title function_">substr</span>(str1, <span class="number">6</span>);</span><br><span class="line"><span class="keyword">var</span> str3= <span class="title function_">substr</span>(str1, <span class="number">6</span>, <span class="number">7</span>);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Input : "</span> + str1);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"From position 6: "</span> + str2);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"From position 6 for 7 long : "</span> + str3);</span><br></pre></td></tr></tbody></table></figure>

<p>控制台输出如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">31</span>:<span class="number">20</span> - JavaScript代码<span class="number">.0</span> - Input : Hello Pentaho!</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">31</span>:<span class="number">20</span> - JavaScript代码<span class="number">.0</span> - From position <span class="number">6</span>: Pentaho!</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">31</span>:<span class="number">20</span> - JavaScript代码<span class="number">.0</span> - From position <span class="number">6</span> <span class="keyword">for</span> <span class="number">7</span> <span class="type">long</span> : Pentaho</span><br></pre></td></tr></tbody></table></figure>

<h3 id="去除左右空格-trim"><a href="#去除左右空格-trim" class="headerlink" title="去除左右空格(trim)"></a>去除左右空格(<code>trim</code>)</h3><h3 id="不转义HTML-unEscapeHtml-html"><a href="#不转义HTML-unEscapeHtml-html" class="headerlink" title="不转义HTML(unEscapeHtml(html))"></a>不转义HTML(<code>unEscapeHtml(html)</code>)</h3><p>针对以转义的HTML字符进行解密,代码如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> w=<span class="string">'&lt;h2&gt;我是H2标题&lt;/h2&gt;'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> esW=escapeHtml(w);</span><br><span class="line"><span class="keyword">var</span> unesw=<span class="title function_">unEscapeHtml</span>(esW);</span><br><span class="line"></span><br><span class="line"><span class="title function_">writeToLog</span>(esW);</span><br><span class="line"><span class="title function_">writeToLog</span>(unesw);</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">38</span>:<span class="number">16</span> - JavaScript代码<span class="number">.0</span> - &amp;lt;h2&amp;gt;&amp;#<span class="number">25105</span>;&amp;#<span class="number">26159</span>;H2&amp;#<span class="number">26631</span>;&amp;#<span class="number">39064</span>;&amp;lt;/h2&amp;gt;</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">38</span>:<span class="number">16</span> - JavaScript代码<span class="number">.0</span> - &lt;h2&gt;我是H2标题&lt;/h2&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="解码转义XML-unEscapeXml"><a href="#解码转义XML-unEscapeXml" class="headerlink" title="解码转义XML(unEscapeXml )"></a>解码转义XML(<code>unEscapeXml </code>)</h3><h3 id="字符串转大写-upper"><a href="#字符串转大写-upper" class="headerlink" title="字符串转大写(upper)"></a>字符串转大写(<code>upper</code>)</h3><p>将传入字符串全部转大写.例如:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"Hello World"</span>;</span><br><span class="line">writeToLog(upper(str));</span><br></pre></td></tr></tbody></table></figure>

<h2 id="浮点型的函数-Numeric-Functions"><a href="#浮点型的函数-Numeric-Functions" class="headerlink" title="浮点型的函数(Numeric Functions)"></a>浮点型的函数(Numeric Functions)</h2><h3 id="计算绝对值-abs-num"><a href="#计算绝对值-abs-num" class="headerlink" title="计算绝对值(abs(num))"></a>计算绝对值(<code>abs(num)</code>)</h3><p>计算一个数值的绝对值,代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = -<span class="number">1234.01</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="number">1234.01</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">abs</span>(d1));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">abs</span>(d2));</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出为：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">51</span>:<span class="number">00</span> - JavaScript代码<span class="number">.0</span> - <span class="number">1234.01</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">51</span>:<span class="number">00</span> - JavaScript代码<span class="number">.0</span> - <span class="number">1234.01</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="最小双精度值-ceil-num"><a href="#最小双精度值-ceil-num" class="headerlink" title="最小双精度值(ceil(num))"></a>最小双精度值(<code>ceil(num)</code>)</h3><p>返回最小的双精度值。该值将被四舍五入。代码示例：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">d1</span> <span class="operator">=</span> -<span class="number">1234.01</span>;</span><br><span class="line"><span class="type">var</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="number">1234.01</span>;</span><br><span class="line">writeToLog(ceil(d1));</span><br><span class="line">writeToLog(ceil(d2));</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">52</span>:<span class="number">40</span> - JavaScript代码<span class="number">.0</span> - -<span class="number">1234</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">52</span>:<span class="number">40</span> - JavaScript代码<span class="number">.0</span> - <span class="number">1235</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="最大数值-floor-num"><a href="#最大数值-floor-num" class="headerlink" title="最大数值(floor(num))"></a>最大数值(<code>floor(num)</code>)</h3><p>返回最大数值,该值将被四舍五入,代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = -<span class="number">1234.01</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="number">1234.01</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">floor</span>(d1));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">floor</span>(d2));</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">55</span>:<span class="number">13</span> - JavaScript代码<span class="number">.0</span> - -<span class="number">1235</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">13</span>:<span class="number">55</span>:<span class="number">13</span> - JavaScript代码<span class="number">.0</span> - <span class="number">1234</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="字符串转数值-str2num-var"><a href="#字符串转数值-str2num-var" class="headerlink" title="字符串转数值(str2num(var))"></a>字符串转数值(<code>str2num(var)</code>)</h3><p>字符串转数值主要包含两个构造函数,分别是</p>
<ul>
<li><code>str2num(str)</code>:传入数值字符串,进行格式化转换</li>
<li><code>str2num(str,format)</code>:通过指定格式进行数值转换</li>
</ul>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"1.234,56"</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"12"</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>((<span class="title function_">str2num</span>(str1,<span class="string">"#,##0.00"</span>)));</span><br><span class="line"><span class="title function_">writeToLog</span>((<span class="title function_">str2num</span>(str2)));</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">02</span>:<span class="number">19</span> - JavaScript代码<span class="number">.0</span> - <span class="number">1.234</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">02</span>:<span class="number">19</span> - JavaScript代码<span class="number">.0</span> - <span class="number">12</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="截取数值-trunc"><a href="#截取数值-trunc" class="headerlink" title="截取数值(trunc)"></a>截取数值(<code>trunc</code>)</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">trunc</span>(<span class="number">1234.9</span>); <span class="comment">// 返回 1234</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="日期类型函数-Date-Functions"><a href="#日期类型函数-Date-Functions" class="headerlink" title="日期类型函数(Date Functions)"></a>日期类型函数(Date Functions)</h2><h3 id="日期相加-dateAdd"><a href="#日期相加-dateAdd" class="headerlink" title="日期相加(dateAdd)"></a>日期相加(<code>dateAdd</code>)</h3><p>针对日期变量进行相应的添加时间,添加频率包括年、月、日、时、分、秒 等等</p>
<p>函数定义:<code>dateAdd(date,format,plusNum)</code></p>
<ul>
<li>date:日期对象</li>
<li>format:要加的类型</li>
<li>plusNum:加的数值</li>
</ul>
<p>相加类型主要包括：</p>
<ul>
<li>y:年</li>
<li>m：月</li>
<li>d:日</li>
<li>w:周</li>
<li>wd:工作日</li>
<li>hh:小时</li>
<li>mi:分钟</li>
<li>ss:秒</li>
</ul>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fmt=<span class="string">'yyyy-MM-dd HH:mm:ss'</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"当前时间:"</span>+<span class="title function_">date2str</span>(d1,fmt));</span><br><span class="line"><span class="keyword">var</span> py=<span class="title function_">dateAdd</span>(d1,<span class="string">'y'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> fy=<span class="title function_">date2str</span>(py,fmt);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"加1年："</span>+fy);</span><br></pre></td></tr></tbody></table></figure>

<p>最终控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> - JavaScript代码<span class="number">.0</span> - 当前时间:<span class="number">2019</span>-08-<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> - JavaScript代码<span class="number">.0</span> - 加<span class="number">1</span>年：<span class="number">2020</span>-08-<span class="number">19</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="日期比较-dateDiff"><a href="#日期比较-dateDiff" class="headerlink" title="日期比较(dateDiff)"></a>日期比较(<code>dateDiff</code>)</h3><p>两个日期相互比较</p>
<p>函数定义:<code>dateDiff(startDate,endDate,type)</code></p>
<ul>
<li>startDate:开始日期</li>
<li>endDate:截止日期</li>
<li>type：返回相差数值类型</li>
</ul>
<p>类型主要包括：</p>
<ul>
<li>y:年</li>
<li>m：月</li>
<li>d:日</li>
<li>w:周</li>
<li>wd:工作日</li>
<li>hh:小时</li>
<li>mi:分钟</li>
<li>ss:秒</li>
</ul>
<h3 id="获取指定日期数值-getDayNumber"><a href="#获取指定日期数值-getDayNumber" class="headerlink" title="获取指定日期数值(getDayNumber)"></a>获取指定日期数值(<code>getDayNumber</code>)</h3><p>根据类型获取指定日期的数值</p>
<p>函数定义：<code>getDayNumber(date,type)</code></p>
<ul>
<li>date:当前日期实例</li>
<li>type:类别</li>
</ul>
<p>类别主要分四类</p>
<ul>
<li>y:获取当年的天数</li>
<li>m:获取当月的天数</li>
<li>w:获取本周的天数</li>
<li>wm:获取当月中本周的天数</li>
</ul>
<p>代码示例：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"y"</span>));</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"m"</span>));</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"w"</span>));</span><br><span class="line">writeToLog(getDayNumber(d1, <span class="string">"wm"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="getFiscalDate"><a href="#getFiscalDate" class="headerlink" title="getFiscalDate"></a>getFiscalDate</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Returns the fiscal Date from the date value,</span></span><br><span class="line"><span class="comment">// based on a given offset.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Usage:</span></span><br><span class="line"><span class="comment">// getFiscalDate(var);</span></span><br><span class="line"><span class="comment">// 1: Date - The Variable with the Date.</span></span><br><span class="line"><span class="comment">// 2: String - The Date/Month which represents</span></span><br><span class="line"><span class="comment">// the fiscal Start Offset. Format allways "dd.MM.".</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 2006-11-15</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">"01.07."</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"10.12."</span>;</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getFiscalDate</span>(d1, str1));</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getFiscalDate</span>(d1, str2));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取下一个工作日日期-getNextWorkingDay"><a href="#获取下一个工作日日期-getNextWorkingDay" class="headerlink" title="获取下一个工作日日期(getNextWorkingDay)"></a>获取下一个工作日日期(<code>getNextWorkingDay</code>)</h3><p>传入当前日期,获取该日期后面一个工作日日期</p>
<p>函数定义<code>getNextWorkingDay(date)</code></p>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 周1</span></span><br><span class="line"><span class="keyword">var</span> d2=<span class="title function_">str2date</span>(<span class="string">'2019-08-19 16:36:00'</span>,fmt);</span><br><span class="line"><span class="comment">//周 6</span></span><br><span class="line"><span class="keyword">var</span> d3=<span class="title function_">str2date</span>(<span class="string">'2019-08-17 16:36:00'</span>,fmt);</span><br><span class="line"></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(<span class="title function_">getNextWorkingDay</span>(d1),fmt));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(<span class="title function_">getNextWorkingDay</span>(d2),fmt));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">date2str</span>(<span class="title function_">getNextWorkingDay</span>(d3),fmt));</span><br></pre></td></tr></tbody></table></figure>

<p>我们这d2和d3变量中定义了不同的日期实例,分别是周1和周6,最终通过<code>getNextWorkingDay</code>能获取得到下一个工作日日期，控制台输出如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span> - JavaScript代码<span class="number">.0</span> - <span class="number">2019</span>-08-<span class="number">20</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span> - JavaScript代码<span class="number">.0</span> - <span class="number">2019</span>-08-<span class="number">20</span> <span class="number">16</span>:<span class="number">36</span>:<span class="number">00</span></span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">16</span>:<span class="number">37</span>:<span class="number">38</span> - JavaScript代码<span class="number">.0</span> - <span class="number">2019</span>-08-<span class="number">19</span> <span class="number">16</span>:<span class="number">36</span>:<span class="number">00</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取当前月份数值-month-date"><a href="#获取当前月份数值-month-date" class="headerlink" title="获取当前月份数值(month(date))"></a>获取当前月份数值(<code>month(date)</code>)</h3><p>获取当前日期的月份数值,需要注意的是,该值的月份是从0开始的,因此我们最终得到的结果应该+1才是我们的真实月份数值，代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>();<span class="comment">//2019/08/19</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">month</span>(d1)); <span class="comment">//最终输出为7</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取当前时间的季度值-quarter-date"><a href="#获取当前时间的季度值-quarter-date" class="headerlink" title="获取当前时间的季度值(quarter(date))"></a>获取当前时间的季度值(<code>quarter(date)</code>)</h3><p>根据指定日期获取当前季度数值</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>();<span class="comment">//2019/08/19</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">quarter</span>(d1));<span class="comment">//最终输出为3(代表第三季度)</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="字符串转日期-str2date"><a href="#字符串转日期-str2date" class="headerlink" title="字符串转日期(str2date)"></a>字符串转日期(<code>str2date</code>)</h3><p>字符串转日期和日期转字符串有点类似,只不过主体对换了一下,但是传入的格式参数都是一样的，主要有4个重载函数:</p>
<ul>
<li><code>str2date(str)</code>:默认转换</li>
<li><code>str2date(str,format)</code>:传入format格式化参数</li>
<li><code>str2date(str,format,iso)</code>:根据iso编码及格式化参数进行转换</li>
<li><code>str2date(str,format,iso,timezone)</code>:根据不同时区的iso编码进行格式化转换</li>
</ul>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">str2date</span>(<span class="string">"01.12.2006"</span>,<span class="string">"dd.MM.yyyy"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">str2date</span>(<span class="string">"01.12.2006 23:23:01"</span>,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">str2date</span>(<span class="string">"Tue.May.2006"</span>,<span class="string">"E.MMM.yyyy"</span>,<span class="string">"EN"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">str2date</span>(<span class="string">"22.02.2008 23:23:01"</span>,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"DE"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">str2date</span>(<span class="string">"22.02.2008 23:23:01"</span>,<span class="string">"dd.MM.yyyy HH:mm:ss"</span>,<span class="string">"DE"</span>, <span class="string">"EST"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="截取日期-truncDate-date-type"><a href="#截取日期-truncDate-date-type" class="headerlink" title="截取日期(truncDate(date,type))"></a>截取日期(<code>truncDate(date,type)</code>)</h3><p>指定截取不同的日期部分,函数定义truncDate(date,type)</p>
<ul>
<li>date:当前日期实例</li>
<li>type:截取类型</li>
</ul>
<p>类型主要有6中,分别是整型，从0-5：</p>
<ul>
<li>5：截取月份</li>
<li>4：截取天数</li>
<li>3:截取小时</li>
<li>2：截取分钟</li>
<li>1：截取秒</li>
<li>0:截取毫秒</li>
</ul>
<p>代码示例 如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dateTime = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> date0 = <span class="title function_">truncDate</span>(dateTime, <span class="number">0</span>); <span class="comment">// gives back today at yyyy/MM/dd HH:mm:ss.000</span></span><br><span class="line"><span class="keyword">var</span> date1 = <span class="title function_">truncDate</span>(dateTime, <span class="number">1</span>); <span class="comment">// gives back today at yyyy/MM/dd HH:mm:00.000</span></span><br><span class="line"><span class="keyword">var</span> date2 = <span class="title function_">truncDate</span>(dateTime, <span class="number">2</span>); <span class="comment">// gives back today at yyyy/MM/dd HH:00:00.000</span></span><br><span class="line"><span class="keyword">var</span> date3 = <span class="title function_">truncDate</span>(dateTime, <span class="number">3</span>); <span class="comment">// gives back today at yyyy/MM/dd 00:00:00.000</span></span><br><span class="line"><span class="keyword">var</span> date4 = <span class="title function_">truncDate</span>(dateTime, <span class="number">4</span>); <span class="comment">// gives back today at yyyy/MM/01 00:00:00.000</span></span><br><span class="line"><span class="keyword">var</span> date5 = <span class="title function_">truncDate</span>(dateTime, <span class="number">5</span>); <span class="comment">// gives back today at yyyy/01/01 00:00:00.000</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取当年的周数-week"><a href="#获取当年的周数-week" class="headerlink" title="获取当年的周数(week)"></a>获取当年的周数(<code>week</code>)</h3><p>获取指定日期的周数,代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">//2019/08/19</span></span><br><span class="line"> </span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">week</span>(d1));<span class="comment">// 返回34</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取年份-year"><a href="#获取年份-year" class="headerlink" title="获取年份(year)"></a>获取年份(<code>year</code>)</h3><p>获取传入日期的年份,代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">//2019/08/19</span></span><br><span class="line"> </span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">year</span>(d1));<span class="comment">// 返回2019</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="逻辑判断型函数-Logic-Functions"><a href="#逻辑判断型函数-Logic-Functions" class="headerlink" title="逻辑判断型函数(Logic Functions)"></a>逻辑判断型函数(Logic Functions)</h2><h3 id="isCodepage"><a href="#isCodepage" class="headerlink" title="isCodepage"></a>isCodepage</h3><p>判断字符串的codepage项,代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xStr = <span class="string">"RÃ©al"</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isCodepage</span>(xStr, <span class="string">"UTF-8"</span>));<span class="comment">// true</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isCodepage</span>(xStr, <span class="string">"windows-1250"</span>));<span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="是否日期-isDate-str"><a href="#是否日期-isDate-str" class="headerlink" title="是否日期(isDate(str))"></a>是否日期(<code>isDate(str)</code>)</h3><p>判断当前字符串是否日期</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="string">"Hello World"</span>;      </span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isDate</span>(d1));<span class="comment">//false</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isDate</span>(d2));<span class="comment">//true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="是否为空-isEmpty-str"><a href="#是否为空-isEmpty-str" class="headerlink" title="是否为空(isEmpty(str))"></a>是否为空(<code>isEmpty(str)</code>)</h3><p>判断字符串是否为空</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="string">"Hello World"</span>;      </span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">isEmpty</span>(d));<span class="comment">//false</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="判断字符串是否为邮箱标准格式-isMailValid-str"><a href="#判断字符串是否为邮箱标准格式-isMailValid-str" class="headerlink" title="判断字符串是否为邮箱标准格式(isMailValid(str))"></a>判断字符串是否为邮箱标准格式(<code>isMailValid(str)</code>)</h3><p>判断一个字符串是否是邮箱</p>
<h3 id="判断是否是数值-isNum-str"><a href="#判断是否是数值-isNum-str" class="headerlink" title="判断是否是数值(isNum(str))"></a>判断是否是数值(<code>isNum(str)</code>)</h3><p>判断一个字符串是否是数值</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"Hello World"</span>;      </span><br><span class="line"><span class="keyword">var</span> str2 = <span class="number">123456</span>;</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">isNum</span>(str1));<span class="comment">//false</span></span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">isNum</span>(str2));<span class="comment">//true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="是否正则匹配-isRegExp"><a href="#是否正则匹配-isRegExp" class="headerlink" title="是否正则匹配(isRegExp)"></a>是否正则匹配(<code>isRegExp</code>)</h3><p>判断给定的正则表达式是否匹配当前的字符串，主要有2个函数定义：</p>
<ul>
<li>isRegExp(str,reg):给定正则判断字符串是否匹配</li>
<li>isRegExp(str,reg1,reg2,reg3…)；可以递归判断正则匹配</li>
</ul>
<p>最终返回的是匹配的次数数值,如果不匹配,返回-1</p>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> email1 =<span class="string">"info@proconis.de"</span>;</span><br><span class="line"><span class="keyword">var</span> email2= <span class="string">"support@proconis.co.uk"</span>;</span><br><span class="line"><span class="keyword">var</span> email3= <span class="string">"HelloWorld@x"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg1=<span class="string">"^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$"</span>;</span><br><span class="line"><span class="keyword">var</span> reg2=<span class="string">"^[\\w-\.]+@([\\w-]+\\.)+[\\w-]{2,4}$"</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isRegExp</span>(email1, reg1,reg2) + <span class="string">" Matches"</span>); <span class="comment">//1</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isRegExp</span>(email2, reg1,reg2) + <span class="string">" Matches"</span>);  <span class="comment">//2</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isRegExp</span>(email3, reg1,reg2) + <span class="string">" Matches"</span>);<span class="comment">// 1</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="是否工作日-isWorkingDay-date"><a href="#是否工作日-isWorkingDay-date" class="headerlink" title="是否工作日(isWorkingDay(date))"></a>是否工作日(<code>isWorkingDay(date)</code>)</h3><p>判断某日期是否是工作日,代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>();<span class="comment">//周1</span></span><br><span class="line"><span class="keyword">var</span> d2=<span class="title function_">str2date</span>(<span class="string">'2019-08-17'</span>,<span class="string">'yyyy-MM-dd'</span>) <span class="comment">//周六</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isWorkingDay</span>(d1));<span class="comment">//true</span></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">isWorkingDay</span>(d2));<span class="comment">//false</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="特殊的函数-Special-Functions"><a href="#特殊的函数-Special-Functions" class="headerlink" title="特殊的函数(Special Functions)"></a>特殊的函数(Special Functions)</h2><h3 id="弹框信息-Alert-msg"><a href="#弹框信息-Alert-msg" class="headerlink" title="弹框信息(Alert(msg))"></a>弹框信息(<code>Alert(msg)</code>)</h3><p>在屏幕前弹出一个信息框</p>
<h3 id="加载JavaScript文件-LoadScriptFile"><a href="#加载JavaScript文件-LoadScriptFile" class="headerlink" title="加载JavaScript文件(LoadScriptFile)"></a>加载JavaScript文件(<code>LoadScriptFile</code>)</h3><p>将一个javascript文件加载到实际的运行上下文中。应该从定义的StartScript调用此函数，否则，每次处理都会加载javascript文件行。</p>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xPfad = <span class="string">"F:/bak/Hello.js"</span>;</span><br><span class="line"><span class="title class_">LoadScriptFile</span>(xPfad);</span><br></pre></td></tr></tbody></table></figure>

<p>此时,我们的外部JS文件仅仅是包含一句简单的输出，如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Hello LoadScriptFile,outSide JS File "</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>最终运行时,控制台会打印出我们在外部JS中的输出行</p>
<h3 id="从当前Tab栏加载JS并运行-LoadScriptFromTab"><a href="#从当前Tab栏加载JS并运行-LoadScriptFromTab" class="headerlink" title="从当前Tab栏加载JS并运行(LoadScriptFromTab)"></a>从当前Tab栏加载JS并运行(<code>LoadScriptFromTab</code>)</h3><p>如果我们在当前的JavaScript组件中通过模块化的方式编写了很多脚本代码,我们可以通过<code>LoadScriptFromTab</code>函数进行相互调用,这对于开发抽象来说是很好的,代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"外部Tab加载JS-------------------------"</span>)</span><br><span class="line"><span class="title class_">LoadScriptFromTab</span>(<span class="string">'Item_1'</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="有效卡号判断-LuhnCheck"><a href="#有效卡号判断-LuhnCheck" class="headerlink" title="有效卡号判断(LuhnCheck)"></a>有效卡号判断(<code>LuhnCheck</code>)</h3><p>如果给定的是一个有效的卡号,则返回true</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"4444333322221111"</span>;      </span><br><span class="line"><span class="title function_">writeToLog</span>(str1 + <span class="string">": "</span> + <span class="title class_">LuhnCheck</span>(str1)); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"4444333322221110"</span>;      </span><br><span class="line"><span class="title function_">writeToLog</span>(str2 + <span class="string">": "</span> + <span class="title class_">LuhnCheck</span>(str2));<span class="comment">//false</span></span><br><span class="line">      </span><br></pre></td></tr></tbody></table></figure>

<h3 id="向文件中追加数据-appendToFile"><a href="#向文件中追加数据-appendToFile" class="headerlink" title="向文件中追加数据(appendToFile)"></a>向文件中追加数据(<code>appendToFile</code>)</h3><p>向指定文件中追加数据,如果文件不存在则创建文件</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> file = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++){</span><br><span class="line"> <span class="title function_">appendToFile</span>(file,<span class="string">'TEST'</span>+i+<span class="string">"\r\n"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>此时,该代码会向<code>log.txt</code>文件输出100条数据行</p>
<h3 id="decode函数"><a href="#decode函数" class="headerlink" title="decode函数"></a>decode函数</h3><p>decode函数有点类似于<code>IF-THEN-ELSE</code>语句，即表示通过给定查询的字符串是否存在，如果存在，即替换,否则返回默认值</p>
<p>代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"Hallo"</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">decode</span>(str1, <span class="string">"Hallo"</span>, <span class="string">"Hello"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">decode</span>(str1, <span class="string">"1"</span>, <span class="string">"Mr"</span>, <span class="string">"2"</span>, <span class="string">"Mrs"</span>, <span class="string">"N/A"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">decode</span>(str1, <span class="string">"1"</span>, <span class="string">"Mr"</span>, <span class="string">"2"</span>, <span class="string">"Mrs"</span>));</span><br><span class="line">str1 = <span class="string">"Mrs"</span>;</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">decode</span>(str1, <span class="string">"1"</span>, <span class="string">"Mr"</span>, <span class="string">"2"</span>, <span class="string">"Mrs"</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>控制台输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScript代码<span class="number">.0</span> - Hello</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScript代码<span class="number">.0</span> - N/A</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScript代码<span class="number">.0</span> - Hallo</span><br><span class="line"><span class="number">2019</span>/08/<span class="number">19</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">01</span> - JavaScript代码<span class="number">.0</span> - Mrs</span><br></pre></td></tr></tbody></table></figure>

<h3 id="执行命令-execProcess"><a href="#执行命令-execProcess" class="headerlink" title="执行命令(execProcess)"></a>执行命令(<code>execProcess</code>)</h3><p>代码如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t=<span class="title function_">execProcess</span>(<span class="string">'ping www.baidu.com'</span>);</span><br><span class="line"><span class="title function_">writeToLog</span>(t)</span><br></pre></td></tr></tbody></table></figure>

<p>调用命令行,ping百度的网址，最终输出返回数据</p>
<h3 id="执行SQL语句-fireToDB"><a href="#执行SQL语句-fireToDB" class="headerlink" title="执行SQL语句(fireToDB)"></a>执行SQL语句(<code>fireToDB</code>)</h3><p>通过获取数据库连接名称，传递SQL语句,以返回SQL查询的值,函数定义：</p>
<ul>
<li>fireToDB(connectionName,SQL)；第一个参数为数据库连接名称，我们在JNDI中定义的名称，第二个参数为SQL语句</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strConn = <span class="string">"MY Connection"</span>;</span><br><span class="line"><span class="keyword">var</span> strSQL = <span class="string">"SELECT COUNT(*) FROM ..."</span>;</span><br><span class="line"><span class="keyword">var</span> xArr = <span class="title function_">fireToDB</span>(strConn, strSQL);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="仅仅获取数值-getDigitsOnly"><a href="#仅仅获取数值-getDigitsOnly" class="headerlink" title="仅仅获取数值(getDigitsOnly)"></a>仅仅获取数值(<code>getDigitsOnly</code>)</h3><p>在给定的字符串中仅仅筛选过滤得到数值，代码如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"abc123cde"</span>;      </span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">getDigitsOnly</span>(str1));<span class="comment">//返回123</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取Kettle环境变量的值-getEnvironmentVar"><a href="#获取Kettle环境变量的值-getEnvironmentVar" class="headerlink" title="获取Kettle环境变量的值(getEnvironmentVar)"></a>获取Kettle环境变量的值(<code>getEnvironmentVar</code>)</h3><p>获取在Kettle中的环境变量的值</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">getEnvironmentVar</span>(<span class="string">"user.dir"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">getEnvironmentVar</span>(<span class="string">"user.name"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取当前进程的受影响行数-getProcessCount-type"><a href="#获取当前进程的受影响行数-getProcessCount-type" class="headerlink" title="获取当前进程的受影响行数(getProcessCount(type))"></a>获取当前进程的受影响行数(<code>getProcessCount(type)</code>)</h3><p>根据类型获取当前进程的受影响行数，类型如下：</p>
<ul>
<li>u:更新行数</li>
<li>i:插入行数</li>
<li>w:写入行数</li>
<li>r:读取行数</li>
<li>o:输出行数</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">getProcessCount</span>(<span class="string">"u"</span>));</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">getProcessCount</span>(<span class="string">"r"</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取当前转换名称-getTransformationName"><a href="#获取当前转换名称-getTransformationName" class="headerlink" title="获取当前转换名称(getTransformationName)"></a>获取当前转换名称(<code>getTransformationName</code>)</h3><p>获取当前的转换名称</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xTranName = <span class="title function_">getTransformationName</span>();</span><br><span class="line"><span class="title function_">writeToLog</span>(xTranName);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取Kettle环境中的变量值-getVariable"><a href="#获取Kettle环境中的变量值-getVariable" class="headerlink" title="获取Kettle环境中的变量值(getVariable)"></a>获取Kettle环境中的变量值(<code>getVariable</code>)</h3><p>从当前的Kettle环境中获取指定的变量值,目前函数有2个重载：</p>
<ul>
<li>getVariable(varName)；根据变量名称获取变量值</li>
<li>getVariable(varName,defaultValue):根据变量名获取值,如果不存在则使用默认值</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strVarName=<span class="string">"getVariableTest"</span>;</span><br><span class="line"><span class="keyword">var</span> strVarValue=<span class="string">"123456"</span>;</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getVariable</span>(strVarName, <span class="string">""</span>));</span><br><span class="line"><span class="title function_">setVariable</span>(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getVariable</span>(strVarName, <span class="string">""</span>));</span><br><span class="line">strVarValue=<span class="string">"654321"</span>;</span><br><span class="line"><span class="title function_">setVariable</span>(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getVariable</span>(strVarName, <span class="string">""</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="控制台打印-println"><a href="#控制台打印-println" class="headerlink" title="控制台打印(println)"></a>控制台打印(<code>println</code>)</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Hello World!"</span>;</span><br><span class="line"><span class="title function_">print</span>(str);</span><br><span class="line">      </span><br></pre></td></tr></tbody></table></figure>

<h3 id="移除数值-removeDigits"><a href="#移除数值-removeDigits" class="headerlink" title="移除数值(removeDigits)"></a>移除数值(<code>removeDigits</code>)</h3><p>移除给定字符串中的数值，代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">"abc123cde"</span>; </span><br><span class="line"></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="title function_">removeDigits</span>(str1));<span class="comment">//返回abccde</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="发送邮件"><a href="#发送邮件" class="headerlink" title="发送邮件"></a>发送邮件</h3><h3 id="设置环境变量-setEnvironmentVar"><a href="#设置环境变量-setEnvironmentVar" class="headerlink" title="设置环境变量(setEnvironmentVar)"></a>设置环境变量(<code>setEnvironmentVar</code>)</h3><p>通过在Script脚本组件中调用函数重新设置Kettle的环境变量</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strVarName=<span class="string">"setEnvTest"</span>;</span><br><span class="line"><span class="keyword">var</span> strVarValue=<span class="string">"123456"</span>;</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getEnvironmentVar</span>(strVarName));</span><br><span class="line"><span class="title function_">setEnvironmentVar</span>(strVarName,strVarValue);</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getEnvironmentVar</span>(strVarName));</span><br><span class="line">strVarValue=<span class="string">"654321"</span>;</span><br><span class="line"><span class="title function_">setEnvironmentVar</span>(strVarName,strVarValue);</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getEnvironmentVar</span>(strVarName));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="设置变量-setVariable"><a href="#设置变量-setVariable" class="headerlink" title="设置变量(setVariable)"></a>设置变量(<code>setVariable</code>)</h3><p>通过<code>setVariable</code>函数设置环境变量,该用途可以用于重新赋值Kettle环境中已经存在的变量值或者重新生成变量值</p>
<p>函数定义<code>setVariable(key,value,level)</code></p>
<ul>
<li>key:变量名称</li>
<li>value:变量值</li>
<li>level:级别,主要包括s(system)、r(root)、p(parent)、g(grandparent)四种类别</li>
</ul>
<p>代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strVarName=<span class="string">"setEnvTest"</span>;</span><br><span class="line"><span class="keyword">var</span> strVarValue=<span class="string">"123456"</span>;</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getVariable</span>(strVarName, <span class="string">""</span>));</span><br><span class="line"><span class="title function_">setVariable</span>(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getVariable</span>(strVarName, <span class="string">""</span>));</span><br><span class="line">strVarValue=<span class="string">"654321"</span>;</span><br><span class="line"><span class="title function_">setVariable</span>(strVarName,strVarValue, <span class="string">"r"</span>);</span><br><span class="line"><span class="title class_">Alert</span>(<span class="title function_">getVariable</span>(strVarName, <span class="string">""</span>));</span><br></pre></td></tr></tbody></table></figure>

<h3 id="写入日志-writeToLog"><a href="#写入日志-writeToLog" class="headerlink" title="写入日志(writeToLog)"></a>写入日志(<code>writeToLog</code>)</h3><p>打印并写入日志信息,该函数可能是我们用到的最多的函数,可以帮助我们调试信息,主要有两个重载：</p>
<ul>
<li>writeToLog(msg):写入msg日志信息</li>
<li>writeToLog(level,msg)：根据level基本写入msg信息</li>
</ul>
<p>关于日志的级别,这里主要是简写的方式,主要如下：</p>
<ul>
<li>d(Debug):调试模式</li>
<li>l(Detailed):详细</li>
<li>e(Error):错误</li>
<li>m(Minimal):最小日志</li>
<li>r(RowLevel):行级日志</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"Hello World!"</span>);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"r"</span>, <span class="string">"Hello World!"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="文件处理类函数-File-Functions"><a href="#文件处理类函数-File-Functions" class="headerlink" title="文件处理类函数(File Functions)"></a>文件处理类函数(File Functions)</h2><h3 id="复制文件-copyFile"><a href="#复制文件-copyFile" class="headerlink" title="复制文件(copyFile)"></a>复制文件(<code>copyFile</code>)</h3><p>复制一个文件到目标目录,函数定义如下：</p>
<p><code>copyFile(sourceFile,targetFile,overwrite)</code></p>
<ul>
<li>sourceFile:源文件</li>
<li>targetFile:目标文件</li>
<li>overWrite:是否覆盖,如果目标文件存在的话,布尔类型</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">copyFile</span>(file1,targetFile,<span class="literal">false</span>)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="创建文件夹-createFolder"><a href="#创建文件夹-createFolder" class="headerlink" title="创建文件夹(createFolder)"></a>创建文件夹(<code>createFolder</code>)</h3><p>创建一个文件夹,代码示例如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strFolder = <span class="string">"F:/bak/createFolder"</span>;</span><br><span class="line"><span class="title function_">createFolder</span>(strFolder);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="删除文件-deleteFile"><a href="#删除文件-deleteFile" class="headerlink" title="删除文件(deleteFile)"></a>删除文件(<code>deleteFile</code>)</h3><p>删除一个文件(不能删除文件夹)</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="title function_">deleteFile</span>(targetFile);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="判断文件是否存在-fileExists"><a href="#判断文件是否存在-fileExists" class="headerlink" title="判断文件是否存在(fileExists())"></a>判断文件是否存在(<code>fileExists()</code>)</h3><p>判断文件是否存在</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="title function_">fileExists</span>(targetFile);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取文件扩展名-getFileExtension"><a href="#获取文件扩展名-getFileExtension" class="headerlink" title="获取文件扩展名(getFileExtension)"></a>获取文件扩展名(<code>getFileExtension</code>)</h3><p>如果文件不存在,则返回null,代码示例</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> ext=<span class="title function_">getFileExtension</span>(file1);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"扩展名："</span>+ext)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取文件大小-getFileSize"><a href="#获取文件大小-getFileSize" class="headerlink" title="获取文件大小(getFileSize)"></a>获取文件大小(<code>getFileSize</code>)</h3><p>获取文件大小,结果是一个long类型的长整型数值</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> ext=<span class="title function_">getFileSize</span>(file1);</span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"大小："</span>+ext)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取文件最后修改日期-getLastModifiedTime"><a href="#获取文件最后修改日期-getLastModifiedTime" class="headerlink" title="获取文件最后修改日期(getLastModifiedTime)"></a>获取文件最后修改日期(<code>getLastModifiedTime</code>)</h3><p>获取文件最后修改日期,函数定义：</p>
<p><code>getLastModifiedTime(filePath,format)</code></p>
<ul>
<li>filePath:文件路径</li>
<li>format：日期格式化</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> ext=<span class="title function_">getLastModifiedTime</span>(file1,<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取文件的父文件夹名称-getParentFoldername"><a href="#获取文件的父文件夹名称-getParentFoldername" class="headerlink" title="获取文件的父文件夹名称(getParentFoldername)"></a>获取文件的父文件夹名称(<code>getParentFoldername</code>)</h3><p>获取文件的父文件夹名称</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> parentFolder=<span class="title function_">getParentFoldername</span>(file1);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="获取文件简称-getShortName"><a href="#获取文件简称-getShortName" class="headerlink" title="获取文件简称(getShortName)"></a>获取文件简称(<code>getShortName</code>)</h3><p>获取文件简称</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> shortName=<span class="title function_">getShortFilename</span>(file1);</span><br><span class="line"></span><br><span class="line"><span class="title function_">writeToLog</span>(<span class="string">"简单名称:"</span>+shortName)<span class="comment">//返回log.txt</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="判断是否是一个文件-isFile"><a href="#判断是否是一个文件-isFile" class="headerlink" title="判断是否是一个文件(isFile)"></a>判断是否是一个文件(<code>isFile</code>)</h3><p>判断是否是一个文件</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> flag=<span class="title function_">isFile</span>(file1) <span class="comment">//true</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="判断是否是一个文件夹-isFolder"><a href="#判断是否是一个文件夹-isFolder" class="headerlink" title="判断是否是一个文件夹(isFolder)"></a>判断是否是一个文件夹(<code>isFolder</code>)</h3><p>判断是否是一个文件夹</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> flag=<span class="title function_">isFolder</span>(file1) <span class="comment">//false</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="加载一个文件的内容-loadFileContent"><a href="#加载一个文件的内容-loadFileContent" class="headerlink" title="加载一个文件的内容(loadFileContent)"></a>加载一个文件的内容(<code>loadFileContent</code>)</h3><p>从指定文件中加载内容,主要有两个重载函数：</p>
<ul>
<li>loadFileContent(filePath):默认加载文件</li>
<li>loadFileContent(filePath,encoding):指定编码加载文件内容</li>
</ul>
<p>代码示例：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> content=<span class="title function_">loadFileContent</span>(file1);</span><br><span class="line"><span class="keyword">var</span> c1=<span class="title function_">loadFileContent</span>(file1,<span class="string">"UTF-8"</span>)</span><br><span class="line"><span class="title function_">writeToLog</span>(content)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="移动文件-moveFile"><a href="#移动文件-moveFile" class="headerlink" title="移动文件(moveFile)"></a>移动文件(<code>moveFile</code>)</h3><p>移动指定文件，函数定义moveFile(source,target,overWrite)</p>
<ul>
<li>source:源文件</li>
<li>target:目标文件</li>
<li>overWrite；是否覆盖,如果目标文件存在,布尔类型值</li>
</ul>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> file1 = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> targetFile=<span class="string">"F:/bak/logTarget.txt"</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">moveFile</span>(file1,targetFile,<span class="literal">false</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="创建一个空文件-touch"><a href="#创建一个空文件-touch" class="headerlink" title="创建一个空文件(touch)"></a>创建一个空文件(<code>touch</code>)</h3><p>创建一个空文件</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strFile = <span class="string">"F:/bak/log.txt"</span>;</span><br><span class="line"><span class="title function_">touch</span>(strFile);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上就是Kettle 8.3版本中的内置函数方法,方法很多,写这篇博客也是很累,算是全部都学习了一遍,脑子里已经记忆了一遍,但是我们也不需要死记硬背,就和我们学些Linux命令一样,如果你知道<code>man</code>命令，对某个命令不是很了解的话直接通过man命令学习即可.</p>
<p>Kettle也是如此,对于某个函数不是很了解的话,右键点击该函数,会出现<code>sample</code>字样菜单,点击该菜单即可弹出该函数的介绍和使用信息,里面包含了该函数的调用示例和函数详细介绍,也是很人性化的.</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/07/28/sqlite/"><img class="fill" src="/images/default.jpeg" alt="SQLite学习【一】"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-28T05:43:59.000Z" title="2021/7/28 下午1:43:59">2021-07-28</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:16.940Z" title="2022/2/23 下午5:21:16">2022-02-23</time>更新</span><span class="level-item">1 分钟读完 (大约181个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/28/sqlite/">SQLite学习【一】</a></h1><div class="content"><span id="more"></span>
<figure class="highlight sql"><figcaption><span>SQLite学习.sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--创建数据库(数据库名可以是任何名字，文件类型始终为sqlite类型)</span></span><br><span class="line">sqlite3 test.sqlite</span><br><span class="line">sqlite3 other.db</span><br><span class="line">sqlite3 db.sqlite3</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建数据表 增删改查 SQLite</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> DEPARTMENT(</span><br><span class="line">   ID <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY      <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   DEPT           <span class="type">CHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   EMP_ID         <span class="type">INT</span>      <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>  Test(</span><br><span class="line">   ID <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   NAME           TEXT    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   AGE            <span class="type">INT</span>     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   ADDRESS        <span class="type">CHAR</span>(<span class="number">50</span>),</span><br><span class="line">   SALARY         <span class="type">REAL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="string">'table'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span>  DEPARTMENT;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="string">'table'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--增</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `Test` (ID, NAME, AGE, ADDRESS, SALARY) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">'测试人员'</span>,<span class="number">35</span>,<span class="string">'东北那旮瘩'</span>,<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `Test` (ID, NAME, AGE, ADDRESS, SALARY)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="string">'测试人员'</span>,<span class="number">35</span>,<span class="string">'东北那旮瘩'</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> Test ;</span><br><span class="line"><span class="comment">--删</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">from</span> `Test` <span class="keyword">where</span> ID<span class="operator">=</span><span class="string">'1'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> Test ;</span><br><span class="line"></span><br><span class="line"><span class="comment">--改</span></span><br><span class="line"><span class="keyword">update</span> `Test` <span class="keyword">set</span> Name <span class="operator">=</span><span class="string">'测试人员2'</span> <span class="keyword">where</span> ID<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> `Test`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> Test;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="string">'table'</span>;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/6/">上一页</a></div><div class="pagination-next"><a href="/page/8/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/6/">6</a></li><li><a class="pagination-link is-current" href="/page/7/">7</a></li><li><a class="pagination-link" href="/page/8/">8</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/11/">11</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Blog/"><span class="level-start"><span class="level-item">Blog</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Csharp/"><span class="level-start"><span class="level-item">Csharp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Technology/"><span class="level-start"><span class="level-item">Technology</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Tools/"><span class="level-start"><span class="level-item">Tools</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Tools/%E8%BF%90%E7%BB%B4/"><span class="level-start"><span class="level-item">运维</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/VUE/"><span class="level-start"><span class="level-item">VUE</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/cranky/"><span class="level-start"><span class="level-item">cranky</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/lifestyle/"><span class="level-start"><span class="level-item">lifestyle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/node/"><span class="level-start"><span class="level-item">node</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/other/"><span class="level-start"><span class="level-item">other</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/xml/"><span class="level-start"><span class="level-item">xml</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%91%98%E5%BD%95/"><span class="level-start"><span class="level-item">摘录</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/"><span class="level-start"><span class="level-item">用户认证</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%BD%AC%E8%BD%BD/"><span class="level-start"><span class="level-item">转载</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/2022/12/28/Shell%E7%AC%94%E8%AE%B0/"><img src="/images/default.jpeg" alt="Shell笔记"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-12-28T09:13:32.000Z">2022-12-28</time></p><p class="title"><a href="/2022/12/28/Shell%E7%AC%94%E8%AE%B0/">Shell笔记</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2022/12/28/IIS%E5%BA%94%E7%94%A8HTTP%E5%8D%8F%E8%AE%AE%E5%8D%87%E7%BA%A7HTTPS/"><img src="/images/default.jpeg" alt="IIS应用HTTP协议升级HTTPS"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-12-28T08:32:34.000Z">2022-12-28</time></p><p class="title"><a href="/2022/12/28/IIS%E5%BA%94%E7%94%A8HTTP%E5%8D%8F%E8%AE%AE%E5%8D%87%E7%BA%A7HTTPS/">IIS应用HTTP协议升级HTTPS</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2022/12/28/Oracle%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E5%B9%B6%E6%8E%88%E6%9D%83/"><img src="/images/default.jpeg" alt="Oracle创建视图并授权"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-12-28T08:13:35.000Z">2022-12-28</time></p><p class="title"><a href="/2022/12/28/Oracle%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E5%B9%B6%E6%8E%88%E6%9D%83/">Oracle创建视图并授权</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2022/12/28/TLS1-2%E5%92%8CTLS1-1%E7%9A%84%E5%8C%BA%E5%88%AB/"><img src="/images/default.jpeg" alt="TLS1.2和TLS1.1的区别"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-12-28T06:56:29.000Z">2022-12-28</time></p><p class="title"><a href="/2022/12/28/TLS1-2%E5%92%8CTLS1-1%E7%9A%84%E5%8C%BA%E5%88%AB/">TLS1.2和TLS1.1的区别</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2022/12/28/Windows-OpenSSL%E5%88%9B%E5%BB%BA%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E8%84%9A%E6%9C%AC/"><img src="/images/default.jpeg" alt="Windows+OpenSSL创建自签名证书脚本"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-12-28T06:39:28.000Z">2022-12-28</time></p><p class="title"><a href="/2022/12/28/Windows-OpenSSL%E5%88%9B%E5%BB%BA%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E8%84%9A%E6%9C%AC/">Windows+OpenSSL创建自签名证书脚本</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">十二月 2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">十一月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">九月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">三月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/2019-nCoV/"><span class="tag">2019-nCoV</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ADO-NET/"><span class="tag">ADO.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-NET/"><span class="tag">ASP.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-Net-MVC/"><span class="tag">ASP.Net MVC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alert/"><span class="tag">Alert</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C#</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Command/"><span class="tag">Command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DTD/"><span class="tag">DTD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DingTalk/"><span class="tag">DingTalk</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gmail/"><span class="tag">Gmail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Grafana/"><span class="tag">Grafana</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IIS/"><span class="tag">IIS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mail/"><span class="tag">Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Markdown/"><span class="tag">Markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenSSL/"><span class="tag">OpenSSL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Oracle/"><span class="tag">Oracle</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Postman/"><span class="tag">Postman</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prometheus/"><span class="tag">Prometheus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SOAP/"><span class="tag">SOAP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQLlite/"><span class="tag">SQLlite</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Schema/"><span class="tag">Schema</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sql/"><span class="tag">Sql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/System-Net-Mail/"><span class="tag">System.Net.Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Technology/"><span class="tag">Technology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML/"><span class="tag">XML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML-Schema/"><span class="tag">XML Schema</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emoji/"><span class="tag">emoji</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kettle/"><span class="tag">kettle</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live2d/"><span class="tag">live2d</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/self-signed-certificates/"><span class="tag">self-signed certificates</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shadowsocks/"><span class="tag">shadowsocks</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql-server/"><span class="tag">sql server</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlserver/"><span class="tag">sqlserver</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/v2ray/"><span class="tag">v2ray</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmess/"><span class="tag">vmess</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webservice/"><span class="tag">webservice</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xml/"><span class="tag">xml</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"><span class="tag">发送邮件</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%90%E6%A7%BD/"><span class="tag">吐槽</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"><span class="tag">命令行</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%84%9F%E6%83%B3/"><span class="tag">感想</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%88%90%E9%95%BF/"><span class="tag">成长</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%99%E8%82%B2/"><span class="tag">教育</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%AD%BB%E9%94%81/"><span class="tag">死锁</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%9B%91%E6%8E%A7/"><span class="tag">监控</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%B0%E5%BD%95/"><span class="tag">记录</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B4%9F%E8%83%BD%E9%87%8F/"><span class="tag">负能量</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AC%E8%BD%BD/"><span class="tag">转载</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7/"><span class="tag">软件版本号</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/"><span class="tag">速查表</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81/"><span class="tag">邮件发送</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%85%8D%E7%BD%AE/"><span class="tag">配置</span><span class="tag">2</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Choose C</a><p class="is-size-7"><span>&copy; 2023 zhang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>