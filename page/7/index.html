<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>不知选啥就选C</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Choose C"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Choose C"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="一个记录生活的Blog"><meta property="og:type" content="blog"><meta property="og:title" content="不知选啥就选C"><meta property="og:url" content="https://yuanjianzhang.github.io/"><meta property="og:site_name" content="不知选啥就选C"><meta property="og:description" content="一个记录生活的Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://yuanjianzhang.github.io/img/og_image.png"><meta property="article:author" content="zhang"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://yuanjianzhang.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yuanjianzhang.github.io"},"headline":"不知选啥就选C","image":["https://yuanjianzhang.github.io/img/og_image.png"],"author":{"@type":"Person","name":"zhang"},"publisher":{"@type":"Organization","name":"不知选啥就选C","logo":{"@type":"ImageObject","url":{"text":"Choose C"}}},"description":"一个记录生活的Blog"}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Choose C</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/categories/Technology">技术</a><a class="navbar-item" href="/other">树洞</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-02-15T08:11:00.000Z" title="2022/2/15 下午4:11:00">2022-02-15</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:27:17.347Z" title="2022/2/23 下午5:27:17">2022-02-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/node/">node</a></span><span class="level-item">9 分钟读完 (大约1369个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/02/15/nodejs%E5%8D%95%E7%BA%BF%E7%A8%8B%EF%BC%9F%E9%9D%9E%E9%98%BB%E5%A1%9EI-O%EF%BC%9F%E5%BC%82%E6%AD%A5%EF%BC%9F/">nodejs单线程？非阻塞I/O？异步？</a></h1><div class="content"><span id="more"></span>
<p>像java、python这个可以具有多线程的语言。多线程同步模式是这样的，将cpu分成几个线程，每个线程同步运行。</p>
<p>而node.js采用单线程异步非阻塞模式，也就是说每一个计算独占cpu，遇到I/O请求不阻塞后面的计算，当I/O完成后，以事件的方式通知，继续执行计算2。</p>
<p>JavaScript是单线程执行【CPU单核】，根本不能进行同步IO操作，所以，JavaScript的这一“缺陷”导致了它只能使用异步IO。</p>
<p>JavaScript 的确是单线程的<br>异步是浏览器的 JavaScript 引擎做的工作</p>
<hr>
<h3 id="问题二：nodejs既然是单线程，如何实现异步、非阻塞I-O？"><a href="#问题二：nodejs既然是单线程，如何实现异步、非阻塞I-O？" class="headerlink" title="问题二：nodejs既然是单线程，如何实现异步、非阻塞I/O？"></a>问题二：nodejs既然是单线程，如何实现异步、非阻塞I/O？</h3><p>顺便回答标题nodejs真的是单线程吗？其实只有javascript执行是单线程，I/O显然是其它线程。</p>
<p>js执行线程是单线程，把需要做的I/O交给libuv，自己马上返回做别的事情，然后libuv在指定的时刻回调就行了。其实简化的流程就是这样子的！</p>
<p>细化一点，nodejs会先从js代码通过node-bindings调用到C/C++代码，然后通过C/C++代码封装一个叫 “请求对象” 的东西交给libuv，这个请求对象里面无非就是需要执行的功能+回调之类的东西，给libuv执行以及执行完实现回调。</p>
<p>总结来说，一个异步 I/O 的大致流程如下：</p>
<p>发起 I/O 调用<br>用户通过 Javascript 代码调用 Node 核心模块，将参数和回调函数传入到核心模块；<br>Node 核心模块会将传入的参数和回调函数封装成一个请求对象；<br>将这个请求对象推入到 I/O 线程池等待执行；<br>Javascript 发起的异步调用结束，Javascript 线程继续执行后续操作。<br>执行回调<br>I/O 操作完成后，会取出之前封装在请求对象中的回调函数，执行这个回调函数，以完成 Javascript 回调的目的。（这里回调的细节下面讲解）</p>
<p>从这里，我们可以看到，我们其实对 Node.js 的单线程一直有个误会。</p>
<p>事实上，它的单线程指的是自身 Javascript 运行环境的单线程，Node.js 并没有给 Javascript 执行时创建新线程的能力，最终的实际操作，还是通过 Libuv 以及它的事件循环来执行的。</p>
<p>这也就是为什么 Javascript 一个单线程的语言，能在 Node.js 里面实现异步操作的原因，两者并不冲突。</p>
<h3 id="问题五、nodejs擅长什么？不擅长什么？"><a href="#问题五、nodejs擅长什么？不擅长什么？" class="headerlink" title="问题五、nodejs擅长什么？不擅长什么？"></a>问题五、nodejs擅长什么？不擅长什么？</h3><p>Node.js 通过 libuv 来处理与操作系统的交互，并且因此具备了异步、非阻塞、事件驱动的能力。因此，NodeJS能响应大量的并发请求。所以，<strong>NodeJS适合运用在高并发、I/O密集、少量业务逻辑的场景</strong>。</p>
<p>上面提到，如果是 I/O 任务，Node.js 就把任务交给线程池来异步处理，高效简单，因此 Node.js 适合处理I/O密集型任务。但不是所有的任务都是 I/O 密集型任务，当碰到CPU密集型任务时，即只用CPU计算的操作，比如要对数据加解密(node.bcrypt.js)，数据压缩和解压(node-tar)，这时 Node.js 就会亲自处理，一个一个的计算，前面的任务没有执行完，后面的任务就只能干等着 。</p>
<p>我们看如下代码：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();<span class="comment">//获取当前时间戳</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() - start);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++){<span class="comment">//执行长循环</span></span><br><span class="line">    }</span><br><span class="line">}, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() - start);</span><br><span class="line">}, <span class="number">2000</span>);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>最终我们的打印结果是：（结果可能因为你的机器而不同）</p>
<figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1000</span><br><span class="line">3738</span><br></pre></td></tr></tbody></table></figure>

<p>对于我们期望2秒后执行的setTimeout函数其实经过了3738毫秒之后才执行，换而言之，因为执行了一个很长的for循环，所以我们整个Node.js主线程被阻塞了，如果在我们处理100个用户请求中，其中第一个有需要这样大量的计算，那么其余99个就都会被延迟执行。如果操作系统本身就是单核，那也就算了，但现在大部分服务器都是多 CPU 或多核的，而 Node.js 只有一个 EventLoop，也就是只占用一个 CPU 内核，当 Node.js 被CPU 密集型任务占用，导致其他任务被阻塞时，却还有 CPU 内核处于闲置状态，造成资源浪费。</p>
<p>其实虽然Node.js可以处理数以千记的并发，但是一个Node.js进程在某一时刻其实只是在处理一个请求。</p>
<p>对于非阻塞的IO可以去看Unix网络编程里面定义的几种io模型。</p>
<p>因此，<strong>Node.js 并不适合 CPU 密集型任务</strong>。</p>
<p>参考：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45277161/article/details/117331334">nodejs单线程？非阻塞I/O？异步？</a></p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-02-15T07:57:23.000Z" title="2022/2/15 下午3:57:23">2022-02-15</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:27:22.109Z" title="2022/2/23 下午5:27:22">2022-02-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span><span class="level-item">14 分钟读完 (大约2088个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/02/15/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BC%80%E5%8F%91%E4%B8%ADwebpack%E3%80%81npm%E3%80%81node%E3%80%81nodejs%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/">前端模块化开发中webpack、npm、node、nodejs之间的关系</a></h1><div class="content"><span id="more"></span>
<h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><blockquote>
<p>Webpack 是一个前端资源加载/打包工具。它将根据模块的依赖关系进行静态分析，然后将这些模块按照指定的规则生成对应的静态资源。</p>
</blockquote>
<p>webpack是一个工具，这个工具可以帮你处理好各个包/模块之间的依赖关系（modules with dependencies），并将这些复杂依赖关系的静态文件打包成一个或很少的静态文件，提供给浏览器访问使用；除此之外，webpack因为可以提高兼容性，可以将一些浏览器尚不支持的新特性转换为可以支持格式，进而减少由新特性带来的浏览器的兼容性问题</p>
<p>好，我们通过介绍，我们有个概念，webpack是一个打包工具，可以帮你把你的项目这里的项目其实就是指通过模块化开发的项目 打包为简洁版的浏览器可识别的静态资源</p>
<h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><p>介绍了webpack，我们可能会疑问，我的JS，CSS，HTML文件分开写，挺好的呀，为什么要使用webpack工具，进行复杂的各项配置。在传统前端开发模式下，我们确实是按照JS/CSS/HTML文件分开写的模式就可以，但是随着前端的发展，社区的壮大，各种前端的库和框架层出不穷，我们项目中可能会使用很多额外的库，如何有效管理这些引入的库文件是一个大问题，而且我们知道基于在HTML中使用<code>&lt;script&gt;</code>引入的方式，有两个弊端，一个是会重复引入，二是当库文件数量很多时管理成为一个大难题。<br>面对这样的局面，为了简化开发的复杂度，前端社区涌现了很多实践方法。模块化就是其中一项成功实践，而npm就是这样在社区 其实就是node社区中产生的</p>
<blockquote>
<p>npm 为你和你的团队打开了连接整个 JavaScript 天才世界的一扇大门。它是世界上最大的软件注册表，每星期大约有 30 亿次的下载量，包含超过 600000 个 包（package） （即，代码模块）。来自各大洲的开源软件开发者使用 npm 互相分享和借鉴。包的结构使您能够轻松跟踪依赖项和版本。<br>npm 由三个独立的部分组成：</p>
<ul>
<li>网站</li>
<li>注册表（registry）</li>
<li>命令行工具 (CLI)</li>
</ul>
<p>网站 是开发者查找包（package）、设置参数以及管理 npm 使用体验的主要途径。<br>注册表 是一个巨大的数据库，保存了每个包（package）的信息。<br>CLI 通过命令行或终端运行。开发者通过 CLI 与 npm 打交道。</p>
</blockquote>
<p>这是npm的官方网站给出的介绍，一般来说提起npm有两个含义，一个是说npm官方网站，一个就是说npm包管理工具。npm社区或官网是一个巨大的Node生态系统，社区成员可以随意发布和安装npm生态中的包，也就是不用在重复造轮子了，别人造好了，你直接安装到你的项目中就可以使用，但是因为前面说了，当包引入数量很多时管理就成为了一个问题，这个就是npm为开发者行了方便之处，npm已经为你做好了依赖和版本的控制，也就是说使用npm可以让你从繁杂的依赖安装和版本冲突中解脱出来，进而关注你的业务而不是库的管理。</p>
<p>而webpack就是将你从npm中安装的包打包成更小的浏览器可读的静态资源，这里需要注意的是，webpack只是一个前端的打包工具，打包的是静态资源，和后台没有关系，虽然webpack依赖于node环境</p>
<h3 id="what-is-node-or-nodejs？"><a href="#what-is-node-or-nodejs？" class="headerlink" title="what is node or nodejs？"></a>what is node or nodejs？</h3><p>其实node和nodejs两个概念没有太大差别，我个人认为唯一的区别就是，人们说起node的时候语境更多的是再说node环境，而说nodejs时更多的是在说node是一门可以提供后端能力的技术。本质上来说，node就是nodejs，nodejs就是node</p>
<blockquote>
<p>简单的说 Node.js 就是运行在服务端的 JavaScript。<br>Node.js 是一个基于Chrome JavaScript 运行时建立的一个平台。<br>Node.js是一个事件驱动I/O服务端JavaScript环境，基于Google的V8引擎，V8引擎执行&gt;Javascript的速度非常快，性能非常好。</p>
</blockquote>
<p>node环境基于V8引擎提供了一种可以让JS代码跑在后端的能力，这就是node。其实这里的node本身和我们这篇讲的前端模块化没啥关系。但是因为npm是产生与node社区，node中也是通过npm来加载模块的，所以有必要说一下他们之间的关系。</p>
<blockquote>
<p>npm 是 Node.js 官方提供的包管理工具，他已经成了 Node.js 包的标准发布平台，用于 Node.js 包的发布、传播、依赖控制</p>
</blockquote>
<h3 id="webpack-npm-node之间关系？"><a href="#webpack-npm-node之间关系？" class="headerlink" title="webpack npm node之间关系？"></a>webpack npm node之间关系？</h3><ul>
<li>webpack是npm生态中的一个模块，我们可以通过全局安装webpack来使用webpack对项目进行打包；</li>
<li>webpack的运行依赖于node的环境，没有node是不能打包的，但是webpack打包后的项目本身只是前端静态资源和后台没有关系，也就是说不依赖与node，只要有后台能力的都可以部署项目</li>
<li>npm是于Node社区中产生的，是nodejs的官方包管理工具，当你下载安装好node的时候，npm cli就自动安装好了</li>
<li>正是因为npm的包管理，使得项目可以模块化的开发，而模块化的开发带来的这些改进确实大大的提高了我们的开发效率，但是利用它们开发的文件往往需要进行额外的处理才能让浏览器识别，而手动处理又是非常繁琐的，这就是webpack工具存在的意义</li>
</ul>
<hr>
<p>参考：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/AngelLover2017/article/details/84801673">前端模块化开发中webpack、npm、node、nodejs之间的关系</a></p>
</blockquote>
<p>摘录：<br>Node.js介绍,摘自<a target="_blank" rel="noopener" href="https://nodejs.dev/learn/introduction-to-nodejs">官网</a></p>
<figure class="highlight plaintext"><figcaption><span>Node.js</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Node.js is an open-source and cross-platform JavaScript runtime environment. It is a popular tool for almost any kind of project!</span><br><span class="line"></span><br><span class="line">Node.js runs the V8 JavaScript engine, the core of Google Chrome, outside of the browser. This allows Node.js to be very performant.</span><br><span class="line"></span><br><span class="line">A Node.js app runs in a single process, without creating a new thread for every request. Node.js provides a set of asynchronous I/O primitives in its standard library that prevent JavaScript code from blocking and generally, libraries in Node.js are written using non-blocking paradigms, making blocking behavior the exception rather than the norm.</span><br><span class="line"></span><br><span class="line">When Node.js performs an I/O operation, like reading from the network, accessing a database or the filesystem, instead of blocking the thread and wasting CPU cycles waiting, Node.js will resume the operations when the response comes back.</span><br><span class="line"></span><br><span class="line">This allows Node.js to handle thousands of concurrent connections with a single server without introducing the burden of managing thread concurrency, which could be a significant source of bugs.</span><br><span class="line"></span><br><span class="line">Node.js has a unique advantage because millions of frontend developers that write JavaScript for the browser are now able to write the server-side code in addition to the client-side code without the need to learn a completely different language.</span><br><span class="line"></span><br><span class="line">In Node.js the new ECMAScript standards can be used without problems, as you don't have to wait for all your users to update their browsers - you are in charge of deciding which ECMAScript version to use by changing the Node.js version, and you can also enable specific experimental features by running Node.js with flags.</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><strong>Introduction to npm</strong><br>npm is the standard package manager for Node.js.</p>
<p>In January 2017 over 350000 packages were reported being listed in &gt;the npm registry, making it the biggest single language code &gt;repository on Earth, and you can be sure there is a package for &gt;(almost!) everything.</p>
<p>It started as a way to download and manage dependencies of Node.js &gt;packages, but it has since become a tool used also in frontend &gt;JavaScript.</p>
<p>There are many things that npm does.</p>
<p>Yarn and pnpm are alternatives to npm cli. You can check them out as &gt;well.</p>
</blockquote>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/02/14/VUE%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="VUE初识"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-02-14T08:54:02.000Z" title="2022/2/14 下午4:54:02">2022-02-14</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:18:54.539Z" title="2022/2/23 下午5:18:54">2022-02-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/VUE/">VUE</a></span><span class="level-item">5 分钟读完 (大约748个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/02/14/VUE%E5%88%9D%E8%AF%86/">VUE初识</a></h1><div class="content"><span id="more"></span>

<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>安装方式：</p>
<ul>
<li>CDN</li>
<li>NPM</li>
<li>VUE-CLI</li>
</ul>
<h4 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h4><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- V2.x --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- V3.x最新版本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue@next"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">V2.x最新稳定版</span></span><br><span class="line">npm install vue</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">V3.x最新稳定版</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install vue@next</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="VUE-CLI"><a href="#VUE-CLI" class="headerlink" title="VUE-CLI"></a>VUE-CLI</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">升级</span></span><br><span class="line">npm update -g @vue/cli</span><br></pre></td></tr></tbody></table></figure>

<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><h3 id="VUE-CLI-1"><a href="#VUE-CLI-1" class="headerlink" title="VUE-CLI"></a>VUE-CLI</h3><h4 id="VUE-Create"><a href="#VUE-Create" class="headerlink" title="VUE Create"></a>VUE Create</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建一个新项目,跳过 git 初始化</span></span><br><span class="line">vue create hello-world -n</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vue create --help</span><br><span class="line"></span><br><span class="line">用法：create [options] &lt;app-name&gt;</span><br><span class="line"></span><br><span class="line">创建一个由 `vue-cli-service` 提供支持的新项目</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">  -p, --preset &lt;presetName&gt;       忽略提示符并使用已保存的或远程的预设选项</span><br><span class="line">  -d, --default                   忽略提示符并使用默认预设选项</span><br><span class="line">  -i, --inlinePreset &lt;json&gt;       忽略提示符并使用内联的 JSON 字符串预设选项</span><br><span class="line">  -m, --packageManager &lt;command&gt;  在安装依赖时使用指定的 npm 客户端</span><br><span class="line">  -r, --registry &lt;url&gt;            在安装依赖时使用指定的 npm registry</span><br><span class="line">  -g, --git [message]             强制 / 跳过 git 初始化，并可选的指定初始化提交信息</span><br><span class="line">  -n, --no-git                    跳过 git 初始化</span><br><span class="line">  -f, --force                     覆写目标目录可能存在的配置</span><br><span class="line">  -c, --clone                     使用 git clone 获取远程预设选项</span><br><span class="line">  -x, --proxy                     使用指定的代理创建项目</span><br><span class="line">  -b, --bare                      创建项目时省略默认组件中的新手指导信息</span><br><span class="line">  -h, --help                      输出使用帮助信息</span><br></pre></td></tr></tbody></table></figure>

<h4 id="VUE-UI"><a href="#VUE-UI" class="headerlink" title="VUE UI"></a>VUE UI</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></tbody></table></figure>

<h4 id="拉取-2-x-模板-旧版本"><a href="#拉取-2-x-模板-旧版本" class="headerlink" title="拉取 2.x 模板 (旧版本)"></a>拉取 2.x 模板 (旧版本)</h4><p>Vue CLI &gt;= 3 和旧版使用了相同的 vue 命令，所以 Vue CLI 2 (vue-cli) 被覆盖了。如果你仍然需要使用旧版本的 vue init 功能，你可以全局安装一个桥接工具：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli-init</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">`vue init` 的运行效果将会跟 `vue-cli@2.x` 相同</span></span><br><span class="line">vue init webpack my-project</span><br></pre></td></tr></tbody></table></figure>

<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><h3 id="VUE-CLI-2"><a href="#VUE-CLI-2" class="headerlink" title="VUE-CLI"></a>VUE-CLI</h3><p>在一个 Vue CLI 项目中，<code>@vue/cli-service</code> 安装了一个名为 <code>vue-cli-service</code> 的命令。你可以在 npm scripts 中以 <code>vue-cli-service</code>、或者从终端中以 <code>./node_modules/.bin/vue-cli-service</code> 访问这个命令。</p>
<p>这是你使用默认 preset 的项目的 package.json：</p>
<figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"scripts"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"serve"</span><span class="punctuation">:</span> <span class="string">"vue-cli-service serve"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"build"</span><span class="punctuation">:</span> <span class="string">"vue-cli-service build"</span></span><br><span class="line">  <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OR</span></span><br><span class="line">npx vue-cli-service serve</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vue-cli-service serve</span><br><span class="line"></span><br><span class="line">用法：vue-cli-service serve [options] [entry]</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">  --open    在服务器启动时打开浏览器</span><br><span class="line">  --copy    在服务器启动时将 URL 复制到剪切版</span><br><span class="line">  --mode    指定环境模式 (默认值：development)</span><br><span class="line">  --host    指定 host (默认值：0.0.0.0)</span><br><span class="line">  --port    指定 port (默认值：8080)</span><br><span class="line">  --https   使用 https (默认值：false)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vue-cli-service build</span><br><span class="line"></span><br><span class="line">用法：vue-cli-service build [options] [entry|pattern]</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">  --mode        指定环境模式 (默认值：production)</span><br><span class="line">  --dest        指定输出目录 (默认值：dist)</span><br><span class="line">  --modern      面向现代浏览器带自动回退地构建应用</span><br><span class="line">  --target      app | lib | wc | wc-async (默认值：app)</span><br><span class="line">  --name        库或 Web Components 模式下的名字 (默认值：package.json 中的 "name" 字段或入口文件名)</span><br><span class="line">  --no-clean    在构建项目之前不清除目标目录</span><br><span class="line">  --report      生成 report.html 以帮助分析包内容</span><br><span class="line">  --report-json 生成 report.json 以帮助分析包内容</span><br><span class="line">  --watch       监听文件变化</span><br></pre></td></tr></tbody></table></figure>

<h2 id="构建"><a href="#构建" class="headerlink" title="构建"></a>构建</h2><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-01-06T12:34:29.000Z" title="2022/1/6 下午8:34:29">2022-01-06</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:27:51.307Z" title="2022/2/23 下午5:27:51">2022-02-23</time>更新</span><span class="level-item">1 分钟读完 (大约140个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/01/06/%E3%80%90Csharp%E3%80%91Thread%E5%8C%BF%E5%90%8D%E6%96%B9%E6%B3%95%E5%88%9D%E8%AF%86/">【Csharp】Thread匿名方法初识</a></h1><div class="content"><span id="more"></span>

<p>片段代码笔记</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 停止创建运行新任务和新线程，等待所有任务和线程执行完成。</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">StopRuningTaskOrThreadAndExitOrRestart</span>(<span class="params"><span class="built_in">bool</span> restartFlag</span>)</span></span><br><span class="line">{</span><br><span class="line">    timer1.Enabled = <span class="literal">false</span>;<span class="comment">//停止触发</span></span><br><span class="line">    <span class="keyword">if</span> (switchstr == <span class="string">"1"</span> &amp;&amp; threadswitchstr == <span class="string">"1"</span>)</span><br><span class="line">    {</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread((flag) =&gt;</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">while</span> (threadUseNum &gt; <span class="number">0</span>)</span><br><span class="line">            {</span><br><span class="line">                Thread.Sleep(<span class="number">5000</span>);</span><br><span class="line">                RefreshMsgBox(DateTime.Now.ToString(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>) + <span class="string">$"\t=&gt;\t等待子任务执行完成退出：子任务数量：<span class="subst">{threadUseNum}</span>"</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> ((<span class="built_in">bool</span>)flag)</span><br><span class="line">            {</span><br><span class="line">                Process.Start(Application.ExecutablePath);</span><br><span class="line">            }</span><br><span class="line">            Environment.Exit(<span class="number">0</span>);</span><br><span class="line">        });</span><br><span class="line">        t.IsBackground = <span class="literal">true</span>;</span><br><span class="line">        t.Start(restartFlag);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (switchstr == <span class="string">"1"</span>)</span><br><span class="line">    {</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread((flag) =&gt;</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (taskThread != <span class="literal">null</span>)</span><br><span class="line">            {</span><br><span class="line">                taskThread.Wait();<span class="comment">//等待执行完成</span></span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> ((<span class="built_in">bool</span>)flag)</span><br><span class="line">            {</span><br><span class="line">                Process.Start(Application.ExecutablePath);</span><br><span class="line">            }</span><br><span class="line">            Environment.Exit(<span class="number">0</span>);</span><br><span class="line">        });</span><br><span class="line">        t.IsBackground = <span class="literal">true</span>;</span><br><span class="line">        t.Start(restartFlag);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-01-05T07:27:05.000Z" title="2022/1/5 下午3:27:05">2022-01-05</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:27:57.851Z" title="2022/2/23 下午5:27:57">2022-02-23</time>更新</span><span class="level-item">1 分钟读完 (大约152个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/01/05/redis%E5%88%9D%E8%AF%86/">redis初识</a></h1><div class="content"><span id="more"></span>

<h2 id="Windows安装Redis"><a href="#Windows安装Redis" class="headerlink" title="Windows安装Redis"></a>Windows安装Redis</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/tporadowski/redis">https://github.com/tporadowski/redis</a></p>
<h2 id="部署为服务"><a href="#部署为服务" class="headerlink" title="部署为服务"></a>部署为服务</h2><p>命令行进入安装目录/解压目录</p>
<p>安装服务: redis-server.exe –service-install redis.windows.conf –loglevel verbose</p>
<p>卸载服务：redis-server –service-uninstall</p>
<p>开启服务：redis-server –service-start</p>
<p>停止服务：redis-server –service-stop</p>
<p>重命名服务：redis-server –service-name name</p>
<p>以下将会安装并启动三个不同的Redis实例作服务：</p>
<figure class="highlight bat"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-install --service-name redisService1 --port <span class="number">10001</span></span><br><span class="line"></span><br><span class="line">redis-server --service-<span class="built_in">start</span> --service-name redisService1</span><br><span class="line"></span><br><span class="line">redis-server --service-install --service-name redisService2 --port <span class="number">10002</span></span><br><span class="line"></span><br><span class="line">redis-server --service-<span class="built_in">start</span> --service-name redisService2</span><br><span class="line"></span><br><span class="line">redis-server --service-install --service-name redisService3 --port <span class="number">10003</span></span><br><span class="line"></span><br><span class="line">redis-server --service-<span class="built_in">start</span> --service-name redisService3</span><br></pre></td></tr></tbody></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/12/11/SqlBulkCopy%E5%AE%9E%E7%8E%B0SQLSRVER%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5/"><img class="fill" src="/images/default.jpeg" alt="【C#】SqlBulkCopy实现SQLSRVER批量插入"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-10T16:00:48.000Z" title="2021/12/11 上午12:00:48">2021-12-11</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:22:04.755Z" title="2022/2/23 下午5:22:04">2022-02-23</time>更新</span><span class="level-item">4 分钟读完 (大约534个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/11/SqlBulkCopy%E5%AE%9E%E7%8E%B0SQLSRVER%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5/">【C#】SqlBulkCopy实现SQLSRVER批量插入</a></h1><div class="content"><span id="more"></span>

<blockquote>
<p>参考：<br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.data.sqlclient.sqlbulkcopy?view=netframework-4.5"> SqlBulkCopy 类</a><br><a target="_blank" rel="noopener" href="http://raylei.cn/index.php/archives/74/">http://raylei.cn/index.php/archives/74/</a><br><a target="_blank" rel="noopener" href="https://www.cxybb.com/article/weixin_30333885/96361368">https://www.cxybb.com/article/weixin_30333885/96361368</a></p>
</blockquote>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul>
<li><p>来自数据源的 Decimal 类型的给定值不能转换为指定目标列的类型 datetime<br>  实际情况可能很复杂，使用的是泛型进行实体类转DataTable,可能会出现各种类型错误提示。<br>  自己使用的是调用Copy()方法。<br>  demo:</p>
  <figure class="highlight csharp"><figcaption><span>demo.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> TableStruct = dal.GetTableStruct();</span><br><span class="line">DataTable dataTable = TableStruct.Clone();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> oD.ToList&lt;StdYpkcday&gt;())</span><br><span class="line">{</span><br><span class="line">    DataRow dataRow = dataTable.NewRow();</span><br><span class="line">    dataRow[<span class="string">"id"</span>] = DBNull.Value;<span class="comment">//自增主键。赋值DBNull.Value</span></span><br><span class="line">    dataRow[<span class="string">"code"</span>] = item.Hoscode;</span><br><span class="line">    <span class="keyword">if</span> (item.Gqsj == <span class="literal">null</span> )</span><br><span class="line">    {</span><br><span class="line">        dataRow[<span class="string">"time"</span>] = DBNull.Value;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        dataRow[<span class="string">"time"</span>] = item.Gqsj;</span><br><span class="line">    }</span><br><span class="line">    dataTable.Rows.Add(dataRow);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/18140012/sqlbulkcopy-the-given-value-of-type-string-from-the-data-source-cannot-be-conv">https://stackoverflow.com/questions/18140012/sqlbulkcopy-the-given-value-of-type-string-from-the-data-source-cannot-be-conv</a></p>
</blockquote>
</li>
</ul>
<h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><figure class="highlight csharp"><figcaption><span>删除并批量插入.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 删除并批量插入</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="_Type"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="TableName"&gt;</span>批量插入数据的表名<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="Dt"&gt;</span>批量插入的数据<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="SqlDeleteText"&gt;</span>删除的sql语句<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">DeleteAndBulkCopy</span>(<span class="params"><span class="built_in">string</span> Type,<span class="built_in">string</span> TableName, DataTable Dt, <span class="built_in">string</span> SqlDeleteText,<span class="built_in">bool</span> isIncreaPK</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">using</span> (SqlConnection conn = <span class="keyword">new</span> SqlConnection(DBUtility.DbCommon.GetConnectString(Type)))</span><br><span class="line">    {</span><br><span class="line">        conn.Open();</span><br><span class="line">        <span class="keyword">using</span> (SqlTransaction transaction = conn.BeginTransaction())</span><br><span class="line">        {</span><br><span class="line">            SqlCommand sqlcom = conn.CreateCommand();</span><br><span class="line">            sqlcom.Transaction = transaction;</span><br><span class="line">            sqlcom.CommandText = SqlDeleteText;</span><br><span class="line">            <span class="keyword">var</span> BulkCopyOptions = SqlBulkCopyOptions.KeepIdentity;</span><br><span class="line">            <span class="comment">//自增主键，使用系统生成主键</span></span><br><span class="line">            <span class="keyword">if</span> (isIncreaPK)</span><br><span class="line">            {</span><br><span class="line">                BulkCopyOptions = SqlBulkCopyOptions.Default;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">using</span> (SqlBulkCopy bulk = <span class="keyword">new</span> SqlBulkCopy(conn, BulkCopyOptions, transaction))</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (Dt.Rows.Count &gt; <span class="number">0</span>)</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; Dt.Columns.Count; i++)</span><br><span class="line">                    {</span><br><span class="line">                        bulk.ColumnMappings.Add(Dt.Columns[i].ColumnName, Dt.Columns[i].ColumnName);</span><br><span class="line">                    }</span><br><span class="line">                    bulk.BatchSize = Dt.Rows.Count;</span><br><span class="line">                    bulk.DestinationTableName = TableName;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                {</span><br><span class="line">                    sqlcom.ExecuteNonQuery();</span><br><span class="line"></span><br><span class="line">                    bulk.WriteToServer(Dt);</span><br><span class="line">                    transaction.Commit();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">                {</span><br><span class="line">                    transaction.Rollback();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">finally</span></span><br><span class="line">                {</span><br><span class="line">                    bulk.Close();</span><br><span class="line">                    conn.Close();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight csharp"><figcaption><span>批量更新.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">region</span> 批量更新</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 批量更新</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="dataTable"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="crateTemplateSql"&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> eg:</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> [xxx] varchar(255)  NOT NULL,[xxx] varchar(10)  NOT NULL</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="updateSql"&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> eg:</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> UPDATE bulktest  set bulktest.name=Temp.tempname </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> FROM bulktest INNER JOIN #TmpTable Temp </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> ON Temp.temprdn = bulktest.rdn  ; </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> DROP TABLE #TmpTable</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SqlBulkCopyUpdate</span>(<span class="params">DataTable dataTable, <span class="built_in">string</span> crateTemplateSql, <span class="built_in">string</span> updateSql</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">using</span> (SqlConnection conn = <span class="keyword">new</span> SqlConnection(DBUtility.DbCommon.GetConnectString(DBType)))</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> command = <span class="keyword">new</span> SqlCommand(<span class="string">""</span>, conn))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            {</span><br><span class="line">                conn.Open();</span><br><span class="line">                <span class="comment">//数据库并创建一个临时表来保存数据表的数据</span></span><br><span class="line">                command.CommandText = <span class="string">$"  CREATE TABLE #TmpTable (<span class="subst">{crateTemplateSql}</span>)"</span>;</span><br><span class="line">                command.ExecuteNonQuery();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//使用SqlBulkCopy 加载数据到临时表中</span></span><br><span class="line">                <span class="keyword">using</span> (<span class="keyword">var</span> bulkCopy = <span class="keyword">new</span> SqlBulkCopy(conn))</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">foreach</span> (DataColumn dcPrepped <span class="keyword">in</span> dataTable.Columns)</span><br><span class="line">                    {</span><br><span class="line">                        bulkCopy.ColumnMappings.Add(dcPrepped.ColumnName, dcPrepped.ColumnName);</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                    bulkCopy.BulkCopyTimeout = <span class="number">660</span>;</span><br><span class="line">                    bulkCopy.DestinationTableName = <span class="string">"#TmpTable"</span>;</span><br><span class="line">                    bulkCopy.WriteToServer(dataTable);</span><br><span class="line">                    bulkCopy.Close();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 执行Command命令 使用临时表的数据去更新目标表中的数据  然后删除临时表</span></span><br><span class="line">                command.CommandTimeout = <span class="number">300</span>;</span><br><span class="line">                command.CommandText = updateSql;</span><br><span class="line">                <span class="built_in">int</span> rows = command.ExecuteNonQuery();</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">throw</span> ex;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">finally</span></span><br><span class="line">            {</span><br><span class="line">                conn.Close();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endregion</span></span></span><br></pre></td></tr></tbody></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/12/01/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E3%80%90%E4%B8%80%E3%80%91/"><img class="fill" src="/images/default.jpeg" alt="判断文件类型【一】"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-01T08:54:21.000Z" title="2021/12/1 下午4:54:21">2021-12-01</time>发表</span><span class="level-item"><time dateTime="2022-07-22T03:07:20.600Z" title="2022/7/22 上午11:07:20">2022-07-22</time>更新</span><span class="level-item">6 分钟读完 (大约906个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/01/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E3%80%90%E4%B8%80%E3%80%91/">判断文件类型【一】</a></h1><div class="content"><span id="more"></span>

<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>现有一文件，其扩展名未知或标记错误。假设它是一个正常的、非空的文件，且将扩展名更正后可以正常使用，那么，如何判断它是哪种类型的文件？</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>使用文件签名来判断实际文件类型，又称<code>magic numbers</code> 或 <code>Magic Bytes</code>。关于文件签名介绍，参考<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_file_signatures">List of file signatures</a></p>
<p><strong>Magic Number</strong>:</p>
<ul>
<li>magic number是嵌入在文件开头或附近的数字，指示其文件格式（即文件的类型）。</li>
<li>我们看不到这个数字。</li>
<li>每个文件都有一个数字，代表文件类型的名称，它是十六进制格式。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature/13614746#13614746">C#实现参考</a>：</p>
<h3 id="C-实现"><a href="#C-实现" class="headerlink" title="C#实现"></a>C#实现</h3><figure class="highlight csharp"><figcaption><span>example.cs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MimeType</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] BMP = { <span class="number">66</span>, <span class="number">77</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] DOC = { <span class="number">208</span>, <span class="number">207</span>, <span class="number">17</span>, <span class="number">224</span>, <span class="number">161</span>, <span class="number">177</span>, <span class="number">26</span>, <span class="number">225</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] EXE_DLL = { <span class="number">77</span>, <span class="number">90</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] GIF = { <span class="number">71</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">56</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] ICO = { <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] JPG = { <span class="number">255</span>, <span class="number">216</span>, <span class="number">255</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] MP3 = { <span class="number">255</span>, <span class="number">251</span>, <span class="number">48</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] OGG = { <span class="number">79</span>, <span class="number">103</span>, <span class="number">103</span>, <span class="number">83</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] PDF = { <span class="number">37</span>, <span class="number">80</span>, <span class="number">68</span>, <span class="number">70</span>, <span class="number">45</span>, <span class="number">49</span>, <span class="number">46</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] PNG = { <span class="number">137</span>, <span class="number">80</span>, <span class="number">78</span>, <span class="number">71</span>, <span class="number">13</span>, <span class="number">10</span>, <span class="number">26</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">13</span>, <span class="number">73</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">82</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] RAR = { <span class="number">82</span>, <span class="number">97</span>, <span class="number">114</span>, <span class="number">33</span>, <span class="number">26</span>, <span class="number">7</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] SWF = { <span class="number">70</span>, <span class="number">87</span>, <span class="number">83</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TIFF = { <span class="number">73</span>, <span class="number">73</span>, <span class="number">42</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TORRENT = { <span class="number">100</span>, <span class="number">56</span>, <span class="number">58</span>, <span class="number">97</span>, <span class="number">110</span>, <span class="number">110</span>, <span class="number">111</span>, <span class="number">117</span>, <span class="number">110</span>, <span class="number">99</span>, <span class="number">101</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] TTF = { <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] WAV_AVI = { <span class="number">82</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">70</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] WMV_WMA = { <span class="number">48</span>, <span class="number">38</span>, <span class="number">178</span>, <span class="number">117</span>, <span class="number">142</span>, <span class="number">102</span>, <span class="number">207</span>, <span class="number">17</span>, <span class="number">166</span>, <span class="number">217</span>, <span class="number">0</span>, <span class="number">170</span>, <span class="number">0</span>, <span class="number">98</span>, <span class="number">206</span>, <span class="number">108</span> };</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">byte</span>[] ZIP_DOCX = { <span class="number">80</span>, <span class="number">75</span>, <span class="number">3</span>, <span class="number">4</span> };</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">GetMimeType</span>(<span class="params"><span class="built_in">byte</span>[] file, <span class="built_in">string</span> fileName</span>)</span></span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> mime = <span class="string">"application/octet-stream"</span>; <span class="comment">//DEFAULT UNKNOWN MIME TYPE</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Ensure that the filename isn't empty or null</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrWhiteSpace(fileName))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> mime;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get the file extension</span></span><br><span class="line">        <span class="built_in">string</span> extension = Path.GetExtension(fileName) == <span class="literal">null</span></span><br><span class="line">                               ? <span class="built_in">string</span>.Empty</span><br><span class="line">                               : Path.GetExtension(fileName).ToUpper();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get the MIME Type</span></span><br><span class="line">        <span class="keyword">if</span> (file.Take(<span class="number">2</span>).SequenceEqual(BMP))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/bmp"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">8</span>).SequenceEqual(DOC))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/msword"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">2</span>).SequenceEqual(EXE_DLL))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-msdownload"</span>; <span class="comment">//both use same mime type</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(GIF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/gif"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(ICO))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/x-icon"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(JPG))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/jpeg"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(MP3))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"audio/mpeg"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">14</span>).SequenceEqual(OGG))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (extension == <span class="string">".OGX"</span>)</span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"application/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (extension == <span class="string">".OGA"</span>)</span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"audio/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                mime = <span class="string">"video/ogg"</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">7</span>).SequenceEqual(PDF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/pdf"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">16</span>).SequenceEqual(PNG))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/png"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">7</span>).SequenceEqual(RAR))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-rar-compressed"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">3</span>).SequenceEqual(SWF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-shockwave-flash"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(TIFF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"image/tiff"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">11</span>).SequenceEqual(TORRENT))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-bittorrent"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">5</span>).SequenceEqual(TTF))</span><br><span class="line">        {</span><br><span class="line">            mime = <span class="string">"application/x-font-ttf"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(WAV_AVI))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".AVI"</span> ? <span class="string">"video/x-msvideo"</span> : <span class="string">"audio/x-wav"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">16</span>).SequenceEqual(WMV_WMA))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".WMA"</span> ? <span class="string">"audio/x-ms-wma"</span> : <span class="string">"video/x-ms-wmv"</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (file.Take(<span class="number">4</span>).SequenceEqual(ZIP_DOCX))</span><br><span class="line">        {</span><br><span class="line">            mime = extension == <span class="string">".DOCX"</span> ? <span class="string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span> : <span class="string">"application/x-zip-compressed"</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mime;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h3><p>摘录部份常用文件HEX签名,来源<a target="_blank" rel="noopener" href="https://www.garykessler.net/library/file_sigs.html">GCK’S FILE SIGNATURES TABLE</a></p>
<table>
<thead>
<tr>
<th align="left">十六进制签名</th>
<th align="right"></th>
<th align="left">ASCII 签名</th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="right">文件扩展名</td>
<td align="left">文件描述</td>
</tr>
<tr>
<td align="left">50 4B 03 04</td>
<td align="right"></td>
<td align="left">PK..</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">ZIP</td>
<td align="left">PKZIP archive file (Ref. 1  Ref. 2)<br>        Trailer: filename 50 4B 17 characters 00 00 00<br>        Trailer: (filename PK 17 characters …)<br>        Note: PK are the initals of Phil Katz, co-creator of the ZIP file format and author of PKZIP.</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">ZIP</td>
<td align="left">Apple Mac OS X Dashboard Widget, Aston Shell theme, Oolite eXpansion Pack,<br>        Opera Widget, Pivot Style Template, Rockbox Theme package, Simple Machines<br>        Forums theme, SubEthaEdit Mode, Trillian zipped skin, Virtual Skipper skin</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">APK</td>
<td align="left">Android package</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">JAR</td>
<td align="left">Java archive; compressed file package for classes and data</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">KMZ</td>
<td align="left">Google Earth saved working session file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">KWD</td>
<td align="left">KWord document</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">ODT, ODP, OTT</td>
<td align="left">OpenDocument text document, presentation, and text document template, respectively.</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">OXPS</td>
<td align="left">Microsoft Open XML paper specification file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">SXC, SXD, SXI, SXW</td>
<td align="left">OpenOffice spreadsheet (Calc), drawing (Draw), presentation (Impress),and word processing (Writer) files, respectively.</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">SXC</td>
<td align="left">StarOffice spreadsheet</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">WMZ</td>
<td align="left">Windows Media compressed skin file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">XPI</td>
<td align="left">Mozilla Browser Archive</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">XPS</td>
<td align="left">XML paper specification file</td>
</tr>
<tr>
<td align="left"></td>
<td align="right">XPT</td>
<td align="left">eXact Packager Models</td>
</tr>
</tbody></table>
<h4 id="HEX（十六进制）转换byte数组"><a href="#HEX（十六进制）转换byte数组" class="headerlink" title="HEX（十六进制）转换byte数组"></a>HEX（十六进制）转换byte数组</h4><p>javascript在线计算：</p>
<iframe height="300" style="width: 100%;" scrolling="no" title="HEX Convert Code Part" src="https://codepen.io/soyobean/embed/zYWoJLB?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/soyobean/pen/zYWoJLB">
  HEX Convert Code Part</a> by soyobean (<a target="_blank" rel="noopener" href="https://codepen.io/soyobean">@soyobean</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.
</iframe>

<p>资料：<br><a target="_blank" rel="noopener" href="https://github.com/Muraad/Mime-Detective">Mime-Detective</a></p>
<p>文件签名表格：<br><a target="_blank" rel="noopener" href="https://www.garykessler.net/library/file_sigs.html">GCK’S FILE SIGNATURES TABLE</a></p>
<p>参考资料：<br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Magic_number_%28programming%29#In_files">Magic number</a><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_file_signatures">List of file signatures</a></p>
<p>拓展阅读：<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/think-in-java/p/5527389.html">byte为什么要与上0xff？</a></p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/21/Markdown%E8%AF%AD%E6%B3%95%E9%80%9F%E6%9F%A5%E8%A1%A8/"><img class="fill" src="/images/default.jpeg" alt="Markdown语法速查表"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-21T02:31:02.000Z" title="2021/10/21 上午10:31:02">2021-10-21</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:44.236Z" title="2022/2/23 下午5:21:44">2022-02-23</time>更新</span><span class="level-item">2 分钟读完 (大约308个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/Markdown%E8%AF%AD%E6%B3%95%E9%80%9F%E6%9F%A5%E8%A1%A8/">Markdown语法速查表</a></h1><div class="content"><span id="more"></span>
<h2 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h2><p>此 Markdown 语法速查表提供了所有 Markdown 语法元素的快速参考。但是此速查表无法涵盖所有极限用法，因此，如果您需要某些语法元素的详细信息，请参阅我们的 <a href="/basic-syntax">basic syntax</a>  和 <a href="/extended-syntax">extended syntax</a> 手册。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>这些是 John Gruber 的原始设计文档中列出的元素。所有 Markdown 应用程序都支持这些元素。</p>
<table class="table table-bordered">
  <thead class="thead-light">
    <tr>
      <th>元素</th>
      <th>Markdown 语法</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/basic-syntax/#headings">Heading</a></td>
      <td>
        <code># H1<br>## H2<br>### H3</code>
        </td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#bold">Bold</a></td>
      <td><code>**bold text**</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#italic">Italic</a></td>
      <td><code>*italicized text*</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#blockquotes-1">Blockquote</a></td>
      <td><code>&gt; blockquote</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#ordered-lists">Ordered List</a></td>
      <td><code>
        1. First item<br>
        2. Second item<br>
        3. Third item<br>
      </code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#unordered-lists">Unordered List</a></td>
      <td>
        <code>
          - First item<br>
          - Second item<br>
          - Third item<br>
        </code>
      </td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#code">Code</a></td>
      <td><code>`code`</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#horizontal-rules">Horizontal Rule</a></td>
      <td><code>---</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#links">Link</a></td>
      <td><code>[title](https://www.example.com)</code></td>
    </tr>
    <tr>
      <td><a href="/basic-syntax/#images-1">Image</a></td>
      <td><code>![alt text](image.jpg)</code></td>
    </tr>
  </tbody>
</table>

<h2 id="扩展语法"><a href="#扩展语法" class="headerlink" title="扩展语法"></a>扩展语法</h2><p>这些元素通过添加额外的功能扩展了基本语法。但是，并非所有 Markdown 应用程序都支持这些元素。</p>
<table class="table table-bordered">
  <thead class="thead-light">
    <tr>
      <th>Element</th>
      <th>Markdown Syntax</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/extended-syntax/#tables">Table</a></td>
      <td><code>| Syntax      | Description |<br>
                | ----------- | ----------- |<br>
                | Header      | Title       |<br>
                | Paragraph   | Text        |
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#fenced-code-blocks">Fenced Code Block</a></td>
      <td><code>```<br>
      {<br>
      &nbsp;&nbsp;"firstName": "John",<br>
      &nbsp;&nbsp;"lastName": "Smith",<br>
      &nbsp;&nbsp;"age": 25<br>
      }<br>
      ```
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#footnotes">Footnote</a></td>
      <td><code>
        Here's a sentence with a footnote. [^1]<br><br>
        [^1]: This is the footnote.
      </code></td>
    </tr>
    <tr>
      <td><a href="/extended-syntax/#heading-ids">Heading ID</a></td>
      <td><code>### My Great Heading </code></td></tr></tbody></table></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/"><img class="fill" src="/images/default.jpeg" alt="sql server 中的数组和列表（转载）"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-21T01:39:08.000Z" title="2021/10/21 上午9:39:08">2021-10-21</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:51.377Z" title="2022/2/23 下午5:21:51">2022-02-23</time>更新</span><span class="level-item">7 分钟读完 (大约984个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/sqlserver%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/">sql server 中的数组和列表（转载）</a></h1><div class="content"><span id="more"></span>

<blockquote>
<p>转载自：<a target="_blank" rel="noopener" href="https://www.sommarskog.se/arrays-in-sql.html">Arrays and Lists in SQL Server-The Short Version</a></p>
</blockquote>
<h3 id="原文摘录"><a href="#原文摘录" class="headerlink" title="原文摘录"></a>原文摘录</h3><p><strong>Two Simple Multi-Statement Functions</strong><br>If you search the web, there is no end of functions to split strings into table format. Here, I will present two simple functions that run on SQL 2008 or later, one for a list of integers and one for a list of strings. I should immediately warn you that these functions are not the most efficient and therefore not suitable if you have long lists with thousands of elements. But they are perfectly adequate if you are passing the contents of a multi-choice checkbox from a client where you would rarely have as many as 50 elements.</p>
<p>I opted to share these functions because they are simple and you can easily adapt them if you want different behaviour with regards to the choices that I have made. In my long article, I describe methods that are faster, but they all require extra setup than just a function.</p>
<p>Below is a function to split a delimited list of integers. The function accepts a parameter for the delimiter which can be up to 10 characters long. The function returns the list positions for the elements. An empty element is returned as NULL. If there is a non-numeric value in the list, there will be a conversion error.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       n       <span class="type">int</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (n)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="keyword">convert</span>(<span class="type">int</span>, <span class="built_in">nullif</span>(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>), <span class="string">''</span>)))</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>You are likely to be puzzled by the COLLATE clause. This is a small speed booster. By forcing a binary collation, we avoid that SQL Server employs the full Unicode rules when searching for the delimiter. This pays off when scanning long strings. Why Czech? The language does not matter here, so I just picked one with a short name.</p>
<p>And why datalength divided by 2 and not len? datalength returns the length in bytes, whence the division. len does not count trailing spaces, so it does not work if the delimiter is a space.</p>
<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3, 677,7 , ,-1'</span>, <span class="string">','</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1&lt;-&gt;2&lt;-&gt;3&lt;-&gt; 677&lt;-&gt;7&lt;-&gt;&lt;-&gt;-1'</span>, <span class="string">'&lt;-&gt;'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Since the values are the same in both lists, the output is the same:</p>
<table>
<thead>
<tr>
<th align="center">listpos</th>
<th align="center">n</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">677</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">-1</td>
</tr>
</tbody></table>
<p>Here is an example of how you would use it in a simple query:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  col <span class="keyword">IN</span> (<span class="keyword">SELECT</span> n <span class="keyword">FROM</span> intlist_to_tbl(<span class="string">'1,2,3,4'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>If you find that you are only using comma-separated lists, you may grow tired of having to specify the delimiter every time. To that end, this wrapper can be handy:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> intlisttotbl (<span class="variable">@list</span> nvarchar(MAX)) <span class="keyword">RETURNS</span> <span class="keyword">TABLE</span> <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">RETURN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> listpos, n <span class="keyword">FROM</span> intlist_to_tbl(<span class="variable">@list</span>, <span class="string">','</span>)</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p>I leave it as an exercise to the reader to come up with a better name.</p>
<p>Here is a function for a list of strings. It accepts an input parameter of the type nvarchar(MAX), but the return table has both a varchar and an nvarchar column. I will return to why in a second. Like intlist_to_tbl it returns the list position. It trims leading and trailing spaces. In difference to intlist_to_tbl, empty elements are returned as empty strings and not as NULL.</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> strlist_to_tbl (<span class="variable">@list</span>  nvarchar(MAX),</span><br><span class="line">                                <span class="variable">@delim</span> nvarchar(<span class="number">10</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="variable">@tbl</span> <span class="keyword">TABLE</span> (listpos <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">                       str     <span class="type">varchar</span>(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">                       nstr    nvarchar(<span class="number">4000</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>) <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> <span class="variable">@pos</span>       <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@nextpos</span>   <span class="type">int</span> <span class="operator">=</span> <span class="number">1</span>,</span><br><span class="line">           <span class="variable">@valuelen</span>  <span class="type">int</span>,</span><br><span class="line">           <span class="variable">@nstr</span>      nvarchar(<span class="number">4000</span>),</span><br><span class="line">           <span class="variable">@delimlen</span>  <span class="type">int</span> <span class="operator">=</span> datalength(<span class="variable">@delim</span>) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">   WHILE <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nextpos</span> <span class="operator">=</span> charindex(<span class="variable">@delim</span> <span class="keyword">COLLATE</span> Czech_BIN2, <span class="variable">@list</span>, <span class="variable">@pos</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@valuelen</span> <span class="operator">=</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="variable">@nextpos</span> <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> <span class="variable">@nextpos</span></span><br><span class="line">                              <span class="keyword">ELSE</span> len(<span class="variable">@list</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                         <span class="keyword">END</span> <span class="operator">-</span> <span class="variable">@pos</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@nstr</span> <span class="operator">=</span> ltrim(rtrim(<span class="built_in">substring</span>(<span class="variable">@list</span>, <span class="variable">@pos</span>, <span class="variable">@valuelen</span>)))</span><br><span class="line">      <span class="keyword">INSERT</span> <span class="variable">@tbl</span> (str, nstr)</span><br><span class="line">         <span class="keyword">VALUES</span> (<span class="variable">@nstr</span>, <span class="variable">@nstr</span>)</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="variable">@pos</span> <span class="operator">=</span> <span class="variable">@nextpos</span> <span class="operator">+</span> <span class="variable">@delimlen</span></span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">   <span class="keyword">RETURN</span></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>Here are two examples:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'Alpha (α) | Beta (β)|Gamma (γ)|Delta (δ)|'</span>, <span class="string">'|'</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> strlist_to_tbl(N<span class="string">'a///b///c///v///x'</span>, <span class="string">'///'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Here is the output:</p>
<p>listpos   |  str   |     nstr<br>|:–:|:–:|:–:|<br>1    |      Alpha (a)| Alpha (α)<br>2    |      Beta (ß) | Beta (β)<br>3    |      Gamma (?)| Gamma (γ)<br>4    |      Delta (d)| Delta (δ)<br>5     |              |   |</p>
<p>listpos   |  str   |     nstr<br>|:–:|:–:|:–:|<br>1      |    a     |    a<br>2      |    b     |    b<br>3      |    c     |    c<br>4      |    v     |    v<br>5      |    x     |    x</p>
<p>Note in the first result set that the Greek characters has been replaced by fallback characters in the str column. They are unchanged in the nstr column. (If you have a Greek or a UTF-8 collation, the two columns will be identical, though.)</p>
<p>Here are two examples of using this function:</p>
<figure class="highlight sql"><figcaption><span>sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  varcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> str <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span>   tbl </span><br><span class="line"><span class="keyword">WHERE</span>  nvarcharcol <span class="keyword">IN</span> (<span class="keyword">SELECT</span> nstr <span class="keyword">FROM</span> strlist_to_tbl(<span class="string">'a,b,c'</span>, <span class="string">','</span>))</span><br></pre></td></tr></tbody></table></figure>

<p>These examples illustrate why there are two columns. If you are going to use the list against a varchar column, you need to use the str column. This is important because of the type-conversion rules in SQL Server. If you mistakenly compare varcharcol to nstr, varcharcol will be converted to nvarchar, and this can render any index on varcharcol ineligible for the query, leading to a performance disaster as the table must be scanned. And conversely, if you have an nvarchar column, you need to compare it to the nvarchar value, since else the result can be incorrect because of the character replacement with the conversion to varchar.</p>
<p>I like to point out that these functions are by no means cast in stone, but see them as suggestions. Feel free to modify them according to your preferences and needs.</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/"><img class="fill" src="/images/default.jpeg" alt="MongoDb初识"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-01T07:51:01.000Z" title="2021/9/1 下午3:51:01">2021-09-01</time>发表</span><span class="level-item"><time dateTime="2022-02-23T09:21:39.882Z" title="2022/2/23 下午5:21:39">2022-02-23</time>更新</span><span class="level-item">4 分钟读完 (大约607个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/01/MongoDb%E5%88%9D%E8%AF%86/">MongoDb初识</a></h1><div class="content"><span id="more"></span>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html">https://www.cnblogs.com/my-blogs-for-everone/articles/9749842.html</a></p>
<p>MongoDb 命令查询所有数据库列表</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></tbody></table></figure>

<p>如果想查看当前连接在哪个数据库下面，可以直接输入db<br>db</p>
<p>切换到test数据库下面<br>use test</p>
<p>想查看test下有哪些表或者叫collection，可以输入<br>show collections</p>
<p>想知道mongodb支持哪些命令，可以直接输入help<br>help</p>
<p>想知道当前数据库支持哪些方法<br>db.help();</p>
<p>想知道当前数据库下的表或者表collection支持哪些方法，可以使用以下命令<br>db.user.help();  user为表名</p>
<p>根据条件查找数据<br>通过条件查询： db.foo.find( { x : 77 } , { name : 1 , x : 1 } )  </p>
<ol>
<li><p>超级用户相关：  </p>
<pre><code>  #增加或修改用户密码  

  db.addUser('admin','pwd')  

  #查看用户列表  

  db.system.users.find()  

  #用户认证  

  db.auth('admin','pwd')  

  #删除用户  

  db.removeUser('mongodb')  
</code></pre>
<p>#查看所有用户  </p>
<pre><code>  show users  

  #查看所有数据库  

  show dbs  

  #查看所有的collection  

  show collections  

  #查看各collection的状态  

  db.printCollectionStats()  

  #查看主从复制状态  

  db.printReplicationInfo()  

  #修复数据库  

  db.repairDatabase()  

  #设置记录profiling，0=off 1=slow 2=all  

  db.setProfilingLevel(1)  

  #查看profiling  
 show profile  

  #拷贝数据库  

  db.copyDatabase('mail_addr','mail_addr_tmp')  

  #删除collection  

  db.mail_addr.drop()  

  #删除当前的数据库  

  db.dropDatabase()  
</code></pre>
<ol start="2">
<li><p>客户端连接  </p>
<pre><code>/usr/local/mongodb/bin/mongo user_addr -u user -p 'pwd'  
</code></pre>
</li>
<li><p>增删改  </p>
<pre><code> #存储嵌套的对象  

db.foo.save({'name':'ysz','address':{'city':'beijing','post':100096},'phone':[138,139]})  

#存储数组对象  

db.user_addr.save({'Uid':'yushunzhi@sohu.com','Al':['test-1@sohu.com','test-2@sohu.com']})  

#根据query条件修改，如果不存在则插入，允许修改多条记录  
</code></pre>
<p>db.foo.update({‘yy’:5},{‘$set’:{‘xx’:2}},upsert=true,multi=true)  </p>
<pre><code>#删除yy=5的记录  

db.foo.remove({'yy':5})  

#删除所有的记录  
</code></pre>
<p>   db.foo.remove()  </p>
</li>
<li><p>索引  </p>
<pre><code>增加索引：1(ascending),-1(descending)  

db.things.ensureIndex({firstname: 1, lastname: 1}, {unique: true});  

#索引子对象  

db.user_addr.ensureIndex({'Al.Em': 1})  

#查看索引信息  

db.deliver_status.getIndexes()  

db.deliver_status.getIndexKeys()  

#根据索引名删除索引  
</code></pre>
<p>db.user_addr.dropIndex(‘Al.Em_1’)  </p>
</li>
<li><p>查询  </p>
<pre><code>查找所有  

db.foo.find()  

#查找一条记录  

db.foo.findOne()  

#根据条件检索10条记录  

db.foo.find({'msg':'Hello 1'}).limit(10)  

#sort排序  

db.deliver_status.find({'From':'yushunzhi@sohu.com'}).sort({'Dt',-1})  

db.deliver_status.find().sort({'Ct':-1}).limit(1)  
</code></pre>
<p>   #count操作  </p>
<p>   db.user_addr.count()  </p>
<p>   #distinct操作  </p>
<p>   db.foo.distinct(‘msg’)<br>#&gt;操作  </p>
<p>   db.foo.find({“timestamp”: {“$gte” : 2}})  </p>
<p>   #子对象的查找  </p>
<p>   db.foo.find({‘address.city’:’beijing’})  </p>
</li>
<li><p>管理  </p>
<pre><code>查看collection数据的大小  

db.deliver_status.dataSize()  

#查看colleciont状态  

db.deliver_status.stats()  

#查询所有索引的大小  

db.deliver_status.totalIndexSize()
</code></pre>
</li>
</ol>
</li>
</ol>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/6/">上一页</a></div><div class="pagination-next"><a href="/page/8/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/6/">6</a></li><li><a class="pagination-link is-current" href="/page/7/">7</a></li><li><a class="pagination-link" href="/page/8/">8</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/12/">12</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Blog/"><span class="level-start"><span class="level-item">Blog</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Csharp/"><span class="level-start"><span class="level-item">Csharp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Technology/"><span class="level-start"><span class="level-item">Technology</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Tools/"><span class="level-start"><span class="level-item">Tools</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Tools/%E8%BF%90%E7%BB%B4/"><span class="level-start"><span class="level-item">运维</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/VUE/"><span class="level-start"><span class="level-item">VUE</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/cranky/"><span class="level-start"><span class="level-item">cranky</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/lifestyle/"><span class="level-start"><span class="level-item">lifestyle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/node/"><span class="level-start"><span class="level-item">node</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/other/"><span class="level-start"><span class="level-item">other</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/xml/"><span class="level-start"><span class="level-item">xml</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%91%98%E5%BD%95/"><span class="level-start"><span class="level-item">摘录</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/"><span class="level-start"><span class="level-item">用户认证</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%BD%AC%E8%BD%BD/"><span class="level-start"><span class="level-item">转载</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li></ul></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/2023/02/03/%E5%88%9D%E5%A7%8BGolang/"><img src="/images/default.jpeg" alt="初始Golang"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-02-03T07:52:41.000Z">2023-02-03</time></p><p class="title"><a href="/2023/02/03/%E5%88%9D%E5%A7%8BGolang/">初始Golang</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/02/02/LSP%E5%88%9D%E8%AF%86%E4%BB%A5%E5%8F%8Agopls%E6%98%AF%E4%BB%80%E4%B9%88/"><img src="/images/default.jpeg" alt="LSP初识以及gopls是什么"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-02-02T07:36:17.000Z">2023-02-02</time></p><p class="title"><a href="/2023/02/02/LSP%E5%88%9D%E8%AF%86%E4%BB%A5%E5%8F%8Agopls%E6%98%AF%E4%BB%80%E4%B9%88/">LSP初识以及gopls是什么</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/01/16/Windows%E5%B7%A5%E5%85%B7%E8%AE%B0%E5%BD%95/"><img src="/images/default.jpeg" alt="Windows工具记录"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-01-16T08:30:32.000Z">2023-01-16</time></p><p class="title"><a href="/2023/01/16/Windows%E5%B7%A5%E5%85%B7%E8%AE%B0%E5%BD%95/">Windows工具记录</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/01/10/%E5%88%9D%E5%A7%8BPWA%E3%80%90%E4%B8%80%E3%80%91/"><img src="/images/default.jpeg" alt="初始PWA【一】"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-01-10T06:48:01.000Z">2023-01-10</time></p><p class="title"><a href="/2023/01/10/%E5%88%9D%E5%A7%8BPWA%E3%80%90%E4%B8%80%E3%80%91/">初始PWA【一】</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/01/05/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E7%AC%94%E8%AE%B0/"><img src="/images/default.jpeg" alt="Lambda表达式常见用法笔记"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-01-05T09:06:21.000Z">2023-01-05</time></p><p class="title"><a href="/2023/01/05/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E7%AC%94%E8%AE%B0/">Lambda表达式常见用法笔记</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">一月 2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">十二月 2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">十一月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">九月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">三月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/2019-nCoV/"><span class="tag">2019-nCoV</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ADO-NET/"><span class="tag">ADO.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-NET/"><span class="tag">ASP.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASP-Net-MVC/"><span class="tag">ASP.Net MVC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alert/"><span class="tag">Alert</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C#</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Command/"><span class="tag">Command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Csharp/"><span class="tag">Csharp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DTD/"><span class="tag">DTD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DingTalk/"><span class="tag">DingTalk</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gmail/"><span class="tag">Gmail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Grafana/"><span class="tag">Grafana</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTTP/"><span class="tag">HTTP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IIS/"><span class="tag">IIS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lambda/"><span class="tag">Lambda</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mail/"><span class="tag">Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Markdown/"><span class="tag">Markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenSSL/"><span class="tag">OpenSSL</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Oracle/"><span class="tag">Oracle</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Postman/"><span class="tag">Postman</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prometheus/"><span class="tag">Prometheus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SOAP/"><span class="tag">SOAP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQLlite/"><span class="tag">SQLlite</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Schema/"><span class="tag">Schema</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sql/"><span class="tag">Sql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/System-Net-Mail/"><span class="tag">System.Net.Mail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TLS/"><span class="tag">TLS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Technology/"><span class="tag">Technology</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tools/"><span class="tag">Tools</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML/"><span class="tag">XML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML-Schema/"><span class="tag">XML Schema</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emoji/"><span class="tag">emoji</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kettle/"><span class="tag">kettle</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live2d/"><span class="tag">live2d</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/self-signed-certificates/"><span class="tag">self-signed certificates</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shadowsocks/"><span class="tag">shadowsocks</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql-server/"><span class="tag">sql server</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlserver/"><span class="tag">sqlserver</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/v2ray/"><span class="tag">v2ray</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmess/"><span class="tag">vmess</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webservice/"><span class="tag">webservice</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xml/"><span class="tag">xml</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A0%E5%AF%86/"><span class="tag">加密</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"><span class="tag">发送邮件</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%90%E6%A7%BD/"><span class="tag">吐槽</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"><span class="tag">命令行</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/"><span class="tag">字符编码</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%84%9F%E6%83%B3/"><span class="tag">感想</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%88%90%E9%95%BF/"><span class="tag">成长</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%99%E8%82%B2/"><span class="tag">教育</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%AD%BB%E9%94%81/"><span class="tag">死锁</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%9B%91%E6%8E%A7/"><span class="tag">监控</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%B0%E5%BD%95/"><span class="tag">记录</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B4%9F%E8%83%BD%E9%87%8F/"><span class="tag">负能量</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AC%E8%BD%BD/"><span class="tag">转载</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7/"><span class="tag">软件版本号</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/"><span class="tag">进制转换</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/"><span class="tag">速查表</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81/"><span class="tag">邮件发送</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%85%8D%E7%BD%AE/"><span class="tag">配置</span><span class="tag">2</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Choose C</a><p class="is-size-7"><span>&copy; 2023 zhang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>