<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>不知选啥就选C</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Choose C"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Choose C"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="一个记录生活的Blog"><meta property="og:type" content="blog"><meta property="og:title" content="不知选啥就选C"><meta property="og:url" content="https://yuanjianzhang.github.io/"><meta property="og:site_name" content="不知选啥就选C"><meta property="og:description" content="一个记录生活的Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://yuanjianzhang.github.io/img/og_image.png"><meta property="article:author" content="zhang"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://yuanjianzhang.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yuanjianzhang.github.io"},"headline":"不知选啥就选C","image":["https://yuanjianzhang.github.io/img/og_image.png"],"author":{"@type":"Person","name":"zhang"},"publisher":{"@type":"Organization","name":"不知选啥就选C","logo":{"@type":"ImageObject","url":{"text":"Choose C"}}},"description":"一个记录生活的Blog"}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-1-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Choose C</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/categories/Technology">技术</a><a class="navbar-item" href="/other">树洞</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12"><div class="card"><div class="card-image"><a class="image is-7by3" href="/2023/03/08/%E4%BD%BF%E7%94%A8HTTP%E7%9A%84NETRemoting%E6%BC%8F%E6%B4%9E/"><img class="fill" src="/images/default.jpeg" alt="使用HTTP的.NET Remoting漏洞"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-03-08T09:24:03.000Z" title="2023/3/8 下午5:24:03">2023-03-08</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.376Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">几秒读完 (大约0个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/03/08/%E4%BD%BF%E7%94%A8HTTP%E7%9A%84NETRemoting%E6%BC%8F%E6%B4%9E/">使用HTTP的.NET Remoting漏洞</a></p><div class="content"></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2023/02/03/%E5%88%9D%E5%A7%8BGolang/"><img class="fill" src="/images/default.jpeg" alt="初始Golang"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-02-03T07:52:41.000Z" title="2023/2/3 下午3:52:41">2023-02-03</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.376Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">1 分钟读完 (大约120个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/02/03/%E5%88%9D%E5%A7%8BGolang/">初始Golang</a></p><div class="content"><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h2 id="main-go"><a href="#main-go" class="headerlink" title="main.go"></a>main.go</h2><figure class="highlight golang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    fmt.Println(<span class="string">"Hello World"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>


<h2 id="Template包"><a href="#Template包" class="headerlink" title="Template包"></a>Template包</h2><figure class="highlight golang"><figcaption><span>Template.go</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"text/template"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">	<span class="string">"regexp"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">	fmt.Println(<span class="string">"Hello Go !"</span>)</span><br><span class="line">	tdata := []info{</span><br><span class="line">		{<span class="string">"abcabcabcfsdfsdfsdf"</span>},</span><br><span class="line">		{<span class="string">"aaafsdgdfhergdfbdfgbdhdfgdg"</span>},</span><br><span class="line">	}</span><br><span class="line">	replaceFuncMap := template.FuncMap{</span><br><span class="line">		<span class="string">"replaceAll"</span>:replaceAll,</span><br><span class="line">	}</span><br><span class="line">	tmpl, err := template.New(<span class="string">"test"</span>).Funcs(replaceFuncMap).Parse(<span class="string">`</span></span><br><span class="line"><span class="string">	{{ range . }} </span></span><br><span class="line"><span class="string">		// {{ .Info }} </span></span><br><span class="line"><span class="string">		{{ replaceAll "(aaaa)" "1111" .Info </span></span><br><span class="line"><span class="string">		| replaceAll "(abc)" "【$1】"  </span></span><br><span class="line"><span class="string">		| replaceAll "(aaa)" "【$1】"  </span></span><br><span class="line"><span class="string">		}} </span></span><br><span class="line"><span class="string">	{{end}}`</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> { <span class="built_in">panic</span>(err) }</span><br><span class="line">	err = tmpl.Execute(os.Stdout, tdata)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> { <span class="built_in">panic</span>(err) }</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	fmt.Scanln(&amp;a)</span><br><span class="line">	fmt.Print(<span class="string">"input"</span>, a)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">replaceAll</span><span class="params">(from ,to, input <span class="type">string</span>)</span></span> <span class="type">string</span>{</span><br><span class="line">	m1 := regexp.MustCompile(from)</span><br><span class="line">	 <span class="keyword">return</span> m1.ReplaceAllString(input,to)</span><br><span class="line">	<span class="comment">// return strings.ReplaceAll(input,from ,to)</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> info <span class="keyword">struct</span>{</span><br><span class="line">	Info <span class="type">string</span></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="http-库"><a href="#http-库" class="headerlink" title="http 库"></a>http 库</h2></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2023/02/02/LSP%E5%88%9D%E8%AF%86%E4%BB%A5%E5%8F%8Agopls%E6%98%AF%E4%BB%80%E4%B9%88/"><img class="fill" src="/images/default.jpeg" alt="LSP初识以及gopls是什么"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-02-02T07:36:17.000Z" title="2023/2/2 下午3:36:17">2023-02-02</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.376Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">11 分钟读完 (大约1642个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/02/02/LSP%E5%88%9D%E8%AF%86%E4%BB%A5%E5%8F%8Agopls%E6%98%AF%E4%BB%80%E4%B9%88/">LSP初识以及gopls是什么</a></p><div class="content"><p>要谈 gopls，得先聊聊 LSP。</p>
<h2 id="LSP-是什么"><a href="#LSP-是什么" class="headerlink" title="LSP 是什么"></a>LSP 是什么</h2><p>LSP，全称 Language Server Protocol，即语言服务器协议，这是微软创建的一个协议（目前已有 Codenvy，Red Hat 和 Sourcegraph 等公司一起支持它的发展）。定义了在编辑器或 IDE 中与语言服务器之间使用的协议，该语言服务器提供诸如自动完成，转到定义，查找所有引用等语言功能。语言服务器索引格式（LSIF，其发音类似于“ else if”）的目标是支持开发工具或 Web UI 中的富代码导航，而不需要源代码的本地副本。</p>
<p>目前该协议得到了编辑器和语言社区的广泛支持。</p>
<p>LSP 的官方网站：<a target="_blank" rel="noopener" href="https://microsoft.github.io/language-server-protocol/%EF%BC%8CGitHub">https://microsoft.github.io/language-server-protocol/，GitHub</a> 地址：<a target="_blank" rel="noopener" href="https://github.com/Microsoft/language-server-protocol%E3%80%82%E7%9B%AE%E5%89%8D%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%EF%BC%882020-09-06%EF%BC%89%EF%BC%9A3.15%E3%80%82">https://github.com/Microsoft/language-server-protocol。目前最新版本（2020-09-06）：3.15。</a></p>
<h2 id="LSP-解决了什么问题"><a href="#LSP-解决了什么问题" class="headerlink" title="LSP 解决了什么问题"></a>LSP 解决了什么问题</h2><p>为编程语言添加诸如自动完成、转到定义或鼠标悬停出现文档之类的功能需要付出大量的努力。传统上，这项工作必须为每个开发工具重复进行，因为每个工具为实现相同的特性提供不同的 api。</p>
<p>语言服务器（Language Server）旨在提供特定语言的智能功能，并通过支持进程间通讯协议与开发工具进行通信。</p>
<p>语言服务器协议（LSP）背后的思想是为这些服务器和开发工具的通信方式提供标准化协议支持。通过这种方式，可以在多个开发工具中重用单个 Language Server，而这些工具反过来可以用最少的工作支持多种语言。</p>
<p>例如，之前需要为 VSCode 构建 Go 插件、为 Sublime Text 构建 Go 插件、为 Vim 构建 Go 插件、为 Sourcegraph 构建 Go 插件，很多重复的工作。现在，对于每种语言，LSP 允许语言社区将精力集中在一个高性能语言服务器上，这个服务器可以提供代码完成，悬停文档提示、跳转到定义、查找引用等功能，而编辑器和客户端社区可以专注于构建一个单一的、高性能的、直观的和惯用的扩展，这个扩展可以与任何语言服务器通信，即时提供深入的语言支持。</p>
<p>LSP 是语言提供商和工具供应商的双赢！</p>
<h2 id="LSP-的工作原理"><a href="#LSP-的工作原理" class="headerlink" title="LSP 的工作原理"></a>LSP 的工作原理</h2><p>语言服务器（Language Server）作为单独的进程运行，开发工具在 LSP 基础上通过 JSON-RPC 与服务器通信。下面是一个开发工具和语言服务器在进行编辑时如何通信的例子：<br><img src="https://microsoft.github.io/language-server-protocol/overviews/lsp/img/language-server-sequence.png" alt="通信的示例"><br>图片来自 LSP 官网，演示了协议如何在文档引用（uri）和文档位置级别与语言服务器通信。这些数据类型与编程语言无关，适用于所有编程语言。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://microsoft.github.io/language-server-protocol/overviews/lsp/overview/">How it works</a></p>
<p><strong>The user opens a file (referred to as a document) in the tool</strong>: The tool notifies the language server that a document is open (‘textDocument/didOpen’). From now on, the truth about the contents of the document is no longer on the file system but kept by the tool in memory. The contents now has to be synchronized between the tool and the language server.</p>
<p><strong>The user makes edits</strong>: The tool notifies the server about the document change (‘textDocument/didChange’) and the language representation of the document is updated by the language server. As this happens, the language server analyses this information and notifies the tool with the detected errors and warnings (‘textDocument/publishDiagnostics’).</p>
<p><strong>The user executes “Go to Definition” on a symbol of an open document</strong>: The tool sends a ‘textDocument/definition’ request with two parameters: (1) the document URI and (2) the text position from where the ‘Go to Definition’ request was initiated to the server. The server responds with the document URI and the position of the symbol’s definition inside the document.</p>
<p><strong>The user closes the document (file)</strong>: A ‘textDocument/didClose’ notification is sent from the tool informing the language server that the document is now no longer in memory. The current contents are now up to date on the file system.</p>
</blockquote>
<p>以下是在 C++ 文档中针对“Go to Definition”请求在开发工具和语言服务器之间传输的有效负载。</p>
<p>这是请求:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"jsonrpc"</span><span class="punctuation">:</span> <span class="string">"2.0"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"id"</span> <span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"method"</span><span class="punctuation">:</span> <span class="string">"textDocument/definition"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"params"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"textDocument"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"uri"</span><span class="punctuation">:</span> <span class="string">"file:///p%3A/mseng/VSCode/Playgrounds/cpp/use.cpp"</span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"position"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"line"</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"character"</span><span class="punctuation">:</span> <span class="number">12</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>

<p>这是响应：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"jsonrpc"</span><span class="punctuation">:</span> <span class="string">"2.0"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"id"</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"result"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"uri"</span><span class="punctuation">:</span> <span class="string">"file:///p%3A/mseng/VSCode/Playgrounds/cpp/provide.cpp"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"range"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"start"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"line"</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"character"</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">            <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"end"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"line"</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"character"</span><span class="punctuation">:</span> <span class="number">11</span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="gopls-是什么"><a href="#gopls-是什么" class="headerlink" title="gopls 是什么"></a>gopls 是什么</h2><p>经过上面对 LSP 的介绍，你应该猜到 gopls（发音为“Go please”） 是什么了吧？！没错，gopls是由 Go 团队开发的官方 Go 语言服务器。它为任何 LSP 兼容的编辑器提供 IDE 功能。</p>
<p>在 LSP 官网列出了<a target="_blank" rel="noopener" href="https://microsoft.github.io/language-server-protocol/implementors/servers/">相关的实现</a>，包括三个部分。</p>
<h3 id="1、Language-Servers：列出各个语言的-LSP-实现"><a href="#1、Language-Servers：列出各个语言的-LSP-实现" class="headerlink" title="1、Language Servers：列出各个语言的 LSP 实现"></a>1、Language Servers：列出各个语言的 LSP 实现</h3><p>其中 Go 语言的实现有两个：（Sourcegraph 的不再维护，因为集中维护一个会更好）<br><img src="2.jpg" alt="Alt text"></p>
<p>gopls 是 Go 官方维护的、对 LSP 的实现，即一个 Go 语言的官方 Language Server。</p>
<h3 id="2、LSP-Clients：列出支持-LSP-的开发工具"><a href="#2、LSP-Clients：列出支持-LSP-的开发工具" class="headerlink" title="2、LSP Clients：列出支持 LSP 的开发工具"></a>2、LSP Clients：列出支持 LSP 的开发工具</h3><p>包括 VSCode、Sublime Text、Atom、Emacs、Vim 和 Eclipse 等很多开发工具。在上文提到的两个网站都有列出。</p>
<h3 id="3、SDKs-for-LSP：为了方便开发"><a href="#3、SDKs-for-LSP：为了方便开发" class="headerlink" title="3、SDKs for LSP：为了方便开发"></a>3、SDKs for LSP：为了方便开发</h3><p>为了方便开发，还有一些 LSP 的 SDK 可以使用。具体可以查看：<a target="_blank" rel="noopener" href="https://microsoft.github.io/language-server-protocol/implementors/sdks/%E3%80%82">https://microsoft.github.io/language-server-protocol/implementors/sdks/。</a></p>
<h2 id="进一步了解-gopls"><a href="#进一步了解-gopls" class="headerlink" title="进一步了解 gopls"></a>进一步了解 gopls</h2><p>首先说明下，目前 gopls 还不是稳定版本，处于 alpha 状态，所以 VSCode 默认没有启用它。项目地址：<a target="_blank" rel="noopener" href="https://github.com/golang/tools/tree/master/gopls%E3%80%82">https://github.com/golang/tools/tree/master/gopls。</a></p>
<p>目前 gopls 支持的特性包括：</p>
<ul>
<li>Autocompletion</li>
<li>Jump to definition</li>
<li>Signature help</li>
<li>Hover</li>
<li>Document symbols</li>
<li>References</li>
<li>Rename</li>
</ul>
<p>目前已知存在如下的问题：</p>
<ul>
<li>Editing multiple modules in one editor window: #32394[1]</li>
<li>Type checking does not work in cgo packages: #35721[2]</li>
<li>Does not work with build tags: #29202[3]</li>
<li>Find references and rename only work in a single package: #32877[4]</li>
</ul>
<p>当前 gopls 的工作重点是确保稳定性（期待发布 1.0 版本），之前一直受诟骂的是资源占用，目前已经好太多了。</p>
<p>有如下编辑器支持 gopls，你可以根据自己喜爱的编辑器查看相应的安装、配置说明。</p>
<ul>
<li>VSCode[5]</li>
<li>Vim Neovim Vim/Neovim[6]</li>
<li>Emacs[7]</li>
<li>Acme[8]</li>
<li>Sublime Text[9]</li>
<li>Atom[10]</li>
</ul>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2023/01/16/Windows%E5%B7%A5%E5%85%B7%E8%AE%B0%E5%BD%95/"><img class="fill" src="/images/default.jpeg" alt="Windows工具记录"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-01-16T08:30:32.000Z" title="2023/1/16 下午4:30:32">2023-01-16</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.376Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">几秒读完 (大约27个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/16/Windows%E5%B7%A5%E5%85%B7%E8%AE%B0%E5%BD%95/">Windows工具记录</a></p><div class="content"><h2 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h2><table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">描述</th>
<th align="left">地址</th>
</tr>
</thead>
<tbody><tr>
<td align="left">FileZilla</td>
<td align="left">免费、开源的FTP客户端</td>
<td align="left"><a target="_blank" rel="noopener" href="https://filezilla-project.org/download.php">https://filezilla-project.org/download.php</a></td>
</tr>
</tbody></table>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2023/01/10/%E5%88%9D%E5%A7%8BPWA%E3%80%90%E4%B8%80%E3%80%91/"><img class="fill" src="/images/default.jpeg" alt="初始PWA【一】"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-01-10T06:48:01.000Z" title="2023/1/10 下午2:48:01">2023-01-10</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.376Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">几秒读完 (大约4个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/10/%E5%88%9D%E5%A7%8BPWA%E3%80%90%E4%B8%80%E3%80%91/">初始PWA【一】</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7147267313920638983">https://juejin.cn/post/7147267313920638983</a></p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2023/01/05/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E7%AC%94%E8%AE%B0/"><img class="fill" src="/images/default.jpeg" alt="Lambda表达式常见用法笔记"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-01-05T09:06:21.000Z" title="2023/1/5 下午5:06:21">2023-01-05</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.442Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">几秒读完 (大约64个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/05/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E7%AC%94%E8%AE%B0/">Lambda表达式常见用法笔记</a></p><div class="content"><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zitjubiz/p/a-left-outer-join-using-linq-extension-methods.html">Lamda 表达式里的Join和GroupJoin的区别, 如何实现SQL的Left Join效果</a></p>
</blockquote>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><ul>
<li><p>基础数据</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span>{</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">string</span> Name{<span class="keyword">get</span>;<span class="keyword">set</span>;}</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">string</span> ID{<span class="keyword">get</span>;<span class="keyword">set</span>;}</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">string</span> </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>Group by</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2023/01/05/sqlserver%E6%95%B0%E6%8D%AE%E5%BA%93dump%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90/"><img class="fill" src="/images/default.jpeg" alt="sqlserver数据库dump文件分析"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-01-05T08:35:50.000Z" title="2023/1/5 下午4:35:50">2023-01-05</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.436Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BD%AC%E8%BD%BD/">转载</a></span><span class="level-item">几秒读完 (大约17个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/05/sqlserver%E6%95%B0%E6%8D%AE%E5%BA%93dump%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90/">sqlserver数据库dump文件分析</a></p><div class="content"><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/jil-wen/p/12486408.html">sqlserver数据库dump文件分析</a></p>
</blockquote>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/28/Shell%E7%AC%94%E8%AE%B0/"><img class="fill" src="/images/default.jpeg" alt="Shell笔记"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-28T09:13:32.000Z" title="2022/12/28 下午5:13:32">2022-12-28</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.457Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">24 分钟读完 (大约3605个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/28/Shell%E7%AC%94%E8%AE%B0/">Shell笔记</a></p><div class="content"><h2 id="获取入参"><a href="#获取入参" class="headerlink" title="获取入参"></a>获取入参</h2><h3 id="方式一：-0-1-2"><a href="#方式一：-0-1-2" class="headerlink" title="方式一：$0,$1,$2.."></a>方式一：$0,$1,$2..</h3><p>采用$0,$1,$2..等方式获取脚本命令行传入的参数，值得注意的是，<code>$0</code>获取到的是脚本路径以及脚本名，后面按顺序获取参数，当参数超过10个时(包括10个)，需要使用${10},${11}….才能获取到参数，但是一般很少会超过10个参数的情况。</p>
<figure class="highlight shell"><figcaption><span>test.sh</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo "脚本$0"</span><br><span class="line">echo "第一个参数$1"</span><br><span class="line">echo "第二个参数$2"</span><br><span class="line">……</span><br><span class="line">echo "第十个参数$10"</span><br><span class="line">echo "第十个参数${10}"</span><br></pre></td></tr></tbody></table></figure>

<p>在shell中执行脚本，结果如下</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&gt;./test.sh a b c d e f g h i j</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">shell中将会输出：</span></span><br><span class="line">脚本名./test.sh</span><br><span class="line">第一个参数a</span><br><span class="line">第二个参数b</span><br><span class="line">第三个参数c</span><br><span class="line">第四个参数d</span><br><span class="line">第五个参数e</span><br><span class="line">第六个参数f</span><br><span class="line">第七个参数g</span><br><span class="line">第八个参数h</span><br><span class="line">第九个参数i</span><br><span class="line">第十个参数a0</span><br><span class="line">第十个参数j</span><br></pre></td></tr></tbody></table></figure>

<p>可以看到${10}正确读取到了第十个参数，而$10被分成$1读取到第一个参数a然后拼接字符串0，于是输出a0。</p>
<p>优点：获取参数更容易，执行脚本时需要的输入少</p>
<p>缺点：必须按照顺序输入参数，如果中间漏写则参数对应就会错误</p>
<h3 id="方式二：getopts"><a href="#方式二：getopts" class="headerlink" title="方式二：getopts"></a>方式二：getopts</h3><p>语法格式：getopts [option[:]] [DESCPRITION] VARIABLE<br>option：表示为某个脚本可以使用的选项<br>“:”：如果某个选项（option）后面出现了冒号（”:”），则表示这个选项后面可以接参数（即一段描述信息DESCPRITION）<br>VARIABLE：表示将某个选项保存在变量VARIABLE中</p>
<figure class="highlight shell"><figcaption><span>test.sh</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">while getopts ":a:b:c:" opt</span><br><span class="line">do</span><br><span class="line">    case $opt in</span><br><span class="line">        a)</span><br><span class="line">        echo "参数a的值$OPTARG"</span><br><span class="line">        ;;</span><br><span class="line">        b)</span><br><span class="line">        echo "参数b的值$OPTARG"</span><br><span class="line">        ;;</span><br><span class="line">        c)</span><br><span class="line">        echo "参数c的值$OPTARG"</span><br><span class="line">        ;;</span><br><span class="line">        ?)</span><br><span class="line">        echo "未知参数"</span><br><span class="line">        exit 1;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></tbody></table></figure>

<p>用一个while循环加case分支获取不同参数，<code>:a:b:c</code>相当于定义参数的变量名，有时候可能会有未知参数，所以增加一个?的分支。</p>
<p>在shell中执行脚本，结果如下</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&gt;./test.sh -a 1 -b 2 -c 3</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在shell中的输出</span></span><br><span class="line">参数a的值1</span><br><span class="line">参数b的值2</span><br><span class="line">参数c的值3</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&gt;./test.sh -a 1 -c 3</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在shell中的输出</span></span><br><span class="line">参数a的值1</span><br><span class="line">参数c的值3</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&gt;./test.sh -a 1 -c 3 -d 4</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在shell中的输出</span></span><br><span class="line">参数a的值1</span><br><span class="line">参数c的值3</span><br><span class="line">未知参数</span><br></pre></td></tr></tbody></table></figure>

<p>优点：由于使用了<code>-a</code>加参数值的方式进行一一匹配，所以不会参数匹配错误，同时也可以缺省参数，并不会导致参数错误，同时也便于后期参数的扩展和移植</p>
<p>缺点：脚本执行时参数需要的输入会增多</p>
<h2 id="字符串变量截取、替换和删除"><a href="#字符串变量截取、替换和删除" class="headerlink" title="字符串变量截取、替换和删除"></a>字符串变量截取、替换和删除</h2><h3 id="获取变量字符串长度"><a href="#获取变量字符串长度" class="headerlink" title="获取变量字符串长度"></a>获取变量字符串长度</h3><p>想要知道<code>"www.baidu.com"</code>的变量<code>net</code>的长度十分简单，通过$</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/28/IIS%E5%BA%94%E7%94%A8HTTP%E5%8D%8F%E8%AE%AE%E5%8D%87%E7%BA%A7HTTPS/"><img class="fill" src="/images/default.jpeg" alt="IIS应用HTTP协议升级HTTPS"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-28T08:32:34.000Z" title="2022/12/28 下午4:32:34">2022-12-28</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.460Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">5 分钟读完 (大约699个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/28/IIS%E5%BA%94%E7%94%A8HTTP%E5%8D%8F%E8%AE%AE%E5%8D%87%E7%BA%A7HTTPS/">IIS应用HTTP协议升级HTTPS</a></p><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>应用旧访问地址：<a target="_blank" rel="noopener" href="http://192.168.1.1:6622/xxxx">http://192.168.1.1:6622/xxxx</a></p>
<h2 id="SSL证书生成"><a href="#SSL证书生成" class="headerlink" title="SSL证书生成"></a>SSL证书生成</h2><h2 id="绑定证书"><a href="#绑定证书" class="headerlink" title="绑定证书"></a>绑定证书</h2><h3 id="一、IIS配置证书绑定，启用HTTPS"><a href="#一、IIS配置证书绑定，启用HTTPS" class="headerlink" title="一、IIS配置证书绑定，启用HTTPS"></a>一、IIS配置证书绑定，启用HTTPS</h3><p>优点：方便、快捷，删除原先端口绑定的HTTP，添加新的HTTPS协议至原端口。</p>
<p>缺点：如果应用程序在很多地方使用，协议升级后，原地址：<code>http://192.168.1.1:6622</code> 这种访问形式会失效，如果存在大量引用，会导致工作量大、难排查的问题</p>
<h3 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h3><p>IIS配置里删除应用的旧绑定端口（6622），新增一个端口（6500）用于Nginx代理目标<br>    tips: IIS里6500端口可以不配置证书，使用Nginx中配置的证书。<br>通过Nginx监听原先端口，配置SSL证书文件，利用Nginx自带的497状态，将HTTP访问升级至HTTPS访问</p>
<p>配置文件：</p>
<figure class="highlight plaintext"><figcaption><span>nginx.conf</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">server {</span><br><span class="line">    listen 6622 ssl;</span><br><span class="line">    server_name 192.168.1.1;</span><br><span class="line">    # SSL</span><br><span class="line">    ssl_certificate                      cert/DEMO.crt;</span><br><span class="line">    ssl_certificate_key                  cert/DEMO.key;</span><br><span class="line">    # 中间证书</span><br><span class="line">    ssl_trusted_certificate              cert/RootCA.crt;</span><br><span class="line">    error_page 497 301 =307 https://$host:6622$request_uri;</span><br><span class="line">    location /{</span><br><span class="line">        proxy_pass http://$host:6500;  #请求转发至新端口</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        proxy_set_header Host $host:$server_port;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-Forwarded-Ssl on;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"># 情况 服务器只开放6530 一个https的端口</span><br><span class="line"># nginx 通过监听6530的访问情况，使用497处理http访问异常，重定向至https的6530端口</span><br><span class="line"># https访问后，nginx内部代理访问内网的6529端口【实际服务所在端口】，</span><br><span class="line"># 再 使用proxy_redirect 修改6529传来的应答头中的"Location"和"Refresh"字段</span><br><span class="line"># 这样就实现了http和https的兼容，并且不需要修改其它项目中的地址。</span><br><span class="line">server {</span><br><span class="line">    listen 6530 ssl;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    # SSL</span><br><span class="line">    ssl_certificate                      cert/124-221-233-39_DEMO.crt;</span><br><span class="line">    ssl_certificate_key                  cert/124-221-233-39_DEMO.key;</span><br><span class="line">    ssl_trusted_certificate              cert/124-221-233-39_RootCA.crt;</span><br><span class="line">    </span><br><span class="line">    location /{</span><br><span class="line">        # proxy_ssl_server_name on;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header Host $host:$server_port;;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line">        proxy_pass http://10.0.4.13:6529;</span><br><span class="line">        proxy_redirect http://10.0.4.13:6529 /;</span><br><span class="line">    }</span><br><span class="line">    error_page 497 301 =307 https://$host:$server_port$request_uri;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><strong>参考：</strong><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/16669773/nginx-reverse-proxy-to-backend-running-on-localhost">https://stackoverflow.com/questions/16669773/nginx-reverse-proxy-to-backend-running-on-localhost</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/faye0412/article/details/75200607">https://blog.csdn.net/faye0412/article/details/75200607</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/jycjyc/article/details/106191981">https://blog.csdn.net/jycjyc/article/details/106191981</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_27745471/article/details/124735251">https://blog.csdn.net/qq_27745471/article/details/124735251</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/15435799">How to redirect on the same port from http to https with nginx reverse proxy</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/34744713/nginx-redirect-http-to-https-with-custom-port-server">nginx redirect http to https with custom port server</a></p>
</blockquote>
<h2 id="二、使用IIS的URL重写组件【只适用有域名的】"><a href="#二、使用IIS的URL重写组件【只适用有域名的】" class="headerlink" title="二、使用IIS的URL重写组件【只适用有域名的】"></a>二、使用IIS的URL重写组件【只适用有域名的】</h2><blockquote>
<p>参考：<br><a target="_blank" rel="noopener" href="https://aboutssl.org/iis-redirection-http-to-https/">https://aboutssl.org/iis-redirection-http-to-https/</a><br><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/answers/questions/762252/iis-10-redirect-http-to-httpsmysitecom.html">https://learn.microsoft.com/en-us/answers/questions/762252/iis-10-redirect-http-to-httpsmysitecom.html</a><br><a target="_blank" rel="noopener" href="https://www.aprilcherryblossom.top/2021/01/04/chong-xie/">IIS中实现HTTPS的自动跳转</a><br><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/iis/extensions/url-rewrite-module/url-rewrite-module-configuration-reference">URL 重写模块配置引用</a><br><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/iis/extensions/url-rewrite-module/url-rewrite-module-20-configuration-reference">URL Rewrite Module 2.0 Configuration Reference</a><br><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/iis/web-dev-reference/server-variables">IIS Server Variables</a></p>
</blockquote>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/28/Oracle%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E5%B9%B6%E6%8E%88%E6%9D%83/"><img class="fill" src="/images/default.jpeg" alt="Oracle创建视图并授权"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-28T08:13:35.000Z" title="2022/12/28 下午4:13:35">2022-12-28</time>发表</span><span class="level-item"><time dateTime="2023-09-19T02:30:49.455Z" title="2023/9/19 上午10:30:49">2023-09-19</time>更新</span><span class="level-item">7 分钟读完 (大约1075个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/28/Oracle%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E5%B9%B6%E6%8E%88%E6%9D%83/">Oracle创建视图并授权</a></p><div class="content"><h2 id="Oracle-创建视图"><a href="#Oracle-创建视图" class="headerlink" title="Oracle 创建视图"></a>Oracle 创建视图</h2><h2 id="Oracle-用户创建、授权"><a href="#Oracle-用户创建、授权" class="headerlink" title="Oracle 用户创建、授权"></a>Oracle 用户创建、授权</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fiberhome/p/7273756.html">Oracle创建用户、角色、授权、建表空间</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ggll611928/p/6023116.html">Oracle创建视图(View)</a></p>
<h2 id="Sql"><a href="#Sql" class="headerlink" title="Sql"></a>Sql</h2><figure class="highlight sql"><figcaption><span>test.sql</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--在CDR有创建视图权限的帐户下，创建视图test2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> TEST2 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> HIS_PAT_PAGE <span class="keyword">from</span> HIS_PAT_INFO</span><br><span class="line"><span class="keyword">WITH</span> READ <span class="keyword">ONLY</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--在使用DBA或者有权限的用户帐户下执行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> VTEST identified <span class="keyword">by</span> VTEST;<span class="comment">--创建用户VTEST</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> session <span class="keyword">to</span> VTEST;<span class="comment">--授予登录权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> CDR."TEST2" <span class="keyword">to</span> VTEST;<span class="comment">--授予VTEST用户查看CDR的TEST2视图权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">CREATE</span> SYNONYM <span class="keyword">to</span> VTEST;   <span class="comment">--授权VTEST用户创建同义词权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> synonym VTEST.TEST2 <span class="keyword">for</span> CDR.TEST2;<span class="comment">--创建同义词 TEST2 替代CDR.TEST2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用VTEST用户登录查询</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> TEST2 <span class="keyword">where</span> rownum <span class="operator">&lt;</span><span class="number">5</span>;<span class="comment">--同义词</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> CDR.TEST2 <span class="keyword">where</span> rownum <span class="operator">&lt;</span><span class="number">5</span>;<span class="comment">--没有同义词，必须使用用户名前缀。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--在使用DBA或者有权限的用户帐户下执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--撤销授权</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">CREATE</span> SYNONYM <span class="keyword">FROM</span>  VTEST;<span class="comment">--撤销创建同义词权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">select</span> <span class="keyword">on</span> CDR."TEST2" <span class="keyword">FROM</span> VTEST;<span class="comment">--撤销TEST2视图的查看权限</span></span><br><span class="line"><span class="comment">--删除用户</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> VTEST cascade;<span class="comment">--使用 cascade参数可以删除该用户的全部objects【并没有删除相应的表空间】</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除视图TEST2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> TEST2</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>CASCADE参数:</p>
<blockquote>
<p>CASCADE</p>
<p>使用 cascade参数可以删除该用户的全部objects。要说明的如下：</p>
<p>如果用户的schema中有表，则在删除表的时候自动删除与该表相关的主键和外键。</p>
<p>如果用户的schema中有表，则在删除表的时候自动删除与该表相关的索引。</p>
<p>删除用户时，用户在其他用户中的objects不会被删除，只会被置为无效。</p>
<p>视图，同义词，存储过程，函数，包；</p>
<p>其他用户建立的基于被删除用户的物化视图不会被删除，只是不能在刷新了。</p>
<p>用户模式下的所有触发器全部被删除</p>
<p>被删除用户建立的其他用户不会被删除</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/nmap/p/9256916.html">oracle删除当前用户以及当前用户所有表、索引等操作</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/programpoet/article/details/4106171">Oracle中drop user和drop user cascade的区别</a></p>
</blockquote>
<h3 id="拓展笔记"><a href="#拓展笔记" class="headerlink" title="拓展笔记"></a>拓展笔记</h3><h4 id="oracle表名不打双引号查不到原因"><a href="#oracle表名不打双引号查不到原因" class="headerlink" title="oracle表名不打双引号查不到原因"></a>oracle表名不打双引号查不到原因</h4><p>1、<strong>oracle表和字段是有大小写的区别。oracle默认是大写，如果我们用双引号括起来的就区分大小写，如果没有，系统会自动转成大写。</strong></p>
<p>2、<strong>我们在使用navicat使用可视化创建数据库时候，navicat自动给我们加上了<code>“”</code></strong></p>
<h4 id="Oracle-创建、查看用户"><a href="#Oracle-创建、查看用户" class="headerlink" title="Oracle 创建、查看用户"></a>Oracle 创建、查看用户</h4><ul>
<li>查看所有用户：</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dba_users;<span class="comment">--描述数据库的所有用户</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> all_users;<span class="comment">--列出对当前用户可见的数据库的所有用户</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_users;<span class="comment">--描述当前用户。此视图不显示 PASSWORD 、 PROFILE 、 PASSWORD_VERSIONS 、 EDITIONS_ENABLED 、 AUTHENTICATION_TYPE 和 LAST_LOGIN 列。</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>查看用户或角色系统权限(直接赋值给用户或角色的系统权限)：</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dba_sys_privs;<span class="comment">--描述授予用户和角色的系统权限</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_sys_privs;<span class="comment">-- (查看当前用户所拥有的权限)</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>查看角色(只能查看登陆用户拥有的角色)所包含的权限</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> role_sys_privs;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>查看用户对象权限：</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dba_tab_privs;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> all_tab_privs;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_tab_privs;</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>查看所有角色： </li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dba_roles;</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>查看用户或角色所拥有的角色：</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dba_role_privs;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_role_privs;</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>查看哪些用户有sysdba或sysoper系统权限(查询时需要相应权限)</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> V$PWFILE_USERS</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>SqlPlus中查看一个用户所拥有权限</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dba_sys_privs <span class="keyword">where</span> grantee<span class="operator">=</span><span class="string">'username'</span>; <span class="comment">--其中的username即用户名要大写才行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--比如：  </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dba_sys_privs <span class="keyword">where</span> grantee<span class="operator">=</span><span class="string">'TOM'</span>;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="REVOKE回收权限"><a href="#REVOKE回收权限" class="headerlink" title="REVOKE回收权限"></a>REVOKE回收权限</h4><ul>
<li>回收角色权限</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">CONNECT</span>,RESOURCE <span class="keyword">FROM</span> chenmh;</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>回收系统权限</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">CREATE</span> <span class="keyword">FROM</span> chenmh;</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>回收用户对象权限,回收zhang用户下person表的所有权限，如果是单个授予的权限需要单个的收回</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> zhang.person <span class="keyword">FROM</span> chenmh;</span><br></pre></td></tr></tbody></table></figure>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">上一页</a></div><div class="pagination-next"><a href="/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/12/">12</a></li></ul></nav></div><!--!--><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Choose C</a><p class="is-size-7"><span>&copy; 2023 zhang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>